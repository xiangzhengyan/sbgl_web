if(typeof zfy.component.Config=="undefined"){zfy.component.Config={};}zfy.component.Config.mapping={$borderLayout:"BorderLayout",$button:"Button",$gridTable:"GridTable",$input:"Input",$select:"Select",$pageBar:"PageBar",$ajaxPageBar:"AjaxPageBar",$titleBar:"TitleBar",$grid:"Grid",$tree:"Tree",$toolBar:"ToolBar",$areaSelect:"AdministrativeAreaSelect",$projAreaSelect:"ProjectAreaSelect",$latAndLog:"LatAndLog",$uploader:"Uploader",$multipleSelect:"MultipleSelect"};zfy.component.Input=function(a){this.init(a);this.value=this.getProperty("value");this.format=this.getProperty("format");this.dataType=this.getProperty("data-type");this.maxValue=this.getProperty("max-value");this.minValue=this.getProperty("min-value");this.maxLength=this.getProperty("max-length",50);this.minLength=this.getProperty("min-length");this.required=this.getProperty("required",false);this.changedListeners=new Array();this.paint();};zfy.component.Input.prototype=new zfy.component.BaseComponent();zfy.component.Input.prototype.paint=function(){var a=this;this.ele.addClass("form_input");this.ele.on("change",function(){a.fireChanged();});this.ele.blur(function(){this.comobj.verify();});if(this.dataType=="date"||this.dataType=="dateTime"){this.datePicker();}else{if(this.dataType=="currency"){this.currencyOper();}}};zfy.component.Input.prototype.currencyOper=function(){$("#"+this.id).after('<input type="hidden" id="temp_'+this.id+'" name="'+$("#"+this.id).attr("name")+'" />');$("#"+this.id).removeAttr("name");$("#"+this.id).attr("name","_name"+this.id);$("#temp_"+this.id).val($("#"+this.id).val());$("#"+this.id).blur(function(){$("#temp_"+this.id).val($("#"+this.id).val());var g=$("#"+this.id).val();if(g!=null&&g!=""){if(!isNaN(g)){var h=2;h=h>0&&h<=20?h:2;var e=g;e=parseFloat((e+"").replace(/[^\d\.-]/g,"")).toFixed(h)+"";var b=e.split(".")[0].split("").reverse();var f=e.split(".")[1];var d="";var c;for(c=0;c<b.length;c++){d+=b[c]+((c+1)%3==0&&(c+1)!=b.length?",":"");}var a=d.split("").reverse().join("")+"."+f;if(a=="NaN.undefined"||a==undefined){$("#"+this.id).val("");}else{$("#"+this.id).val(a);}}}});$("#"+this.id).focus(function(){$("#"+this.id).val($("#temp_"+this.id).val());});};zfy.component.Input.prototype.datePicker=function(){var a=this;a.element.setAttribute("autocomplete","off");this.ele.addClass("Wdate");if(!this.format){if(this.dataType=="date"){this.format="yyyy-MM-dd";}else{this.format="yyyy-MM-dd HH:mm:ss";}}var b={dateFmt:this.format};if(!(this.maxValue==null||this.maxValue=="")){b.maxDate=this.maxValue;}if(!(this.minValue==null||this.minValue=="")){b.minDate=this.minValue;}b.onpicking=function(){setTimeout(function(){if(a._oldValue!=a.ele.val()){a.fireChanged();a._oldValue=a.ele.val();}},1);};a._oldValue=this.value;this.ele.blur(function(){if(a._oldValue!=a.ele.val()){a.fireChanged();a._oldValue=a.ele.val();}});this.ele.click(function(){WdatePicker(b);});};zfy.component.Input.prototype.verify=function(){var c=true;var a=null;var b=this.ele.val();if(this.required&&$.trim(b)==""){a="不能为空";c=false;}if(b!=""){if(this.dataType=="integer-pos"&&!/^(\+)?\d+$/.test(b)){a="请输入一个大于0的整数";c=false;}else{if(this.dataType=="number-pos"&&!/^\d+(\.\d+)?$/.test(b)){a="请输入一个大于0的数字";c=false;}else{if(this.dataType=="currency"&&isNaN($("#temp_"+this.id).val())){a="不能输入非数字";c=false;}else{if(this.maxLength&&b.length>this.maxLength){a="最多输入"+this.maxLength+"个汉字";c=false;}}}}}this.showError(a);return c;};zfy.component.Input.prototype.showError=function(a){if(a){if(this.dataType=="date"||this.dataType=="dateTime"){this.ele.addClass("date_input_invalid");}else{if(this.dataType=="area"){this.ele.addClass("administrativeArea_invalid");}else{this.ele.addClass("input_invalid");}}this.element.title=a;}else{if(this.dataType=="date"||this.dataType=="dateTime"){this.ele.removeClass("date_input_invalid");}else{if(this.dataType=="area"){this.ele.removeClass("administrativeArea_invalid");}else{this.ele.removeClass("input_invalid");}}this.element.title="";}};zfy.component.Input.prototype.addChangedListener=function(a){this.changedListeners.push(a);};zfy.component.Input.prototype.fireChanged=function(b){for(var a=0;a<this.changedListeners.length;a++){this.changedListeners[a]();}};zfy.component.Button=function(a){this.init(a);this.paint();};zfy.component.Button.prototype=new zfy.component.BaseComponent();zfy.component.Button.prototype.paint=function(){this.ele.addClass("form_button");this.ele.hover(function(){$(this).removeClass("form_button");$(this).addClass("form_button_on");},function(){$(this).removeClass("form_button_on");$(this).addClass("form_button");});};zfy.component.BorderLayout=function(c){this.init(c);$(this.element).addClass("borderLayout");this.topEl=$("#"+c+" .top");this.centerEl=$("#"+c+" .center");this.bottomEl=$("#"+c+" .bottom");var a=this;a.resize();var b=function(){a.resize();};$(window).resize(b);};zfy.component.BorderLayout.prototype=new zfy.component.BaseComponent();zfy.component.BorderLayout.prototype.resize=function(){if(!this.centerEl){alert("错误信息：borderLayout必须有center节点");return;}var e=$(this.element).width();var a=$(this.element).height();if(e<0){e=0;}if(a<0){a=0;}var g=0;var d=0;var h=0;var b=0;if(this.topEl){var j=this.topEl.height();g+=j;h+=j;this.topEl.css({width:e});}this.centerEl.css({top:g});if(this.bottomEl){var f=this.bottomEl.height();if(f==0){var c=this.bottomEl.css("height");if(c.indexOf("px")>0){f=parseInt(c.substring(0,c.length-2));}}h+=f;this.bottomEl.css({top:a-f,height:f,width:e});}h=a-h;if(h<0){h=0;}this.centerEl.css({height:h,width:e});};zfy.component.PageBar=function(a){this.init(a);this.formId=this.getProperty("form-id");this.totalRows=parseInt(this.getProperty("total-rows","0"));this.pageSize=parseInt(this.getProperty("page-size","25"));this.currentPage=parseInt(this.getProperty("current-page","1"));this.totalPage=parseInt((parseInt(this.totalRows)+parseInt(this.pageSize)-1)/this.pageSize);this.totalPage=this.totalPage==0?1:this.totalPage;this.prePage=(this.currentPage-1)>0?(this.currentPage-1):1;this.nextPage=(this.currentPage+1)<=this.totalPage?(this.currentPage+1):this.totalPage;this.firstStatus=(this.currentPage>1)?true:false;this.preStatus=(this.currentPage>1)?true:false;this.nextStatus=(this.currentPage<this.totalPage)?true:false;this.lastStatus=(this.currentPage<this.totalPage)?true:false;this.paint();};zfy.component.PageBar.prototype=new zfy.component.BaseComponent();zfy.component.PageBar.prototype.paint=function(){var f=this.firstStatus?$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/first-page.gif":$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/un_first-page.gif";var g=this.preStatus?$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/pre-page.gif":$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/un_pre-page.gif";var e=this.nextStatus?$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/next-page.gif":$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/un_next-page.gif";var d=this.lastStatus?$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/last-page.gif":$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/un_last-page.gif";var c=this;var a="共<span id='"+this.id+"totalRowsSpan'>"+this.totalRows+"</span>条记录 每页<select class='pageSize1'><option value='10'>10</option><option value='25'>25</option><option value='50'>50</option><option value='100'>100</option></select>行 第"+this.currentPage+"/"+this.totalPage+"页&nbsp;&nbsp;<span class='_pageBarSpan' onclick=\"$com('"+this.id+"').gotoPage('1','first','"+this.formId+"')\"><img style='padding-top:3px;' src='"+f+"' /><span class='_pageBarWd'>首页</span></span>&nbsp;&nbsp;<span class='_pageBarSpan' onclick=\"$com('"+this.id+"').gotoPage('"+this.prePage+"','pre','"+this.formId+"')\"><img style='padding-top:3px;' src='"+g+"' /><span  class='_pageBarWd'>前页</span></span>&nbsp;&nbsp;<span class='_pageBarSpan' onclick=\"$com('"+this.id+"').gotoPage('"+this.nextPage+"','next','"+this.formId+"')\"><img style='padding-top:3px;' src='"+e+"' /><span  class='_pageBarWd'>后页</span></span>&nbsp;&nbsp; <span class='_pageBarSpan' onclick=\"$com('"+this.id+"').gotoPage('"+this.totalPage+"','last','"+this.formId+"')\"><img style='padding-top:3px;' src='"+d+"' /><span  class='_pageBarWd'>尾页</span></span>&nbsp;&nbsp;";var b="<input type='hidden' id='"+this.id+"_pageSize' name='pageSize' value='"+this.pageSize+"'/>";this.ele.html(a);$("#"+this.formId).append(b);$("._pageBarSpan").css("cursor","pointer");$("._pageBarSpan").on("mouseover",function(){$(this).css("background-color","#ACDAF0");});$("._pageBarSpan").on("mouseout",function(){$(this).css("background-color","");});$("#"+this.id+" select").val(this.pageSize);$("#"+this.id+" select").on("change",function(){c.go(1,$(this).val());});};zfy.component.PageBar.prototype.gotoPage=function(b,c,e){b=parseInt(b);var d="";var a=true;if(c=="first"){if(!this.firstStatus){d="当前已是第一页！";a=false;}}else{if(c=="pre"){if(!this.preStatus){a=false;d="当前已是第一页!";}}else{if(c=="next"){if(!this.nextStatus){a=false;d="当前已是最后一页！";}}else{if(!this.lastStatus){a=false;d="当前已是最后一页！";}}}}if(!a){$msg.showWarning(d);return;}this.go(b,this.pageSize);};zfy.component.PageBar.prototype.go=function(b,a){var c;if($("#"+this.formId).attr("action").indexOf("?")>=0){c=$("#"+this.formId).attr("action")+"&pageSize="+a+"&pageNum="+b;}else{c=$("#"+this.formId).attr("action")+"?pageSize="+a+"&pageNum="+b;}$("#"+this.formId).attr("action",c);$mask.show();$("#"+this.formId).submit();};zfy.component.AjaxPageBar=function(id){this.init(id);this.url=this.getProperty("url");this.params=this.getProperty("params","{}");this.callback=this.getProperty("callback","callback");this.beforeSubmit=this.getProperty("beforeSubmit");this.totalRows=parseInt(this.getProperty("total-rows","0"));this.pageSize=parseInt(this.getProperty("page-size","25"));this.currentPage=parseInt(this.getProperty("current-page","1"));this.totalPage=parseInt((parseInt(this.totalRows)+parseInt(this.pageSize)-1)/this.pageSize);this.totalPage=this.totalPage==0?1:this.totalPage;this.prePage=(this.currentPage-1)>0?(this.currentPage-1):1;this.nextPage=(this.currentPage+1)<=this.totalPage?(this.currentPage+1):this.totalPage;this.firstStatus=(this.currentPage>1)?true:false;this.preStatus=(this.currentPage>1)?true:false;this.nextStatus=(this.currentPage<this.totalPage)?true:false;this.lastStatus=(this.currentPage<this.totalPage)?true:false;eval("this.params="+this.params);this.draw();};zfy.component.AjaxPageBar.prototype=new zfy.component.BaseComponent();zfy.component.AjaxPageBar.prototype.draw=function(){var d=this.firstStatus?$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/first-page.gif":$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/un_first-page.gif";var e=this.preStatus?$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/pre-page.gif":$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/un_pre-page.gif";var c=this.nextStatus?$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/next-page.gif":$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/un_next-page.gif";var b=this.lastStatus?$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/last-page.gif":$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/ico/un_last-page.gif";var a="共"+this.totalRows+"条记录 每页<select class='pageSize1' onchange=\"this.parentNode.comobj.changePageSize(this,'"+this.formId+"')\"><option value='10'>10</option><option value='25'>25</option><option value='50'>50</option><option value='100'>100</option></select>行 第"+this.currentPage+"/"+this.totalPage+"页&nbsp;&nbsp;<span class='_pageBarSpan' onclick=\"$com('"+this.id+"').gotoPage('1','first','"+this.url+"')\"><img style='padding-top:3px;' src='"+d+"' /><span class='_pageBarWd'>首页</span></span>&nbsp;&nbsp;<span class='_pageBarSpan' onclick=\"$com('"+this.id+"').gotoPage('"+this.prePage+"','pre','"+this.url+"')\"><img style='padding-top:3px;' src='"+e+"' /><span  class='_pageBarWd'>前页</span></span>&nbsp;&nbsp;<span class='_pageBarSpan' onclick=\"$com('"+this.id+"').gotoPage('"+this.nextPage+"','next','"+this.url+"')\"><img style='padding-top:3px;' src='"+c+"' /><span  class='_pageBarWd'>后页</span></span>&nbsp;&nbsp; <span class='_pageBarSpan' onclick=\"$com('"+this.id+"').gotoPage('"+this.totalPage+"','last','"+this.url+"')\"><img style='padding-top:3px;' src='"+b+"' /><span  class='_pageBarWd'>尾页</span></span>&nbsp;&nbsp;";+"<input type='hidden' id='pageNum' name='pageNum' value='"+this.currentPage+"'/><input type='hidden' id='pageSize' name='pageSize' value='"+this.pageSize+"'/><input type='hidden' id='totalPage'  value='"+this.totalPage+"'/>";this.ele.html(a);$("._pageBarSpan").css("cursor","pointer");$("._pageBarSpan").on("mouseover",function(){$(this).css("background-color","#ACDAF0");});$("._pageBarSpan").on("mouseout",function(){$(this).css("background-color","");});$("#"+this.id+" select").val(this.pageSize);};zfy.component.AjaxPageBar.prototype.gotoPage=function(b,d,c){b=parseInt(b);var e="";var a=true;if(d=="first"){if(!this.firstStatus){e="当前已是第一页！";a=false;}}else{if(d=="pre"){if(!this.preStatus){a=false;e="当前已是第一页!";}}else{if(d=="next"){if(!this.nextStatus){a=false;e="当前已是最后一页！";}}else{if(!this.lastStatus){a=false;e="当前已是最后一页！";}}}}if(!a){$msg.showWarning(e);return;}this.submit(this.url,b,$("#"+this.id+" [id='pageSize']").val());};zfy.component.AjaxPageBar.prototype.changePageSize=function(a,b){this.submit(this.url,1,$(a).val());};zfy.component.AjaxPageBar.prototype.addParams=function(b){for(var a in b){this.params[a]=b[a];}};zfy.component.AjaxPageBar.prototype.submit=function(url,pageNo,pageSize){this.params.pageNum=pageNo;this.params.pageSize=pageSize;if(beforeSubmit){eval(this.beforeSubmit);}$ajax.post(url,this.params,eval(this.callback));};zfy.component.GridTable=function(a){this.init(a);this.headerRowCount=1;this.selectedId=null;this.paint();};zfy.component.GridTable.prototype=new zfy.component.BaseComponent();zfy.component.GridTable.prototype.paint=function(){this.ele.attr("cellpadding",0);this.ele.attr("cellspacing",0);this.ele.attr("border",0);this.ele.attr("class","grid_table");var b=this;this.ele.find("tr").each(function(d){if(d>b.headerRowCount-1){var e=$(this);e.addClass(d%2==0?"row_odd":"row_even");}});var a=document.getElementById(this.id).getElementsByTagName("tr");window.onload=function(){for(var d=0;d<a.length;d++){a[d].onmousedown=function(){c(this);};}};function c(d){for(var e=0;e<a.length;e++){if(a[e]==d){a[e].style.backgroundColor="#FEFBBD";b.selectedId=$(a[e]).attr("id");}else{a[e].style.backgroundColor="";}}}};zfy.component.GridTable.prototype.updateRow=function(c,b){var a=this.ele.find("#"+c);if(a){a.children("td").each(function(d){if(d>=b.length){return;}if(b[d]!=null){this.innerHTML=b[d];}});}};zfy.component.GridTable.prototype.deleteRow=function(b){var a=this.ele.find("#"+b);if(a){a.remove();}};zfy.component.GridTable.prototype.deleteSelectedRow=function(){var a=this.ele.find("#"+this.selectedId);if(a){a.remove();}};zfy.component.GridTable.prototype.getSelectedRowId=function(){return this.selectedId;};zfy.component.GridTable.prototype.addRow=function(e,c){var b=this.element.insertRow(this.element.rows.length);b.id=e;for(var a=0;a<c.length;a++){var d=b.insertCell(a);d.innerHTML=c[a];}this.paint();};zfy.component.GridTable.prototype.deleteAllRows=function(b){var a=this.ele.find("tr");a.each(function(c){if(c>0){$(this).remove();}});};zfy.component.GridTable.prototype.getRowCount=function(){return this.ele.find("tr").length-this.headerRowCount;};zfy.component.TitleBar=function(c){var b=$("#"+c);b.addClass("tit");var a=b[0].innerHTML;b[0].innerHTML='<div class="tit_bg"><div class="tit_right"></div><div class="tit_left"></div>'+a+"</div>";};zfy.component.Grid=function(a){this.init(a);this.width=this.getProperty("width");this.height=this.getProperty("height");if(this.width){this.element.setAttribute("gridWidth",this.width);if(_isFF){this.element.setAttribute("width",this.width);}}if(this.height){this.element.setAttribute("gridHeight",this.height);}$("#"+this.id+" th").each(function(b){if($(this).attr("ext-align")=="number"){$(this).attr("align","right");}});this.paint();this.ele=$("#"+a);this.element=$("#"+a)[0];};zfy.component.Grid.prototype=new zfy.component.BaseComponent();zfy.component.Grid.prototype.paint=function(){this.grid=new dhtmlXGridFromTable(this.element);this.grid.enableAutoHeight();this.grid.setSkin("dhx_gray");this.grid.entBox.id=this.id;this.init(this.id);};zfy.component.Grid.prototype.updateRow=function(c,b){for(var a=0;a<b.length;a++){if(b[a]!=null){this.setCellValue(c,a,b[a]);}}};zfy.component.Grid.prototype.deleteRow=function(g,a){if(g==null||g==""){this.grid.deleteSelectedRows();}else{var e=this.grid.getRowById(g);var f=this.grid.getRowIndex(g);var c=this.grid._nextRow(f,1);if(c==null){c=this.grid._nextRow(f,-1);}this.grid.deleteRow(g,e);this.grid.selectRow(c);}if(typeof a=="string"){var d=$("#"+a);if(d!=null){if(d.val()!=null){d.val(parseInt(d.val())-1);}if(d.html()!=null){d.html(parseInt(d.html())-1);}}}else{if(typeof a=="object"){for(var b=0;b<a.length;b++){var d=$("#"+a[b]);if(d.val()!=null){d.val(parseInt(d.val())-1);}if(d.html()!=null){d.html(parseInt(d.html())-1);}}}}};zfy.component.Grid.prototype.addRow=function(e,d,b){this.grid.addRow(e,d,-1);if(typeof b=="string"){var c=$("#"+b);if(c!=null){if(c.val()!=null){c.val(parseInt(c.val())+1);}if(c.html()!=null){c.html(parseInt(c.html())+1);}}}else{if(typeof b=="object"){for(var a=0;a<b.length;a++){var c=$("#"+b[a]);if(c!=null){if(c.val()!=null){c.val(parseInt(c.val())+1);}if(c.html()!=null){c.html(parseInt(c.html())+1);}}}}}};zfy.component.Grid.prototype.deleteAllRows=function(a){this.grid.clearAll();};zfy.component.Grid.prototype.getRowCount=function(){};zfy.component.Grid.prototype.getSelectedRowId=function(){return this.grid.getSelectedId();};zfy.component.Grid.prototype.selectRowById=function(a){this.grid.selectRowById(a);};zfy.component.Grid.prototype.setCellValue=function(d,b,c){var a=this.grid.cells(d,b);if(a){a.setValue(c);}};zfy.component.Grid.prototype.getCellValue=function(c,b){var a=this.grid.cells(c,b);if(a){return a.getValue();}};zfy.component.Grid.prototype.attachEvent=function(b,a){this.grid.attachEvent(b,a);};zfy.component.Tree=function(a){this.init(a);this.multiSelection=this.getProperty("multi-selection")=="true";this.rootId=this.getProperty("root-id");this.cascade=this.getProperty("cascade")=="true";this.paint();};zfy.component.Tree.prototype=new zfy.component.BaseComponent();zfy.component.Tree.prototype.paint=function(){this.tree=new dhtmlXTreeObject(this.id,"100%","100%",this.rootId);var a=$util.getAppName()+"/resource/platform/js/dhtmlx/tree/images/";this.tree.setImagePath(a);if(this.multiSelection){this.tree.enableCheckBoxes(true);if(this.cascade){this.tree.enableThreeStateCheckboxes(true);}}};zfy.component.Tree.prototype.loadXML=function(a){this.tree.loadXML(a);};zfy.component.Tree.prototype.attachEvent=function(b,a){this.tree.attachEvent(b,a);};zfy.component.Tree.prototype.getAllSelectedIds=function(b,a){var c=this.tree.getAllCheckedBranches();return c;};zfy.component.Tree.prototype.getAllUnSelectedIds=function(b,a){var c=this.tree.getAllUnchecked();return c;};zfy.component.Tree.prototype.enableContextMenu=function(a){if(a){this.tree.cMenu=a;}};zfy.component.Tree.prototype.openItem=function(b){var a=this.tree._globalIdStorageFind(b);if(!a){return 0;}else{return this.tree._openItem(a);}};zfy.component.Tree.prototype.findItem=function(a,d,c,b){this.tree.findItem(a,d,c,b);};zfy.component.Tree.prototype.getUserData=function(b,a){return this.tree.getUserData(b,a);};zfy.component.Tree.prototype.setItemStyle=function(c,b,a){this.tree.setItemStyle(c,b,a);};zfy.component.Tree.prototype.setItemColor=function(e,d,f){this.tree.setItemColor(e,d,f);};zfy.component.Tree.prototype.unSelectItem=function(b){var a=this.tree._globalIdStorageFind(b);this.tree._unselectItem(a);};zfy.component.Tree.prototype.setOnCheckHandler=function(a){this.tree.attachEvent("onCheck",a);};zfy.component.Tree.prototype.getItemText=function(a){return this.tree.getItemText(a);};zfy.component.Tree.prototype.isChecked=function(b){var a=this.tree._globalIdStorageFind(b);if(!a){return;}return a.checkstate;};zfy.component.Tree.prototype.setOnClickHandler=function(a){this.tree.attachEvent("onSelect",a);};zfy.component.Tree.prototype.selectItem=function(c,b,a){this.tree.selectItem(c,b,a);};zfy.component.Tree.prototype.getSelectedItemId=function(){return this.tree.getSelectedItemId();};zfy.component.Tree.prototype.hasChildren=function(a){return this.tree.hasChildren(a);};zfy.component.Tree.prototype.getSelectedItemText=function(){return this.tree.getSelectedItemText();};zfy.component.Tree.prototype.insertNewChild=function(d,h,j,c,g,f,e,b,a){return this.tree.insertNewItem(d,h,j,c,g,f,e,b,a);};zfy.component.Tree.prototype.deleteItem=function(b,a){return this.tree.deleteItem(b,a);};zfy.component.Tree.prototype.setItemText=function(c,b,a){return this.tree.setItemText(c,b,a);};zfy.component.ToolBar=function(id){this.init(id);this.formId=this.getProperty("form-id");if(this.ele.attr("auth")==""){this.userAuth=undefined;}else{this.userAuth=eval("("+this.ele.attr("auth")+")");}this.items=new Array();this.paint();this.initEvent();};zfy.component.ToolBar.prototype=new zfy.component.BaseComponent();zfy.component.ToolBar.prototype.paint=function(){var a=this;this.ele.append("<div id="+(this.id+1)+"></div>");this.toolbar=new dhtmlXToolbarObject((this.id+1));var b=$util.getAppName()+"/resource/platform/js/dhtmlx/toolbar/";this.toolbar.setSkin("dhx_web");this.toolbar.setIconsPath(b+"ico/");$("#"+this.id+" item").each(function(d){var c=a.items.length;var e=$(this).attr("name");switch(e){case"new":a.createItem(c,this,"new","新建","new.gif","new.gif");break;case"save":a.createItem(c,this,"save","保存","save.gif","save.gif");break;case"edit":a.createItem(c,this,"edit","编辑","edit.gif","edit.gif");break;case"view":a.createItem(c,this,"view","查看","view.gif","view.gif");break;case"delete":a.createItem(c,this,"delete","删除","remove.gif","remove.gif");break;case"back":a.createItem(c,this,"back","返回","back.gif","back.gif");break;case"downloadExcel":a.createItem(c,this,"downloadExcel","下载模板","downloadExcel.gif","downloadExcel.gif");break;case"importExcel":a.createItem(c,this,"importExcel","导入Excel","import_excel.gif","import_excel.gif");break;case"foldExcel":a.createItem(c,this,"foldExcel","上传数据","folder_excel.gif","folder_excel.gif");break;case"page":a.createPageItem(c,this,"page");break;case"backMain":a.createItem(c,this,"backMain","返回主资产页面","back.gif","back.gif");break;case"exportExcel":a.createItem(c,this,"exportExcel","导出excel","export.gif","export.gif");break;case"validate":a.createItem(c,this,"validateExcel","数据验证","validate.gif","validate.gif");break;case"map":a.createItem(c,this,"map","地图","ztt_map.png","ztt_map.png");break;case"gis":a.createItem(c,this,"gis","在地图中绘制","gis.jpg","gis.jpg");break;default:a.createDefItem(c,this);break;}});};zfy.component.ToolBar.prototype.initEvent=function(){var a=this;this.toolbar.attachEvent("onClick",function(d){for(var c=0;c<a.items.length;c++){if(a.items[c].id==d){a.items[c].onclick();break;}}});var b=$("#"+this.formId);setTimeout(function(){if(a.formId){b.find("*[name]").each(function(){$(this).change(function(){a.changed=true;});if(this.comobj&&this.comobj.addChangedListener){this.comobj.addChangedListener(function(){a.changed=true;});}});}},1);};zfy.component.ToolBar.prototype.createItem=function(index,htmlItem,name,defText,defImg,defImgDis){var itemAuth=$(htmlItem).attr("auth");if(this.userAuth&&!this.auth(name)&&(itemAuth!="false")){return;}var self=this;var text=$(htmlItem).attr("text")==null?defText:$(htmlItem).attr("text");this.toolbar.addButton(name,index,text,defImg,defImgDis);this.items[index]=new Object();this.items[index].id=name;this.items[index].onclickString=$(htmlItem).attr("action");this.items[index].onclick=function(){eval(self.items[index].onclickString);};};zfy.component.ToolBar.prototype.createDefItem=function(index,htmlItem,defImg,defImgDis){var text=$(htmlItem).attr("text");var id=$(htmlItem).attr("id");var itemAuth=$("htmlItem").attr("auth");if(this.userAuth&&(itemAuth!="false")){if(text==null){$msg.showError("自定义item标签必须指定text属性");return;}if(id==null){$msg.showError("自定义item标签必须指定id属性,id属性用于配置权限");return;}if(this.userAuth&&!this.auth(id)){return;}}var self=this;if(!id){id="_genid_"+htmlItem.id+"_"+index;}this.toolbar.addButton(id,index,$(htmlItem).attr("text"),$(htmlItem).attr("img")==null?defImg:$(htmlItem).attr("img"),$(htmlItem).attr("img-dis")==null?defImgDis:$(htmlItem).attr("img-dis"));this.items[index]=new Object();this.items[index].id=id;this.items[index].onclickString=$(htmlItem).attr("action");this.items[index].onclick=function(){eval(self.items[index].onclickString);};};zfy.component.ToolBar.prototype.createPageItem=function(b,c,a){return b;};zfy.component.ToolBar.prototype.auth=function(a){for(var b in this.userAuth){if(a.toLowerCase()==b.toLowerCase()){return true;}}return false;};zfy.component.AdministrativeAreaSelect=function(a){this.init(a);this.rootCode=this.getProperty("root_code");this.showRoot=this.getProperty("show_root");this.showType=this.getProperty("show_type");this.canSelectType=this.getProperty("canselect_type");this.value=this.getProperty("value");this.readOnly=this.getProperty("readOnly",false);this.required=this.getProperty("required",false);this.disabled=this.getProperty("disabled");this.length=this.getProperty("length");this.label=this.getProperty("label","areaLabel");this.isLoad=false;this.changedListeners=new Array();this.paint();};zfy.component.AdministrativeAreaSelect.prototype=new zfy.component.BaseComponent();zfy.component.AdministrativeAreaSelect.prototype.paint=function(id){$("#administrativeArea"+this.id).remove();$("#key_"+this.id).remove();var seft=this;this.ele.addClass("form_input");var div_box=document.createElement("div");div_box.id="administrativeArea"+this.id;div_box.style.position="absolute";div_box.style.display="none";div_box.style.overflow="hidden";div_box.setAttribute("z-index","1000");div_box.style.backgroundColor="white";document.body.appendChild(div_box);var key=document.createElement("input");key.id="key_"+this.id;key.name="key_"+this.id;key.setAttribute("class","$input");div_box.appendChild(key);eval("new zfy.component.Input('"+key.id+"')");var div_tree=document.createElement("div");div_tree.id="treeObject"+this.id;div_tree.setAttribute("class","$tree");div_tree.setAttribute("multi-selection","false");div_tree.setAttribute("cascade","true");div_tree.setAttribute("root-id","0");div_tree.style.width="100%";div_tree.style.height="100%";div_tree.style.overflow="auto";div_box.appendChild(div_tree);this.tree=eval("new zfy.component.Tree('treeObject"+this.id+"')");$(key).after('<button class="search_button" onclick="$com(\'treeObject'+this.id+"').findItem(document.getElementById('"+key.id+"').value, null, null, false);\">查询</button>");this.tree.attachEvent("onClick",function(unitCode){var type=this.getUserData(unitCode,"type");var canSelectType=seft.canSelectType;if(canSelectType.indexOf(type)==-1){var temp=this._globalIdStorageFind(unitCode);this._unselectItem(temp);return;}var name=this.getItemText(unitCode);var label=seft.label;var id=seft.id;document.getElementById(label).value=name;document.getElementById(id).value=unitCode;$("#administrativeArea"+seft.id).hide();$("#key").val("");seft.fireChanged();});$("#administrativeArea"+this.id).css("border","1px solid #999999");$("#administrativeArea"+this.id).css({width:"300",height:"400px"});$("#administrativeArea"+this.id).css("margin-top","-1px");$("#administrativeArea"+this.id).hide();var code=this.id;var codeLabel=this.label;$("#"+code).css("display","none");$("#"+code).val(this.value);var txt=document.getElementById(this.id);var obj=document.createElement("input");obj.id=this.label;obj.name=this.label;obj.setAttribute("autocomplete","off");obj.value="";if(this.required){obj.setAttribute("required","true");}if(this.readOnly){obj.readOnly=true;}txt.parentNode.insertBefore(obj,txt);if(this.length==null||this.length==""){this.length="200px";}if(this.value){$ajax.post($util.getAppName()+"/administrative/getUnitName.do",{unitCode:this.value},function(data){$("#"+codeLabel).val(data.data);$(obj).bind("propertychange input",myfun);});}$("#"+codeLabel).css("width",this.length);$("#"+codeLabel).addClass("administrativeArea");function myfun(){if(obj.value==""){$("#"+code).val("");seft.fireChanged();}}jQuery.fn.selectArea=function(targetId){var _seft=this;$(_seft).on("click",function(){if(!seft.isLoad){seft.tree.loadXML($util.getAppName()+"/administrative/administrativeAreaTree.do?unitCode="+seft.rootCode+"&showRoot="+seft.showRoot+"&showType="+seft.showType+"&canSelectType="+seft.canSelectType);seft.isLoad=true;}var A_top=$(this).offset().top+$(this).outerHeight(true);var A_left=$(this).offset().left;$(targetId).show().css({position:"absolute",top:A_top+"px",left:A_left+"px"});});$(document).click(function(event){if(event.target.id!=_seft.selector.substring(1)){$(targetId).hide();seft.verify();}$(document.getElementById("key_"+seft.id)).val("");});$(targetId).on("click",function(e){e.stopPropagation();});$(document).bind("keydown",function(ev){if(ev.keyCode==27){$(targetId).hide();$(document.getElementById("key_"+seft.id)).val("");}});return this;};$("#"+codeLabel).selectArea("#administrativeArea"+this.id);};zfy.component.AdministrativeAreaSelect.prototype.verify=function(){var c=true;var a=null;var b=this.ele.val();if(this.required&&$.trim(b)==""){a="不能为空";c=false;}this.showError(a);return c;};zfy.component.AdministrativeAreaSelect.prototype.showError=function(a){if(a){$("#"+this.label).addClass("administrativeArea_invalid");$("#"+this.label).attr({title:a});}else{$("#"+this.label).removeClass("administrativeArea_invalid");$("#"+this.label).attr({title:""});}};zfy.component.AdministrativeAreaSelect.prototype.addChangedListener=function(a){this.changedListeners.push(a);};zfy.component.AdministrativeAreaSelect.prototype.fireChanged=function(b){for(var a=0;a<this.changedListeners.length;a++){this.changedListeners[a]();}};zfy.component.ProjectAreaSelect=function(b){this.init(b);this.areaId=this.getProperty("area-id");this.required=this.getProperty("required",false);this.oldAreaCode=$("#"+this.areaId).val();this.changedListeners=new Array();this.changed=true;if($("#"+this.areaId).attr("id")==null){}this.label=this.getProperty("label"," ");this.paint();var a=this;if(this.areaId&&$("#"+this.areaId).attr("id")){$com(this.areaId).addChangedListener(function(){if($("#"+a.areaId).val().substring(0,8)!=a.oldAreaCode.substring(0,8)){a.clear();a.changed=true;a.fireChanged();}a.oldAreaCode=$("#"+a.areaId).val();});}};zfy.component.ProjectAreaSelect.prototype=new zfy.component.BaseComponent();zfy.component.ProjectAreaSelect.prototype.paint=function(e){this.ele.addClass("form_input");var c=document.createElement("DIV");c.id="projectArea"+this.id;c.style.position="absolute";c.style.display="none";c.style.overflow="hidden";document.body.appendChild(c);var d='<iframe id="iframe_'+this.id+'" name="iframe" src="" width="100%" height="100%" border="0" marginWidth="0" marginHeight="0" frameBorder="no" scrolling="hidden"/>';$(c).html(d);this.frameObj=$("#iframe_"+this.id);$(c).css("border","1px solid #999999");$(c).css({width:"300",height:"400px"});$(c).css("margin-top","-1px");$(c).hide();this.ele.css("display","none");var a=this.element;this.labelObj=document.createElement("input");this.labelObj.id="projAreaLabel"+this.id;this.labelObj.name="projAreaLabel";this.labelObj.value=this.label;this.labelObj.readOnly=true;this.labelObj.UNSELECTABLE=true;if(this.readOnly){}this.labelObj.className="input";this.labelObj.required="true";a.parentNode.insertBefore(this.labelObj,a);$(this.labelObj).css("width","200px");$(this.labelObj).addClass("administrativeArea");var b=this;jQuery.fn.selectProjArea=function(){var f=this;$(f).on("click",function(){if((!$("#"+b.areaId).val())||$("#"+b.areaId).val()==""){$msg.showWarning("请先选择所在地区或所在镇/村）");return;}if(b.changed){var h=$util.getAppName()+"/project/htmlSelect.do?htmlid="+b.id+"&code="+$("#"+b.areaId).val();b.frameObj.attr("src",h);}var g=$(this).offset().top+$(this).outerHeight(true);var j=$(this).offset().left;$(c).show().css({position:"absolute",top:g+"px",left:j+"px"});b.changed=false;b.fireChanged();});$(document).click(function(g){if(g.target.id!=f.selector.substring(1)){$(c).hide();}$("#iframe"+b.element.id).contents().find("#key").val("");});$(c).click(function(g){g.stopPropagation();});$(document).bind("keydown",function(g){if(g.keyCode==27){$(targetId).hide();$(document.getElementById("key_"+seft.id)).val("");}});return this;};$("#projAreaLabel"+this.id).selectProjArea();};zfy.component.ProjectAreaSelect.prototype.clear=function(){this.labelObj.value="";this.element.value="";};zfy.component.ProjectAreaSelect.prototype.verify=function(){var c=true;var a=null;var b=this.ele.val();if(this.required&&$.trim(b)==""){a="不能为空";c=false;}this.showError(a);return c;};zfy.component.ProjectAreaSelect.prototype.showError=function(a){var b=this.dataType=="date"||this.dataType=="dateTime";if(a){this.ele.addClass(b?"date_input_invalid":"input_invalid");this.element.title=a;}else{this.ele.removeClass(b?"date_input_invalid":"input_invalid");this.element.title="";}};zfy.component.ProjectAreaSelect.prototype.addChangedListener=function(a){this.changedListeners.push(a);};zfy.component.ProjectAreaSelect.prototype.fireChanged=function(b){for(var a=0;a<this.changedListeners.length;a++){this.changedListeners[a]();}};zfy.component.LatAndLog=function(a){this.init(a);this.required=this.getProperty("required",false);this.name=this.getProperty("name");this.value=this.getProperty("value");this.dataType=this.getProperty("data-type");this.changedListeners=new Array();this.paint();};zfy.component.LatAndLog.prototype=new zfy.component.BaseComponent();zfy.component.LatAndLog.prototype.paint=function(d){var b=this;this.ele.addClass("form_input");this.ele.on("change",function(){b.fireChanged();});this.ele.blur(function(){this.comobj.verify();});var c=document.createElement("input");c.id=this.name;c.name=this.name;c.value=this.value;c.type="hidden";var a=this.element;a.parentNode.insertBefore(c,a);this.ele.removeAttr("name");this.ele.attr("name","_"+this.id+"_");if("\v"=="v"){$(a).on("propertychange",function(){var e=$(this).val();if(e==""){c.value="";}else{c.value=convert(e);}});}else{a.addEventListener("input",function(){var e=$(this).val();if(e==""){c.value="";}else{c.value=convert(e);}},false);}};function convert(b){if(b.indexOf("°")!=-1||b.indexOf("'")!=-1||b.indexOf('"')!=-1){var e=b.split("°");var c=e[0];var d=(e[1].split("'"))[0];var a=(e[1].split("'"))[1].split('"')[0];b=parseFloat(c)+parseFloat(d)/60+parseFloat(a)/3600;}else{b=parseFloat(b);}return b;}zfy.component.LatAndLog.prototype.verify=function(){var c=true;var a=null;var b=this.ele.val();if(this.required&&$.trim(b)==""){a="不能为空";c=false;}if(b!=""){if(!/^\d+(\.\d+)?$/.test(b)){a="请输入正确的经纬度";c=false;}if(this.dataType&&this.dataType=="x"){if(b>180||b<-180){a="请输入正确的经度";c=false;}}if(this.dataType&&this.dataType=="y"){if(b>90||b<-90){a="请输入正确的纬度";c=false;}}}this.showError(a);return c;};zfy.component.LatAndLog.prototype.showError=function(a){var b=this.dataType=="date"||this.dataType=="dateTime";if(a){this.ele.addClass(b?"date_input_invalid":"input_invalid");this.element.title=a;}else{this.ele.removeClass(b?"date_input_invalid":"input_invalid");this.element.title="";}};zfy.component.LatAndLog.prototype.addChangedListener=function(a){this.changedListeners.push(a);};zfy.component.LatAndLog.prototype.fireChanged=function(b){for(var a=0;a<this.changedListeners.length;a++){this.changedListeners[a]();}};zfy.component.Uploader=function(a){this.init(a);this.action=this.getProperty("action");this.look=this.getProperty("look-id","imagelook");this.urlId=this.getProperty("url-id","imageurl");this.folder=this.getProperty("folder");this.display=this.getProperty("display","");this.display=this.display?this.display:"";this.accept=this.getProperty("accept","image/*");this.objName=this.getProperty("objName","projProjectCard.image");this.changedListeners=new Array();this.paint();};zfy.component.Uploader.prototype=new zfy.component.BaseComponent();zfy.component.Uploader.prototype.paint=function(){var a=this;a.ele.addClass("form_input");if(!a.ele.attr("accept")){a.ele.attr("accept",a.accept);}a.ele.after('<input id="'+a.urlId+'" type="hidden" name="'+a.objName+'" value="'+this.display+'" />');if(this.display){}else{}this.ele.addClass("form_input");$(document).on("change","#"+this.id,function(){a.changeEvent();});};zfy.component.Uploader.prototype.changeEvent=function(){var a=this;$("#"+a.look).html("");$.ajaxFileUpload({url:a.action,fileElementId:a.id,secureuri:false,dataType:"json",success:function(c,b){if(c.success){$("#"+a.look).append("上传成功,<a href='#' style='font-size:14px' onclick='window.showModalDialog(\""+a.folder+"/"+c.data+"\")'>点击预览</a>");$("#"+a.urlId).val(c.data);$("#_link_"+a.id).hide();a.fireChanged();}else{$msg.showError(c.info);}},error:function(c,b,d){$msg.showError(d);}});};zfy.component.Uploader.prototype.addChangedListener=function(a){this.changedListeners.push(a);};zfy.component.Uploader.prototype.fireChanged=function(b){for(var a=0;a<this.changedListeners.length;a++){this.changedListeners[a]();}};var id="";zfy.component.MultipleSelect=function(a){this.init(a);this.parentId=this.getProperty("parent_id");this.value=this.getProperty("value");this.tp=this.getProperty("tp");this.label=this.getProperty("label","");this.required=this.getProperty("required",false);this.changedListeners=new Array();this.paint();};zfy.component.MultipleSelect.prototype=new zfy.component.BaseComponent();zfy.component.MultipleSelect.prototype.paint=function(c){var l=this;c=this.id;this.ele.addClass("form_input");var a=document.getElementById("village");if(a==""||a==null){a=document.createElement("DIV");a.id="village";a.style.position="absolute";a.style.display="none";document.body.appendChild(a);}var d=$("#"+this.parentId).val();if(d.length>8){d=d.substr(0,8);}var f=this.value;var b=$util.getAppName()+"/server/queryVillage.do?unitCode="+d+"&tp="+l.tp;var j='<iframe id="iframe_village" name="iframe_village" src="'+b+'"width="100%" height="100%" border="0" marginWidth="0" marginHeight="0" frameBorder="no" />';$("#village").html(j);$("#village").css("border","1px solid #999999");$("#village").css({width:"198px",height:"250px"});$("#village").css("margin-top","-1px");$("#village").hide();$("#"+this.id).css("display","none");$("#"+this.id).val(this.value);var h=document.getElementById(this.id);var g=document.getElementById("label");if(g==null||g==""){g=document.createElement("input");g.id="label";g.name="label";if(this.label==null||this.label==undefined){this.label="";}g.value=this.label;if(this.required){g.required=true;}if(this.disabled==true){g.disabled="disabled";}g.className="input";h.parentNode.insertBefore(g,h);}$("#label").css("background-image","url("+$util.getAppName()+"/resource/platform/theme/default/images/main/combo_select.gif)");$("#label").css("background-repeat","no-repeat");$("#label").css("background-position","right");if(this.length==null||this.length==""){this.length="200px";}$("#label").css("width",this.length);$("#label").css("border","1px solid #999");$("#label").css("height","23px");$("#label").css("line-height","21px");if("\v"=="v"){g.onpropertychange=k;}else{g.addEventListener("input",k,false);}function k(){if(g.value==""){$("#"+this.id).val("");}l.fireChanged();}var e=document.getElementById("iframe_village");if(e.attachEvent){e.attachEvent("onload",function(){checked(f);});}else{e.onload=function(){checked(f);};}jQuery.fn.selectArea=function(m){var n=this;var m=$(m);this.click(function(){var p=$(this).offset().top+$(this).outerHeight(true);var q=$(this).offset().left;var o="";o=$("#iframe_village").contents().find("#error").val();if(o!=null&&o!=""){$msg.showWarning(o);return;}m.show().css({position:"absolute",top:p+"px",left:q+"px"});});$(document).click(function(s){if(s.target.id!=n.selector.substring(1)){m.hide();var r="";var o="";var q="";q=$("#iframe_village").contents().find("input[name='unitCode']");for(var p=0;p<q.length;p++){if(q[p].checked){r=r+q[p].value+",";o=o+$("#iframe_village").contents().find("#"+q[p].value).html()+",";}}r=r.substring(0,r.length-1);o=o.substring(0,o.length-1);$("#"+c).val(r);$("#label").val(o);l.fireChanged();}});m.click(function(o){o.stopPropagation();});return this;};$("#label").selectArea("#village");};zfy.component.MultipleSelect.prototype.verify=function(){var c=true;var a=null;var b=this.ele.val();if(this.required&&$.trim(b)==""){a="不能为空";c=false;}if(b!=""){if(this.dataType=="integer-pos"&&!/^(\+)?\d+$/.test(b)){a="请输入一个大于0的整数";c=false;}else{if(this.dataType=="number-pos"&&!/^\d+(\.\d+)?$/.test(b)){a="请输入一个大于0的数字";c=false;}}}this.showError(a);return c;};zfy.component.MultipleSelect.prototype.showError=function(a){var b=this.dataType=="date"||this.dataType=="dateTime";if(a){this.ele.addClass(b?"date_input_invalid":"input_invalid");this.element.title=a;}else{this.ele.removeClass(b?"date_input_invalid":"input_invalid");this.element.title="";}};function checked(a){if(a!=null&&a!=undefined&&a!=""){var c="";c=$("#iframe_village").contents().find("input[name='unitCode']");for(var b=0;b<c.length;b++){if(a.indexOf(c[b].value)>=0){c[b].checked=true;}}}}zfy.component.MultipleSelect.prototype.addChangedListener=function(a){this.changedListeners.push(a);};zfy.component.MultipleSelect.prototype.fireChanged=function(b){for(var a=0;a<this.changedListeners.length;a++){this.changedListeners[a]();}};zfy.component.Select=function(a){this.init(a);this.required=this.getProperty("required",false);this.paint();this.changedListeners=new Array();};zfy.component.Select.prototype=new zfy.component.BaseComponent();zfy.component.Select.prototype.paint=function(){var a=this;this.ele.addClass("form_select");this.ele.change(function(){a.fireChanged();});this.ele.blur(function(){this.comobj.verify();});};zfy.component.Select.prototype.addChangedListener=function(a){this.changedListeners.push(a);};zfy.component.Select.prototype.fireChanged=function(b){for(var a=0;a<this.changedListeners.length;a++){this.changedListeners[a]();}};zfy.component.Select.prototype.verify=function(){var c=true;var a=null;var b=this.ele.val();if(this.required&&$.trim(b)==""){a="不能为空";c=false;}this.showError(a);return c;};zfy.component.Select.prototype.showError=function(a){if(a){this.ele.addClass("input_invalid");this.element.title=a;}else{this.ele.removeClass("input_invalid");this.element.title="";}};dhtmlx=function(c){for(var b in c){dhtmlx[b]=c[b];}return dhtmlx;};dhtmlx.extend_api=function(a,d,c){var b=window[a];if(!b){return;}window[a]=function(g){if(g&&typeof g=="object"&&!g.tagName){var f=b.apply(this,(d._init?d._init(g):arguments));for(var e in dhtmlx){if(d[e]){this[d[e]](dhtmlx[e]);}}for(var e in g){if(d[e]){this[d[e]](g[e]);}else{if(e.indexOf("on")==0){this.attachEvent(e,g[e]);}}}}else{var f=b.apply(this,arguments);}if(d._patch){d._patch(this);}return f||this;};window[a].prototype=b.prototype;if(c){dhtmlXHeir(window[a].prototype,c);}};dhtmlxAjax={get:function(a,c){var b=new dtmlXMLLoaderObject(true);b.async=(arguments.length<3);b.waitCall=c;b.loadXML(a);return b;},post:function(a,c,d){var b=new dtmlXMLLoaderObject(true);b.async=(arguments.length<4);b.waitCall=d;b.loadXML(a,true,c);return b;},getSync:function(a){return this.get(a,null,true);},postSync:function(a,b){return this.post(a,b,null,true);}};function dtmlXMLLoaderObject(b,d,c,a){this.xmlDoc="";if(typeof(c)!="undefined"){this.async=c;}else{this.async=true;}this.onloadAction=b||null;this.mainObject=d||null;this.waitCall=null;this.rSeed=a||false;return this;}dtmlXMLLoaderObject.count=0;dtmlXMLLoaderObject.prototype.waitLoadFunction=function(b){var a=true;this.check=function(){if((b)&&(b.onloadAction!=null)){if((!b.xmlDoc.readyState)||(b.xmlDoc.readyState==4)){if(!a){return;}a=false;dtmlXMLLoaderObject.count++;if(typeof b.onloadAction=="function"){b.onloadAction(b.mainObject,null,null,null,b);}if(b.waitCall){b.waitCall.call(this,b);b.waitCall=null;}}}};return this.check;};dtmlXMLLoaderObject.prototype.getXMLTopNode=function(c,a){if(this.xmlDoc.responseXML){var b=this.xmlDoc.responseXML.getElementsByTagName(c);if(b.length==0&&c.indexOf(":")!=-1){var b=this.xmlDoc.responseXML.getElementsByTagName((c.split(":"))[1]);}var d=b[0];}else{var d=this.xmlDoc.documentElement;}if(d){this._retry=false;return d;}if(!this._retry&&_isIE){this._retry=true;var a=this.xmlDoc;this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),true);return this.getXMLTopNode(c,a);}dhtmlxError.throwError("LoadXML","Incorrect XML",[(a||this.xmlDoc),this.mainObject]);return document.createElement("DIV");};dtmlXMLLoaderObject.prototype.loadXMLString=function(b,a){if(!_isIE){var c=new DOMParser();this.xmlDoc=c.parseFromString(b,"text/xml");}else{this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM");this.xmlDoc.async=this.async;this.xmlDoc.onreadystatechange=function(){};this.xmlDoc.loadXML(b);}if(a){return;}if(this.onloadAction){this.onloadAction(this.mainObject,null,null,null,this);}if(this.waitCall){this.waitCall();this.waitCall=null;}};dtmlXMLLoaderObject.prototype.loadXML=function(c,b,a,d){if(this.rSeed){c+=((c.indexOf("?")!=-1)?"&":"?")+"a_dhx_rSeed="+(new Date()).valueOf();}this.filePath=c;if((!_isIE)&&(window.XMLHttpRequest)){this.xmlDoc=new XMLHttpRequest();}else{this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP");}if(this.async){this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this);}this.xmlDoc.open(b?"POST":"GET",c,this.async);if(d){this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")");this.xmlDoc.setRequestHeader("Content-type","text/xml");}else{if(b){this.xmlDoc.setRequestHeader("Content-type",(this.contenttype||"application/x-www-form-urlencoded"));}}this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(null||a);if(!this.async){(new this.waitLoadFunction(this))();}};dtmlXMLLoaderObject.prototype.destructor=function(){this._filterXPath=null;this._getAllNamedChilds=null;this._retry=null;this.async=null;this.rSeed=null;this.filePath=null;this.onloadAction=null;this.mainObject=null;this.xmlDoc=null;this.doXPath=null;this.doXPathOpera=null;this.doXSLTransToObject=null;this.doXSLTransToString=null;this.loadXML=null;this.loadXMLString=null;this.doSerialization=null;this.xmlNodeToJSON=null;this.getXMLTopNode=null;this.setXSLParamValue=null;return null;};dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(d){var c={};for(var b=0;b<d.attributes.length;b++){c[d.attributes[b].name]=d.attributes[b].value;}c._tagvalue=d.firstChild?d.firstChild.nodeValue:"";for(var b=0;b<d.childNodes.length;b++){var a=d.childNodes[b].tagName;if(a){if(!c[a]){c[a]=[];}c[a].push(this.xmlNodeToJSON(d.childNodes[b]));}}return c;};function callerFunction(a,b){this.handler=function(c){if(!c){c=window.event;}a(c,b);return true;};return this.handler;}function getAbsoluteLeft(a){return getOffset(a).left;}function getAbsoluteTop(a){return getOffset(a).top;}function getOffsetSum(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent;}return{top:c,left:b};}function getOffsetRect(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var j=b.clientLeft||h.clientLeft||0;var k=g.top+a-f;var c=g.left+e-j;return{top:Math.round(k),left:Math.round(c)};}function getOffset(a){if(a.getBoundingClientRect){return getOffsetRect(a);}else{return getOffsetSum(a);}}function convertStringToBoolean(a){if(typeof(a)=="string"){a=a.toLowerCase();}switch(a){case"1":case"true":case"yes":case"y":case 1:case true:return true;break;default:return false;}}function getUrlSymbol(a){if(a.indexOf("?")!=-1){return"&";}else{return"?";}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop;}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this;}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null;};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b);};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b;};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return;}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false;}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a);}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false;}return false;};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event;}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return;}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag();}dragger.dragNode.onselectstart=function(){return false;};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute();}else{return dragger.stopDrag(c,true);}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old;}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding);}if(_isIE){var f=document.createElement("Div");f.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=f.childNodes[0];}else{dragger.dragNode=dragger.dragNode.cloneNode(true);}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode;}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var d=c.target;}else{d=c.srcElement;}dragger.checkLanding(d,c);};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var d=0;var b=0;while(c){d+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent;}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);d+=a.split("_")[0]*1;b+=a.split("_")[1]*1;}if(e){return d+"_"+b;}else{this.fx=d;}this.fy=b;}return"0_0";};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding);}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target);}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a);}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a);}this.lastLanding=0;if(this._onNotFound){this._onNotFound();}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target));}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode);}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0;};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1);}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window);}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window);}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,d){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(d))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition();}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window);}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||d)?1:0));}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true;}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true;}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9;}else{_isKHTML=true;}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3));}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1)&&document.compatMode!="BackCompat"){_isIE=8;}}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1]);}}}dtmlXMLLoaderObject.prototype.doXPath=function(c,e,d,j){if(_isKHTML||(!_isIE&&!window.XPathResult)){return this.doXPathOpera(c,e);}if(_isIE){if(!e){if(!this.xmlDoc.nodeName){e=this.xmlDoc.responseXML;}else{e=this.xmlDoc;}}if(!e){dhtmlxError.throwError("LoadXML","Incorrect XML",[(e||this.xmlDoc),this.mainObject]);}if(d!=null){e.setProperty("SelectionNamespaces","xmlns:xsl='"+d+"'");}if(j=="single"){return e.selectSingleNode(c);}else{return e.selectNodes(c)||new Array(0);}}else{var a=e;if(!e){if(!this.xmlDoc.nodeName){e=this.xmlDoc.responseXML;}else{e=this.xmlDoc;}}if(!e){dhtmlxError.throwError("LoadXML","Incorrect XML",[(e||this.xmlDoc),this.mainObject]);}if(e.nodeName.indexOf("document")!=-1){a=e;}else{a=e;e=e.ownerDocument;}var g=XPathResult.ANY_TYPE;if(j=="single"){g=XPathResult.FIRST_ORDERED_NODE_TYPE;}var f=new Array();var b=e.evaluate(c,a,function(k){return d;},g,null);if(g==XPathResult.FIRST_ORDERED_NODE_TYPE){return b.singleNodeValue;}var h=b.iterateNext();while(h){f[f.length]=h;h=b.iterateNext();}return f;}};function _dhtmlxError(b,a,c){if(!this.catches){this.catches=new Array();}return this;}_dhtmlxError.prototype.catchError=function(b,a){this.catches[b]=a;};_dhtmlxError.prototype.throwError=function(b,a,c){if(this.catches[b]){return this.catches[b](b,a,c);}if(this.catches.ALL){return this.catches.ALL(b,a,c);}alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]);return null;};window.dhtmlxError=new _dhtmlxError();dtmlXMLLoaderObject.prototype.doXPathOpera=function(c,a){var e=c.replace(/[\/]+/gi,"/").split("/");var d=null;var b=1;if(!e.length){return[];}if(e[0]=="."){d=[a];}else{if(e[0]==""){d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(e[b].replace(/\[[^\]]*\]/g,""));b++;}else{return[];}}for(b;b<e.length;b++){d=this._getAllNamedChilds(d,e[b]);}if(e[b-1].indexOf("[")!=-1){d=this._filterXPath(d,e[b-1]);}return d;};dtmlXMLLoaderObject.prototype._filterXPath=function(e,d){var g=new Array();var d=d.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,"");for(var f=0;f<e.length;f++){if(e[f].getAttribute(d)){g[g.length]=e[f];}}return g;};dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(e,d){var h=new Array();if(_isKHTML){d=d.toUpperCase();}for(var g=0;g<e.length;g++){for(var f=0;f<e[g].childNodes.length;f++){if(_isKHTML){if(e[g].childNodes[f].tagName&&e[g].childNodes[f].tagName.toUpperCase()==d){h[h.length]=e[g].childNodes[f];}}else{if(e[g].childNodes[f].tagName==d){h[h.length]=e[g].childNodes[f];}}}}return h;};function dhtmlXHeir(e,d){for(var f in d){if(typeof(d[f])=="function"){e[f]=d[f];}}return e;}function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false);}else{if(b.attachEvent){b.attachEvent("on"+c,a);}}}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(b,c,d){if(!d){d=this.xslDoc;}if(d.responseXML){d=d.responseXML;}var a=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+b+"']",d,"http://www.w3.org/1999/XSL/Transform","single");if(a!=null){a.firstChild.nodeValue=c;}};dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(d,b){if(!d){d=this.xslDoc;}if(d.responseXML){d=d.responseXML;}if(!b){b=this.xmlDoc;}if(b.responseXML){b=b.responseXML;}if(!_isIE){if(!this.XSLProcessor){this.XSLProcessor=new XSLTProcessor();this.XSLProcessor.importStylesheet(d);}var a=this.XSLProcessor.transformToDocument(b);}else{var a=new ActiveXObject("Msxml2.DOMDocument.3.0");try{b.transformNodeToObject(d,a);}catch(c){a=b.transformNode(d);}}return a;};dtmlXMLLoaderObject.prototype.doXSLTransToString=function(c,b){var a=this.doXSLTransToObject(c,b);if(typeof(a)=="string"){return a;}return this.doSerialization(a);};dtmlXMLLoaderObject.prototype.doSerialization=function(b){if(!b){b=this.xmlDoc;}if(b.responseXML){b=b.responseXML;}if(!_isIE){var a=new XMLSerializer();return a.serializeToString(b);}else{return b.xml;}};dhtmlxEventable=function(obj){obj.attachEvent=function(name,catcher,callObj){name="ev_"+name.toLowerCase();if(!this[name]){this[name]=new this.eventCatcher(callObj||this);}return(name+":"+this[name].addEvent(catcher));};obj.callEvent=function(name,arg0){name="ev_"+name.toLowerCase();if(this[name]){return this[name].apply(this,arg0);}return true;};obj.checkEvent=function(name){return(!!this["ev_"+name.toLowerCase()]);};obj.eventCatcher=function(obj){var dhx_catch=[];var z=function(){var res=true;for(var i=0;i<dhx_catch.length;i++){if(dhx_catch[i]!=null){var zr=dhx_catch[i].apply(obj,arguments);res=res&&zr;}}return res;};z.addEvent=function(ev){if(typeof(ev)!="function"){ev=eval(ev);}if(ev){return dhx_catch.push(ev)-1;}return false;};z.removeEvent=function(id){dhx_catch[id]=null;};return z;};obj.detachEvent=function(id){if(id!=false){var list=id.split(":");this[list[0]].removeEvent(list[1]);}};obj.detachAllEvents=function(){for(var name in this){if(name.indexOf("ev_")==0){this.detachEvent(name);this[name]=null;}}};obj=null;};function dhtmlXContainer(obj){var that=this;this.obj=obj;obj=null;this.obj._padding=true;this.dhxcont=null;this.st=document.createElement("DIV");this.st.style.position="absolute";this.st.style.left="-200px";this.st.style.top="0px";this.st.style.width="100px";this.st.style.height="1px";this.st.style.visibility="hidden";this.st.style.overflow="hidden";document.body.insertBefore(this.st,document.body.childNodes[0]);this.obj._getSt=function(){return that.st;};this.obj.dv="def";this.obj.av=this.obj.dv;this.obj.cv=this.obj.av;this.obj.vs={};this.obj.vs[this.obj.av]={};this.obj.view=function(name){if(!this.vs[name]){this.vs[name]={};this.vs[name].dhxcont=this.vs[this.dv].dhxcont;var mainCont=document.createElement("DIV");mainCont.style.position="relative";mainCont.style.left="0px";mainCont.style.width="200px";mainCont.style.height="200px";mainCont.style.overflow="hidden";mainCont.style.visibility="";that.st.appendChild(mainCont);this.vs[name].dhxcont.mainCont[name]=mainCont;mainCont=null;}this.avt=this.av;this.av=name;return this;};this.obj.setActive=function(){if(!this.vs[this.av]){return;}this.cv=this.av;if(this.vs[this.avt].dhxcont==this.vs[this.avt].dhxcont.mainCont[this.avt].parentNode){that.st.appendChild(this.vs[this.avt].dhxcont.mainCont[this.avt]);if(this.vs[this.avt].menu){that.st.appendChild(document.getElementById(this.vs[this.avt].menuId));}if(this.vs[this.avt].toolbar){that.st.appendChild(document.getElementById(this.vs[this.avt].toolbarId));}if(this.vs[this.avt].sb){that.st.appendChild(document.getElementById(this.vs[this.avt].sbId));}}if(this._isCell){}if(this.vs[this.av].dhxcont!=this.vs[this.av].dhxcont.mainCont[this.av].parentNode){this.vs[this.av].dhxcont.insertBefore(this.vs[this.av].dhxcont.mainCont[this.av],this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]);if(this.vs[this.av].menu){this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].menuId),this.vs[this.av].dhxcont.childNodes[0]);}if(this.vs[this.av].toolbar){this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].toolbarId),this.vs[this.av].dhxcont.childNodes[(this.vs[this.av].menu?1:0)]);}if(this.vs[this.av].sb){this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].sbId),this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]);}}if(this._doOnResize){this._doOnResize();}if(this._isWindow){this.updateNestedObjects();}this.avt=null;};this.obj._viewRestore=function(){var t=this.av;if(this.avt){this.av=this.avt;this.avt=null;}return t;};this.setContent=function(data){this.obj.vs[this.obj.av].dhxcont=data;this.obj._init();data=null;};this.obj._init=function(){this.vs[this.av].dhxcont.innerHTML="<div ida='dhxMainCont' style='position: relative; left: 0px; top: 0px; overflow: hidden;'></div><div class='dhxcont_content_blocker' style='display: none;'></div>";this.vs[this.av].dhxcont.mainCont={};this.vs[this.av].dhxcont.mainCont[this.av]=this.vs[this.av].dhxcont.childNodes[0];};this.obj._genStr=function(w){var s="";var z="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var q=0;q<w;q++){s+=z.charAt(Math.round(Math.random()*(z.length-1)));}return s;};this.obj.setMinContentSize=function(w,h){this.vs[this.av]._minDataSizeW=w;this.vs[this.av]._minDataSizeH=h;};this.obj._setPadding=function(p,altCss){if(typeof(p)=="object"){this._offsetTop=p[0];this._offsetLeft=p[1];this._offsetWidth=p[2];this._offsetHeight=p[3];p=null;}else{this._offsetTop=p;this._offsetLeft=p;this._offsetWidth=-p*2;this._offsetHeight=-p*2;}this.vs[this.av].dhxcont.className="dhxcont_global_content_area "+(altCss||"");};this.obj.moveContentTo=function(cont){for(var a in this.vs){cont.view(a).setActive();var pref=null;if(this.vs[a].grid){pref="grid";}if(this.vs[a].tree){pref="tree";}if(this.vs[a].tabbar){pref="tabbar";}if(this.vs[a].folders){pref="folders";}if(this.vs[a].layout){pref="layout";}if(pref!=null){cont.view(a).attachObject(this.vs[a][pref+"Id"],false,true,false);cont.vs[a][pref]=this.vs[a][pref];cont.vs[a][pref+"Id"]=this.vs[a][pref+"Id"];cont.vs[a][pref+"Obj"]=this.vs[a][pref+"Obj"];this.vs[a][pref]=null;this.vs[a][pref+"Id"]=null;this.vs[a][pref+"Obj"]=null;}if(this.vs[a]._frame){cont.vs[a]._frame=this.vs[a]._frame;this.vs[a]._frame=null;}if(this.vs[a].menu!=null){if(cont.cv==cont.av){cont.vs[cont.av].dhxcont.insertBefore(document.getElementById(this.vs[a].menuId),cont.vs[cont.av].dhxcont.childNodes[0]);}else{var st=cont._getSt();st.appendChild(document.getElementById(this.vs[a].menuId));st=null;}cont.vs[a].menu=this.vs[a].menu;cont.vs[a].menuId=this.vs[a].menuId;cont.vs[a].menuHeight=this.vs[a].menuHeight;this.vs[a].menu=null;this.vs[a].menuId=null;this.vs[a].menuHeight=null;if(this.cv==this.av&&this._doOnAttachMenu){this._doOnAttachMenu("unload");}if(cont.cv==cont.av&&cont._doOnAttachMenu){cont._doOnAttachMenu("move");}}if(this.vs[a].toolbar!=null){if(cont.cv==cont.av){cont.vs[cont.av].dhxcont.insertBefore(document.getElementById(this.vs[a].toolbarId),cont.vs[cont.av].dhxcont.childNodes[(cont.vs[cont.av].menu!=null?1:0)]);}else{var st=cont._getSt();st.appendChild(document.getElementById(this.vs[a].toolbarId));st=null;}cont.vs[a].toolbar=this.vs[a].toolbar;cont.vs[a].toolbarId=this.vs[a].toolbarId;cont.vs[a].toolbarHeight=this.vs[a].toolbarHeight;this.vs[a].toolbar=null;this.vs[a].toolbarId=null;this.vs[a].toolbarHeight=null;if(this.cv==this.av&&this._doOnAttachToolbar){this._doOnAttachToolbar("unload");}if(cont.cv==cont.av&&cont._doOnAttachToolbar){cont._doOnAttachToolbar("move");}}if(this.vs[a].sb!=null){if(cont.cv==cont.av){cont.vs[cont.av].dhxcont.insertBefore(document.getElementById(this.vs[a].sbId),cont.vs[cont.av].dhxcont.childNodes[cont.vs[cont.av].dhxcont.childNodes.length-1]);}else{var st=cont._getSt();st.appendChild(document.getElementById(this.vs[a].sbId));return st;}cont.vs[a].sb=this.vs[a].sb;cont.vs[a].sbId=this.vs[a].sbId;cont.vs[a].sbHeight=this.vs[a].sbHeight;this.vs[a].sb=null;this.vs[a].sbId=null;this.vs[a].sbHeight=null;if(this.cv==this.av&&this._doOnAttachStatusBar){this._doOnAttachStatusBar("unload");}if(cont.cv==cont.av&&cont._doOnAttachStatusBar){cont._doOnAttachStatusBar("move");}}var objA=this.vs[a].dhxcont.mainCont[a];var objB=cont.vs[a].dhxcont.mainCont[a];while(objA.childNodes.length>0){objB.appendChild(objA.childNodes[0]);}}cont.view(this.av).setActive();cont=null;};this.obj.adjustContent=function(parentObj,offsetTop,marginTop,notCalcWidth,offsetBottom){var dhxcont=this.vs[this.av].dhxcont;var mainCont=dhxcont.mainCont[this.av];dhxcont.style.left=(this._offsetLeft||0)+"px";dhxcont.style.top=(this._offsetTop||0)+offsetTop+"px";var cw=parentObj.clientWidth+(this._offsetWidth||0);if(notCalcWidth!==true){dhxcont.style.width=Math.max(0,cw)+"px";}if(notCalcWidth!==true){if(dhxcont.offsetWidth>cw){dhxcont.style.width=Math.max(0,cw*2-dhxcont.offsetWidth)+"px";}}var ch=parentObj.clientHeight+(this._offsetHeight||0);dhxcont.style.height=Math.max(0,ch-offsetTop)+(marginTop!=null?marginTop:0)+"px";if(dhxcont.offsetHeight>ch-offsetTop){dhxcont.style.height=Math.max(0,(ch-offsetTop)*2-dhxcont.offsetHeight)+"px";}if(offsetBottom){if(!isNaN(offsetBottom)){dhxcont.style.height=Math.max(0,parseInt(dhxcont.style.height)-offsetBottom)+"px";}}if(this.vs[this.av]._minDataSizeH!=null){if(parseInt(dhxcont.style.height)<this.vs[this.av]._minDataSizeH){dhxcont.style.height=this.vs[this.av]._minDataSizeH+"px";}}if(this.vs[this.av]._minDataSizeW!=null){if(parseInt(dhxcont.style.width)<this.vs[this.av]._minDataSizeW){dhxcont.style.width=this.vs[this.av]._minDataSizeW+"px";}}if(notCalcWidth!==true){mainCont.style.width=dhxcont.clientWidth+"px";if(mainCont.offsetWidth>dhxcont.clientWidth){mainCont.style.width=Math.max(0,dhxcont.clientWidth*2-mainCont.offsetWidth)+"px";}}var menuOffset=(this.vs[this.av].menu!=null?(!this.vs[this.av].menuHidden?this.vs[this.av].menuHeight:0):0);var toolbarOffset=(this.vs[this.av].toolbar!=null?(!this.vs[this.av].toolbarHidden?this.vs[this.av].toolbarHeight:0):0);var statusOffset=(this.vs[this.av].sb!=null?(!this.vs[this.av].sbHidden?this.vs[this.av].sbHeight:0):0);mainCont.style.height=dhxcont.clientHeight+"px";if(mainCont.offsetHeight>dhxcont.clientHeight){mainCont.style.height=Math.max(0,dhxcont.clientHeight*2-mainCont.offsetHeight)+"px";}mainCont.style.height=Math.max(0,parseInt(mainCont.style.height)-menuOffset-toolbarOffset-statusOffset)+"px";mainCont=null;dhxcont=null;parentObj=null;};this.obj.coverBlocker=function(){return this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1];};this.obj.showCoverBlocker=function(){var t=this.coverBlocker();t.style.display="";t=null;};this.obj.hideCoverBlocker=function(){var t=this.coverBlocker();t.style.display="none";t=null;};this.obj.updateNestedObjects=function(fromInit){if(this.skin=="dhx_terrace"){var mtAttached=(this.vs[this.av].menu!=null||this.vs[this.av].toolbar!=null);if(this.vs[this.av].grid){var gTop=(mtAttached||this._isWindow?14:0);var gBottom=(this._isWindow?14:0);var gLeft=(this._isWindow?14:0);if(fromInit){if(!this._isWindow){this.vs[this.av].grid.entBox.style.border="0px solid white";this.vs[this.av].grid.skin_h_correction=-2;}this.vs[this.av].grid.dontSetSizes=true;this.vs[this.av].gridObj.style.position="absolute";}this.vs[this.av].gridObj.style.top=gTop+"px";this.vs[this.av].gridObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-gTop-gBottom+"px";this.vs[this.av].gridObj.style.left=gLeft+"px";this.vs[this.av].gridObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-(gLeft*2)+"px";this.vs[this.av].grid.setSizes();}if(this.vs[this.av].tree){var gTop=(mtAttached||this._isWindow?14:0);var gBottom=(this._isWindow?14:0);var gLeft=(this._isWindow?14:0);if(fromInit){this.vs[this.av].treeObj.style.position="absolute";}this.vs[this.av].treeObj.style.top=gTop+"px";this.vs[this.av].treeObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-gTop-gBottom+"px";this.vs[this.av].treeObj.style.left=gLeft+"px";this.vs[this.av].treeObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-(gLeft*2)+"px";}if(this.vs[this.av].form){var gTop=(mtAttached||this._isWindow?14:0);var gBottom=(this._isWindow?14:0);var gLeft=(this._isWindow?14:0);if(fromInit){this.vs[this.av].formObj.style.position="absolute";}this.vs[this.av].formObj.style.top=gTop+"px";this.vs[this.av].formObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-gTop-gBottom+"px";this.vs[this.av].formObj.style.left=gLeft+"px";this.vs[this.av].formObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-(gLeft*2)+"px";this.vs[this.av].form.setSizes();}if(this.vs[this.av].layout){if(fromInit){if(!this._isWindow&&!this._isCell){this.vs[this.av].layout._hideBorders();}}var gTop=(this._isCell&&this._noHeader&&!mtAttached?0:14);var gBottom=(this._isCell&&this._noHeader?0:14);var gLeft=(this._isCell&&this._noHeader?0:14);this.vs[this.av].layoutObj.style.top=gTop+"px";this.vs[this.av].layoutObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-gTop-gBottom+"px";this.vs[this.av].layoutObj.style.left=gLeft+"px";this.vs[this.av].layoutObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-(gLeft*2)+"px";this.vs[this.av].layout.setSizes();}if(this.vs[this.av].accordion){if(fromInit){this.vs[this.av].accordion._hideBorders=true;}var gTop=(this._isCell&&this._noHeader&&!mtAttached?0:14);var gBottom=(this._isCell&&this._noHeader?0:14);var gLeft=(this._isCell&&this._noHeader?0:14);this.vs[this.av].accordionObj.style.top=gTop+"px";this.vs[this.av].accordionObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-gTop-gBottom+"px";this.vs[this.av].accordionObj.style.left=gLeft+"px";this.vs[this.av].accordionObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-(gLeft*2)+"px";this.vs[this.av].accordion.setSizes();}if(this.vs[this.av].tabbar!=null){var gTop=(!mtAttached&&this._isCell&&this._noHeader?0:14);var gBottom=(this._isCell&&this._noHeader?gTop:28);var gLeft=(this._isCell&&this._noHeader?0:14);this.vs[this.av].tabbarObj.style.top=gTop+"px";this.vs[this.av].tabbarObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-gBottom+"px";this.vs[this.av].tabbarObj.style.left=gLeft+"px";this.vs[this.av].tabbarObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-(gLeft*2)+"px";this.vs[this.av].tabbar.adjustOuterSize();}if(this.vs[this.av].editor){if(fromInit){if(this.vs[this.av].editor.tb!=null&&this.vs[this.av].editor.tb instanceof dhtmlXToolbarObject){}}var gTop=14;var gLeft=14;this.vs[this.av].editorObj.style.top=gTop+"px";this.vs[this.av].editorObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-(gTop*2)+"px";this.vs[this.av].editorObj.style.left=gLeft+"px";this.vs[this.av].editorObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-(gLeft*2)+"px";if(!_isIE){this.vs[this.av].editor._prepareContent(true);}this.vs[this.av].editor.setSizes();}if(this.vs[this.av].sched){this.vs[this.av].sched.setSizes();}if(this.vs[this.av].dockedCell){this.vs[this.av].dockedCell.updateNestedObjects();}return;}if(this.vs[this.av].grid){this.vs[this.av].grid.setSizes();}if(this.vs[this.av].sched){this.vs[this.av].sched.setSizes();}if(this.vs[this.av].tabbar){this.vs[this.av].tabbar.adjustOuterSize();}if(this.vs[this.av].folders){this.vs[this.av].folders.setSizes();}if(this.vs[this.av].editor){if(!_isIE){this.vs[this.av].editor._prepareContent(true);}this.vs[this.av].editor.setSizes();}if(this.vs[this.av].layout){if((this._isAcc||this._isTabbarCell)&&this.skin=="dhx_skyblue"){this.vs[this.av].layoutObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px";this.vs[this.av].layoutObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px";}else{this.vs[this.av].layoutObj.style.width=this.vs[this.av].dhxcont.mainCont[this.av].style.width;this.vs[this.av].layoutObj.style.height=this.vs[this.av].dhxcont.mainCont[this.av].style.height;}this.vs[this.av].layout.setSizes();}if(this.vs[this.av].accordion!=null){if(this.skin=="dhx_web"){this.vs[this.av].accordionObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px";this.vs[this.av].accordionObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px";}else{this.vs[this.av].accordionObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px";this.vs[this.av].accordionObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px";}this.vs[this.av].accordion.setSizes();}if(this.vs[this.av].dockedCell){this.vs[this.av].dockedCell.updateNestedObjects();}if(this.vs[this.av].form){this.vs[this.av].form.setSizes();}if(this.vs[this.av].carousel){this.vs[this.av].carousel.setSizes();}};this.obj.attachStatusBar=function(){if(this.vs[this.av].sb){return;}var sbObj=document.createElement("DIV");if(this._isCell){sbObj.className="dhxcont_sb_container_layoutcell";}else{sbObj.className="dhxcont_sb_container";}sbObj.id="sbobj_"+this._genStr(12);sbObj.innerHTML="<div class='dhxcont_statusbar'></div>";if(this.cv==this.av){this.vs[this.av].dhxcont.insertBefore(sbObj,this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]);}else{that.st.appendChild(sbObj);}sbObj.setText=function(text){this.childNodes[0].innerHTML=text;};sbObj.getText=function(){return this.childNodes[0].innerHTML;};sbObj.onselectstart=function(e){e=e||event;e.returnValue=false;return false;};this.vs[this.av].sb=sbObj;this.vs[this.av].sbHeight=(this.skin=="dhx_web"?41:(this.skin=="dhx_skyblue"?23:sbObj.offsetHeight));this.vs[this.av].sbId=sbObj.id;if(this._doOnAttachStatusBar){this._doOnAttachStatusBar("init");}this.adjust();return this.vs[this._viewRestore()].sb;};this.obj.detachStatusBar=function(destruct){if(!this.vs[this.av].sb){return;}this.vs[this.av].sb.setText=null;this.vs[this.av].sb.getText=null;this.vs[this.av].sb.onselectstart=null;this.vs[this.av].sb.parentNode.removeChild(this.vs[this.av].sb);this.vs[this.av].sb=null;this.vs[this.av].sbHeight=null;this.vs[this.av].sbId=null;this._viewRestore();if(this._doOnAttachStatusBar&&!destruct){this._doOnAttachStatusBar("unload");}};this.obj.getFrame=function(){return this.getView()._frame;};this.obj.getView=function(name){return this.vs[name||this.av];};this.obj.attachMenu=function(skin){if(this.vs[this.av].menu){return;}var menuObj=document.createElement("DIV");menuObj.style.position="relative";menuObj.style.overflow="hidden";menuObj.id="dhxmenu_"+this._genStr(12);if(this.cv==this.av){this.vs[this.av].dhxcont.insertBefore(menuObj,this.vs[this.av].dhxcont.childNodes[0]);}else{that.st.appendChild(menuObj);}if(typeof(skin)!="object"){this.vs[this.av].menu=new dhtmlXMenuObject(menuObj.id,(skin||this.skin));}else{skin.parent=menuObj.id;this.vs[this.av].menu=new dhtmlXMenuObject(skin);}this.vs[this.av].menuHeight=(this.skin=="dhx_web"?29:menuObj.offsetHeight);this.vs[this.av].menuId=menuObj.id;if(this._doOnAttachMenu){this._doOnAttachMenu("init");}this.adjust();return this.vs[this._viewRestore()].menu;};this.obj.detachMenu=function(destruct){if(!this.vs[this.av].menu){return;}var menuObj=document.getElementById(this.vs[this.av].menuId);this.vs[this.av].menu.unload();this.vs[this.av].menu=null;this.vs[this.av].menuId=null;this.vs[this.av].menuHeight=null;if(menuObj){menuObj.parentNode.removeChild(menuObj);}menuObj=null;this._viewRestore();if(this._doOnAttachMenu&&!destruct){this._doOnAttachMenu("unload");}};this.obj.attachToolbar=function(skin){if(this.vs[this.av].toolbar){return;}var toolbarObj=document.createElement("DIV");toolbarObj.style.position="relative";toolbarObj.style.overflow="hidden";toolbarObj.id="dhxtoolbar_"+this._genStr(12);if(this.cv==this.av){this.vs[this.av].dhxcont.insertBefore(toolbarObj,this.vs[this.av].dhxcont.childNodes[(this.vs[this.av].menu!=null?1:0)]);}else{that.st.appendChild(toolbarObj);}if(typeof(skin)!="object"){this.vs[this.av].toolbar=new dhtmlXToolbarObject(toolbarObj.id,(skin||this.skin));}else{skin.parent=toolbarObj.id;this.vs[this.av].toolbar=new dhtmlXToolbarObject(skin);}this.vs[this.av].toolbarHeight=toolbarObj.offsetHeight;this.vs[this.av].toolbarId=toolbarObj.id;if(this._doOnAttachToolbar){this._doOnAttachToolbar("init");}this.adjust();var t=this;this.vs[this.av].toolbar.attachEvent("_onIconSizeChange",function(size){t.vs[t.av].toolbarHeight=this.cont.offsetHeight;t.vs[t.av].toolbarId=this.cont.id;t.adjust();if(t._doOnAttachToolbar){t._doOnAttachToolbar("iconSizeChange");}});if(this.skin!="dhx_terrace"){this.vs[this.av].toolbar.callEvent("_onIconSizeChange",[]);}return this.vs[this._viewRestore()].toolbar;};this.obj.detachToolbar=function(destruct){if(!this.vs[this.av].toolbar){return;}var toolbarObj=document.getElementById(this.vs[this.av].toolbarId);this.vs[this.av].toolbar.unload();this.vs[this.av].toolbar=null;this.vs[this.av].toolbarId=null;this.vs[this.av].toolbarHeight=null;if(toolbarObj){toolbarObj.parentNode.removeChild(toolbarObj);}toolbarObj=null;this._viewRestore();if(this._doOnAttachToolbar&&!destruct){this._doOnAttachToolbar("unload");}};this.obj.attachGrid=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this._redraw();}var obj=document.createElement("DIV");obj.id="dhxGridObj_"+this._genStr(12);obj.style.width="100%";obj.style.height="100%";obj.cmp="grid";document.body.appendChild(obj);this.attachObject(obj.id,false,true,false);this.vs[this.av].grid=new dhtmlXGridObject(obj.id);this.vs[this.av].grid.setSkin(this.skin);if(this.skin=="dhx_skyblue"||this.skin=="dhx_black"||this.skin=="dhx_blue"){this.vs[this.av].grid.entBox.style.border="0px solid white";this.vs[this.av].grid._sizeFix=2;}this.vs[this.av].gridId=obj.id;this.vs[this.av].gridObj=obj;if(this.skin=="dhx_terrace"){this.adjust();this.updateNestedObjects(true);}return this.vs[this._viewRestore()].grid;};this.obj.attachScheduler=function(day,mode,cont_id,scheduler){scheduler=scheduler||window.scheduler;var ready=0;if(cont_id){obj=document.getElementById(cont_id);if(obj){ready=1;}}if(!ready){var tabs=cont_id||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var obj=document.createElement("DIV");obj.id="dhxSchedObj_"+this._genStr(12);obj.innerHTML='<div id="'+obj.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+tabs+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>';document.body.appendChild(obj.firstChild);}this.attachObject(obj.id,false,true,false);this.vs[this.av].sched=scheduler;this.vs[this.av].schedId=obj.id;scheduler.setSizes=scheduler.update_view;scheduler.destructor=function(){};scheduler.init(obj.id,day,mode);return this.vs[this._viewRestore()].sched;};this.obj.attachTree=function(rootId){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this._redraw();}var obj=document.createElement("DIV");obj.id="dhxTreeObj_"+this._genStr(12);obj.style.width="100%";obj.style.height="100%";obj.cmp="tree";document.body.appendChild(obj);this.attachObject(obj.id,false,true,false);this.vs[this.av].tree=new dhtmlXTreeObject(obj.id,"100%","100%",(rootId||0));this.vs[this.av].tree.setSkin(this.skin);this.vs[this.av].tree.allTree.childNodes[0].style.marginTop="2px";this.vs[this.av].tree.allTree.childNodes[0].style.marginBottom="2px";this.vs[this.av].treeId=obj.id;this.vs[this.av].treeObj=obj;if(this.skin=="dhx_terrace"){this.adjust();this.updateNestedObjects(true);}return this.vs[this._viewRestore()].tree;};this.obj.attachTabbar=function(mode){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.style.border="none";this.setDimension(this.w,this.h);}var obj=document.createElement("DIV");obj.id="dhxTabbarObj_"+this._genStr(12);obj.style.width="100%";obj.style.height="100%";obj.style.overflow="hidden";obj.cmp="tabbar";if(!this._isWindow){obj._hideBorders=true;}document.body.appendChild(obj);this.attachObject(obj.id,false,true,false);if(this._isCell){this.hideHeader();obj._hideBorders=false;this._padding=false;}this.vs[this.av].tabbar=new dhtmlXTabBar(obj.id,mode||"top",(this.skin=="dhx_terrace"?null:20));if(!this._isWindow&&this.skin!="dhx_terrace"){this.vs[this.av].tabbar._s.expand=true;}this.vs[this.av].tabbar.setSkin(this.skin);this.vs[this.av].tabbar.adjustOuterSize();this.vs[this.av].tabbarId=obj.id;this.vs[this.av].tabbarObj=obj;if(this.skin=="dhx_terrace"){this.adjust();this.updateNestedObjects(true);}return this.vs[this._viewRestore()].tabbar;};this.obj.attachFolders=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this._redraw();}var obj=document.createElement("DIV");obj.id="dhxFoldersObj_"+this._genStr(12);obj.style.width="100%";obj.style.height="100%";obj.style.overflow="hidden";obj.cmp="folders";document.body.appendChild(obj);this.attachObject(obj.id,false,true,false);this.vs[this.av].folders=new dhtmlxFolders(obj.id);this.vs[this.av].folders.setSizes();this.vs[this.av].foldersId=obj.id;this.vs[this.av].foldersObj=obj;return this.vs[this._viewRestore()].folders;};this.obj.attachAccordion=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this._redraw();}var obj=document.createElement("DIV");obj.id="dhxAccordionObj_"+this._genStr(12);this._padding=true;if(this.skin=="dhx_web"){obj.style.left="0px";obj.style.top="0px";obj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px";obj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px";}else{if(this.skin!="dhx_terrace"){obj.style.left="-1px";obj.style.top="-1px";obj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px";obj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px";}}obj.style.position="relative";obj.cmp="accordion";document.body.appendChild(obj);this.attachObject(obj.id,false,true,false);this.vs[this.av].accordion=new dhtmlXAccordion(obj.id,this.skin);this.vs[this.av].accordion.setSizes();this.vs[this.av].accordionId=obj.id;this.vs[this.av].accordionObj=obj;if(this.skin=="dhx_terrace"){this.adjust();this.updateNestedObjects(true);}return this.vs[this._viewRestore()].accordion;};this.obj.attachLayout=function(view,skin){if(this._isCell&&this.skin=="dhx_skyblue"){this.hideHeader();this.vs[this.av].dhxcont.style.border="0px solid white";this.adjustContent(this.childNodes[0],0);}if(this._isCell&&this.skin=="dhx_web"){this.hideHeader();}this._padding=true;var obj=document.createElement("DIV");obj.id="dhxLayoutObj_"+this._genStr(12);obj.style.overflow="hidden";obj.style.position="absolute";obj.style.left="0px";obj.style.top="0px";obj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px";obj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px";if((this._isTabbarCell||this._isAcc)&&(this.skin=="dhx_skyblue")){obj.style.left="-1px";obj.style.top="-1px";obj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px";obj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px";}obj.dhxContExists=true;obj.cmp="layout";document.body.appendChild(obj);this.attachObject(obj.id,false,true,false);this.vs[this.av].layout=new dhtmlXLayoutObject(obj,view,(skin||this.skin));if(this._isWindow){this.attachEvent("_onBeforeTryResize",this.vs[this.av].layout._defineWindowMinDimension);}this.vs[this.av].layoutId=obj.id;this.vs[this.av].layoutObj=obj;if(this.skin=="dhx_terrace"){if(this._isCell){this.style.backgroundColor="transparent";this.vs[this.av].dhxcont.style.backgroundColor="transparent";this.hideHeader();}this.adjust();this.updateNestedObjects(true);}return this.vs[this._viewRestore()].layout;};this.obj.attachEditor=function(skin){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this._redraw();}var obj=document.createElement("DIV");obj.id="dhxEditorObj_"+this._genStr(12);obj.style.position="relative";obj.style.display="none";obj.style.overflow="hidden";obj.style.width="100%";obj.style.height="100%";obj.cmp="editor";document.body.appendChild(obj);if(this.skin=="dhx_terrace"){obj._attached=true;}this.attachObject(obj.id,false,true,false);this.vs[this.av].editor=new dhtmlXEditor(obj.id,skin||this.skin);this.vs[this.av].editorId=obj.id;this.vs[this.av].editorObj=obj;if(this.skin=="dhx_terrace"){this.adjust();this.updateNestedObjects(true);}return this.vs[this._viewRestore()].editor;};this.obj.attachMap=function(opts){var obj=document.createElement("DIV");obj.id="GMapsObj_"+this._genStr(12);obj.style.position="relative";obj.style.display="none";obj.style.overflow="hidden";obj.style.width="100%";obj.style.height="100%";obj.cmp="gmaps";document.body.appendChild(obj);this.attachObject(obj.id,false,true,true);if(!opts){opts={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP};}this.vs[this.av].gmaps=new google.maps.Map(obj,opts);return this.vs[this.av].gmaps;};this.obj.attachObject=function(obj,autoSize,localCall,adjustMT){if(typeof(obj)=="string"){obj=document.getElementById(obj);}if(autoSize){obj.style.visibility="hidden";obj.style.display="";var objW=obj.offsetWidth;var objH=obj.offsetHeight;}this._attachContent("obj",obj);if(autoSize&&this._isWindow){obj.style.visibility="";this._adjustToContent(objW,objH);}if(this.skin=="dhx_terrace"){if(this.vs[this.av].menu!=null||this.vs[this.av].toolbar!=null){this.adjust(typeof(adjustMT)=="undefined"||adjustMT==true);this.updateNestedObjects(true);}}if(!localCall){this._viewRestore();}};this.obj.detachObject=function(remove,moveTo){var p=null;var pObj=null;var t=["tree","grid","layout","tabbar","accordion","folders","form"];for(var q=0;q<t.length;q++){if(this.vs[this.av][t[q]]){p=this.vs[this.av][t[q]];pObj=this.vs[this.av][t[q]+"Obj"];if(remove){if(p.unload){p.unload();}if(p.destructor){p.destructor();}while(pObj.childNodes.length>0){pObj.removeChild(pObj.childNodes[0]);}pObj.parentNode.removeChild(pObj);pObj=null;p=null;}else{document.body.appendChild(pObj);pObj.style.display="none";}this.vs[this.av][t[q]]=null;this.vs[this.av][t[q]+"Id"]=null;this.vs[this.av][t[q]+"Obj"]=null;}}if(p!=null&&pObj!=null){return new Array(p,pObj);}if(remove&&this.vs[this.av]._frame){this._detachURLEvents();this.vs[this.av]._frame=null;}var objA=this.vs[this.av].dhxcont.mainCont[this.av];while(objA.childNodes.length>0){if(remove==true){objA.removeChild(objA.childNodes[0]);}else{var obj=objA.childNodes[0];if(moveTo!=null){if(typeof(moveTo)!="object"){moveTo=document.getElementById(moveTo);}moveTo.appendChild(obj);}else{document.body.appendChild(obj);}obj.style.display="none";}}objA=moveTo=null;};this.obj.appendObject=function(obj){if(typeof(obj)=="string"){obj=document.getElementById(obj);}this._attachContent("obj",obj,true);};this.obj.attachHTMLString=function(str){this._attachContent("str",str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/g,"");if(s){if(window.execScript){window.execScript(s);}else{window.eval(s);}}}};this.obj.attachURL=function(url,ajax){this._attachContent((ajax==true?"urlajax":"url"),url,false);if(this.skin=="dhx_terrace"){if(this.vs[this.av].menu!=null||this.vs[this.av].toolbar!=null){this.adjust(true);this.updateNestedObjects(true);}}this._viewRestore();};this.obj.adjust=function(adjustMT){if(this.skin=="dhx_skyblue"){if(this.vs[this.av].menu){if(this._isWindow||this._isLayout){this.vs[this.av].menu._topLevelOffsetLeft=0;document.getElementById(this.vs[this.av].menuId).style.height="26px";this.vs[this.av].menuHeight=document.getElementById(this.vs[this.av].menuId).offsetHeight;if(this._doOnAttachMenu){this._doOnAttachMenu("show");}}if(this._isCell){document.getElementById(this.vs[this.av].menuId).className+=" in_layoutcell";this.vs[this.av].menuHeight=25;}if(this._isAcc){document.getElementById(this.vs[this.av].menuId).className+=" in_acccell";this.vs[this.av].menuHeight=25;}if(this._doOnAttachMenu){this._doOnAttachMenu("adjust");}}if(this.vs[this.av].toolbar){if(this._isWindow){document.getElementById(this.vs[this.av].toolbarId).className+=" in_window";}if(this._isLayout){document.getElementById(this.vs[this.av].toolbarId).className+=" in_layout";}if(this._isCell){document.getElementById(this.vs[this.av].toolbarId).className+=" in_layoutcell";}if(this._isAcc){document.getElementById(this.vs[this.av].toolbarId).className+=" in_acccell";}if(this._isTabbarCell){document.getElementById(this.vs[this.av].toolbarId).className+=" in_tabbarcell";}}}if(this.skin=="dhx_web"){if(this.vs[this.av].toolbar){if(this._isWindow){document.getElementById(this.vs[this.av].toolbarId).className+=" in_window";}if(this._isLayout){document.getElementById(this.vs[this.av].toolbarId).className+=" in_layout";}if(this._isCell){document.getElementById(this.vs[this.av].toolbarId).className+=" in_layoutcell";}if(this._isAcc){document.getElementById(this.vs[this.av].toolbarId).className+=" in_acccell";}if(this._isTabbarCell){document.getElementById(this.vs[this.av].toolbarId).className+=" in_tabbarcell";}}}if(this.skin=="dhx_terrace"){var mtLRPad=0;if(this._isWindow||this._isCell||this._isAcc||this._isTabbarCell){mtLRPad=14;}if(this._isCell&&this._noHeader){mtLRPad=0;}var mtTPad=0;if(this._isWindow||this._isCell||this._isAcc||this._isTabbarCell){mtTPad=14;}if(this._isCell&&this._noHeader){mtTPad=0;}var mBPad=((adjustMT==true&&!this.vs[this.av].toolbar)||this._isLayout?14:0);var tBPad=(adjustMT==true||this._isLayout?14:0);var mtAttached=false;if(this.vs[this.av].menu){document.getElementById(this.vs[this.av].menuId).style.marginLeft=mtLRPad+"px";document.getElementById(this.vs[this.av].menuId).style.marginRight=mtLRPad+"px";document.getElementById(this.vs[this.av].menuId).style.marginTop=mtTPad+"px";document.getElementById(this.vs[this.av].menuId).style.marginBottom=mBPad+"px";this.vs[this.av].menuHeight=32+mtTPad+mBPad;if(this._doOnAttachMenu){this._doOnAttachMenu("show");}mtAttached=true;}if(this.vs[this.av].toolbar){if(mtTPad==0&&this.vs[this.av].menu!=null&this._isCell){mtTPad=14;}document.getElementById(this.vs[this.av].toolbarId).style.marginLeft=mtLRPad+"px";document.getElementById(this.vs[this.av].toolbarId).style.marginRight=mtLRPad+"px";document.getElementById(this.vs[this.av].toolbarId).style.marginTop=mtTPad+"px";document.getElementById(this.vs[this.av].toolbarId).style.marginBottom=tBPad+"px";this.vs[this.av].toolbarHeight=this.vs[this.av].toolbar.cont.offsetHeight+mtTPad+tBPad;if(this._doOnAttachToolbar){this._doOnAttachToolbar("show");}mtAttached=true;}}};this.obj._attachContent=function(type,obj,append){if(append!==true){if(this.vs[this.av]._frame){this._detachURLEvents();this.vs[this.av]._frame=null;}while(this.vs[this.av].dhxcont.mainCont[this.av].childNodes.length>0){this.vs[this.av].dhxcont.mainCont[this.av].removeChild(this.vs[this.av].dhxcont.mainCont[this.av].childNodes[0]);}}if(type=="url"){if(this._isWindow&&obj.cmp==null&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this._redraw();}var fr=document.createElement("IFRAME");fr.frameBorder=0;fr.border=0;fr.style.width="100%";fr.style.height="100%";fr.setAttribute("src","javascript:false;");this.vs[this.av].dhxcont.mainCont[this.av].appendChild(fr);fr.src=obj;this.vs[this.av]._frame=fr;this._attachURLEvents();}else{if(type=="urlajax"){if(this._isWindow&&obj.cmp==null&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF";this._redraw();}var t=this;var tav=String(this.av).valueOf();var xmlParser=function(){var tmp=t.av;t.av=tav;t.attachHTMLString(this.xmlDoc.responseText,this);t.av=tmp;if(t._doOnFrameContentLoaded){t._doOnFrameContentLoaded();}this.destructor();};var xmlLoader=new dtmlXMLLoaderObject(xmlParser,window);xmlLoader.dhxWindowObject=this;xmlLoader.loadXML(obj);}else{if(type=="obj"){if(this._isWindow&&obj.cmp==null&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF";this._redraw();}this.vs[this.av].dhxcont._frame=null;this.vs[this.av].dhxcont.mainCont[this.av].appendChild(obj);this.vs[this.av].dhxcont.mainCont[this.av].style.overflow=(append===true?"auto":"hidden");obj.style.display="";}else{if(type=="str"){if(this._isWindow&&obj.cmp==null&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid";this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF";this._redraw();}this.vs[this.av].dhxcont._frame=null;this.vs[this.av].dhxcont.mainCont[this.av].innerHTML=obj;}}}}};this.obj._attachURLEvents=function(){var t=this;var fr=this.vs[this.av]._frame;if(_isIE){fr.onreadystatechange=function(a){if(fr.readyState=="complete"){try{fr.contentWindow.document.body.onmousedown=function(){if(t._doOnFrameMouseDown){t._doOnFrameMouseDown();}};}catch(e){}try{if(t._doOnFrameContentLoaded){t._doOnFrameContentLoaded();}}catch(e){}}};}else{fr.onload=function(){try{fr.contentWindow.onmousedown=function(){if(t._doOnFrameMouseDown){t._doOnFrameMouseDown();}};}catch(e){}try{if(t._doOnFrameContentLoaded){t._doOnFrameContentLoaded();}}catch(e){}};}};this.obj._detachURLEvents=function(){if(_isIE){try{this.vs[this.av]._frame.onreadystatechange=null;this.vs[this.av]._frame.contentWindow.document.body.onmousedown=null;this.vs[this.av]._frame.onload=null;}catch(e){}}else{try{this.vs[this.av]._frame.contentWindow.onmousedown=null;this.vs[this.av]._frame.onload=null;}catch(e){}}};this.obj.showMenu=function(){if(!(this.vs[this.av].menu&&this.vs[this.av].menuId)){return;}if(document.getElementById(this.vs[this.av].menuId).style.display!="none"){return;}this.vs[this.av].menuHidden=false;if(this._doOnAttachMenu){this._doOnAttachMenu("show");}document.getElementById(this.vs[this.av].menuId).style.display="";this._viewRestore();};this.obj.hideMenu=function(){if(!(this.vs[this.av].menu&&this.vs[this.av].menuId)){return;}if(document.getElementById(this.vs[this.av].menuId).style.display=="none"){return;}document.getElementById(this.vs[this.av].menuId).style.display="none";this.vs[this.av].menuHidden=true;if(this._doOnAttachMenu){this._doOnAttachMenu("hide");}this._viewRestore();};this.obj.showToolbar=function(){if(!(this.vs[this.av].toolbar&&this.vs[this.av].toolbarId)){return;}if(document.getElementById(this.vs[this.av].toolbarId).style.display!="none"){return;}this.vs[this.av].toolbarHidden=false;if(this._doOnAttachToolbar){this._doOnAttachToolbar("show");}document.getElementById(this.vs[this.av].toolbarId).style.display="";this._viewRestore();};this.obj.hideToolbar=function(){if(!(this.vs[this.av].toolbar&&this.vs[this.av].toolbarId)){return;}if(document.getElementById(this.vs[this.av].toolbarId).style.display=="none"){return;}this.vs[this.av].toolbarHidden=true;document.getElementById(this.vs[this.av].toolbarId).style.display="none";if(this._doOnAttachToolbar){this._doOnAttachToolbar("hide");}this._viewRestore();};this.obj.showStatusBar=function(){if(!(this.vs[this.av].sb&&this.vs[this.av].sbId)){return;}if(document.getElementById(this.vs[this.av].sbId).style.display!="none"){return;}this.vs[this.av].sbHidden=false;if(this._doOnAttachStatusBar){this._doOnAttachStatusBar("show");}document.getElementById(this.vs[this.av].sbId).style.display="";this._viewRestore();};this.obj.hideStatusBar=function(){if(!(this.vs[this.av].sb&&this.vs[this.av].sbId)){return;}if(document.getElementById(this.vs[this.av].sbId).style.display=="none"){return;}this.vs[this.av].sbHidden=true;document.getElementById(this.vs[this.av].sbId).style.display="none";if(this._doOnAttachStatusBar){this._doOnAttachStatusBar("hide");}this._viewRestore();};this.obj._dhxContDestruct=function(){var av=this.av;for(var a in this.vs){this.av=a;this.detachMenu(true);this.detachToolbar(true);this.detachStatusBar(true);this.detachObject(true);this.vs[a].dhxcont.mainCont[a]=null;}for(var a in this.vs){this.vs[a].dhxcont.mainCont=null;this.vs[a].dhxcont.innerHTML="";this.vs[a].dhxcont=null;this.vs[a]=null;}this.vs=null;this.attachMenu=null;this.attachToolbar=null;this.attachStatusBar=null;this.detachMenu=null;this.detachToolbar=null;this.detachStatusBar=null;this.showMenu=null;this.showToolbar=null;this.showStatusBar=null;this.hideMenu=null;this.hideToolbar=null;this.hideStatusBar=null;this.attachGrid=null;this.attachScheduler=null;this.attachTree=null;this.attachTabbar=null;this.attachFolders=null;this.attachAccordion=null;this.attachLayout=null;this.attachEditor=null;this.attachObject=null;this.detachObject=null;this.appendObject=null;this.attachHTMLString=null;this.attachURL=null;this.attachMap=null;this.view=null;this.show=null;this.adjust=null;this.setMinContentSize=null;this.moveContentTo=null;this.adjustContent=null;this.coverBlocker=null;this.showCoverBlocker=null;this.hideCoverBlocker=null;this.updateNestedObjects=null;this._attachContent=null;this._attachURLEvents=null;this._detachURLEvents=null;this._viewRestore=null;this._setPadding=null;this._init=null;this._genStr=null;this._dhxContDestruct=null;this._getSt=null;this.getFrame=null;this.getView=null;this.setActive=null;that.st.innerHTML="";that.st.parentNode.removeChild(that.st);that.st=null;that.setContent=null;that.dhxcont=null;that.obj=null;that=null;if(dhtmlx.detaches){for(var a in dhtmlx.detaches){dhtmlx.detaches[a](this);}}};if(dhtmlx.attaches){for(var a in dhtmlx.attaches){this.obj[a]=dhtmlx.attaches[a];}}return this;}var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"");};function dhtmlxArray(a){return dhtmlXHeir((a||new Array()),dhtmlxArray._master);}dhtmlxArray._master={_dhx_find:function(b){for(var a=0;a<this.length;a++){if(b==this[a]){return a;}}return -1;},_dhx_insertAt:function(c,b){this[this.length]=null;for(var a=this.length-1;a>=c;a--){this[a]=this[a-1];}this[c]=b;},_dhx_removeAt:function(a){this.splice(a,1);},_dhx_swapItems:function(a,c){var b=this[a];this[a]=this[c];this[c]=b;}};function dhtmlXGridObject(d){if(_isIE){try{document.execCommand("BackgroundImageCache",false,true);}catch(b){}}if(d){if(typeof(d)=="object"){this.entBox=d;if(!this.entBox.id){this.entBox.id="cgrid2_"+this.uid();}}else{this.entBox=document.getElementById(d);}}else{this.entBox=document.createElement("DIV");this.entBox.id="cgrid2_"+this.uid();}this.entBox.innerHTML="";dhtmlxEventable(this);var a=this;this._wcorr=0;this.fontWidth=7;this.cell=null;this.row=null;this.iconURL="";this.editor=null;this._f2kE=true;this._dclE=true;this.combos=new Array(0);this.defVal=new Array(0);this.rowsAr={};this.rowsBuffer=dhtmlxArray();this.rowsCol=dhtmlxArray();this._data_cache={};this._ecache={};this._ud_enabled=true;this.xmlLoader=new dtmlXMLLoaderObject(this.doLoadDetails,this,true,this.no_cashe);this._maskArr=[];this.selectedRows=dhtmlxArray();this.UserData={};this._sizeFix=this._borderFix=0;this.entBox.className+=" gridbox";this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?(this.entBox.style.width||window.getComputedStyle(this.entBox,null)["width"]):(this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0))||"100%";this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?(this.entBox.style.height||window.getComputedStyle(this.entBox,null)["height"]):(this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0))||"100%";this.entBox.style.cursor="default";this.entBox.onselectstart=function(){return false;};var c=function(e){var f=document.createElement("TABLE");f.cellSpacing=f.cellPadding=0;f.style.cssText="width:100%;table-layout:fixed;";f.className=e.substr(2);return f;};this.obj=c("c_obj");this.hdr=c("c_hdr");this.hdr.style.marginRight="20px";this.hdr.style.paddingRight="20px";this.objBox=document.createElement("DIV");this.objBox.style.width="100%";this.objBox.style.overflow="auto";this.objBox.appendChild(this.obj);this.objBox.className="objbox";if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this);}this.hdrBox=document.createElement("DIV");this.hdrBox.style.width="100%";this.hdrBox.style.height="25px";this.hdrBox.style.overflow="hidden";this.hdrBox.className="xhdr";this.preloadImagesAr=new Array(0);this.sortImg=document.createElement("IMG");this.sortImg.style.display="none";this.hdrBox.appendChild(this.sortImg);this.hdrBox.appendChild(this.hdr);this.hdrBox.style.position="relative";this.entBox.appendChild(this.hdrBox);this.entBox.appendChild(this.objBox);this.entBox.grid=this;this.objBox.grid=this;this.hdrBox.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];this.cellWidthType=this.entBox.cellwidthtype||"px";this.delim=this.entBox.delimiter||",";this._csvDelim=",";this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this._srdh=(_isIE&&(document.compatMode!="BackCompat")?22:20);this.imgURL=window.dhx_globalImgPath||"";this.isActive=false;this.isEditable=true;this.useImagesInHeader=false;this.pagingOn=false;this.rowsBufferOutSize=0;dhtmlxEvent(window,"unload",function(){try{if(a.destructor){a.destructor();}}catch(f){}});this.setSkin=function(e){this.skin_name=e;var f=this.entBox.className.split(" gridbox")[0];this.entBox.className=f+" gridbox gridbox_"+e;this.skin_h_correction=0;this.enableAlterCss("ev_"+e,"odd_"+e,this.isTreeGrid());this._fixAlterCss();switch(e){case"clear":this._topMb=document.createElement("DIV");this._topMb.className="topMumba";this._topMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinC_top_left.gif'><img style='right:20px' src='"+this.imgURL+"skinC_top_right.gif'>";this.entBox.appendChild(this._topMb);this._botMb=document.createElement("DIV");this._botMb.className="bottomMumba";this._botMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinD_bottom_left.gif'><img style='right:20px' src='"+this.imgURL+"skinD_bottom_right.gif'>";this.entBox.appendChild(this._botMb);if(this.entBox.style.position!="absolute"){this.entBox.style.position="relative";}this.skin_h_correction=20;break;case"dhx_terrace":this._srdh=40;this.forceDivInHeader=true;break;case"dhx_skyblue":case"dhx_web":case"glassy_blue":case"dhx_black":case"dhx_blue":case"modern":case"light":this._srdh=20;this.forceDivInHeader=true;break;case"xp":this.forceDivInHeader=true;if((_isIE)&&(document.compatMode!="BackCompat")){this._srdh=26;}else{this._srdh=22;}break;case"mt":if((_isIE)&&(document.compatMode!="BackCompat")){this._srdh=26;}else{this._srdh=22;}break;case"gray":if((_isIE)&&(document.compatMode!="BackCompat")){this._srdh=22;}break;case"sbdark":break;}if(_isIE&&this.hdr){var g=this.hdr.parentNode;g.removeChild(this.hdr);g.appendChild(this.hdr);}this.setSizes();};if(_isIE){this.preventIECaching(true);}if(window.dhtmlDragAndDropObject){this.dragger=new dhtmlDragAndDropObject();}this._doOnScroll=function(f,g){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);this.doOnScroll(f,g);};this.doOnScroll=function(f,g){this.hdrBox.scrollLeft=this.objBox.scrollLeft;if(this.ftr){this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft;}if(g){return;}if(this._srnd){if(this._dLoadTimer){window.clearTimeout(this._dLoadTimer);}this._dLoadTimer=window.setTimeout(function(){if(a._update_srnd_view){a._update_srnd_view();}},100);}};this.attachToObject=function(e){e.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes();};this.init=function(k){if((this.isTreeGrid())&&(!this._h2)){this._h2=new dhtmlxHierarchy();if((this._fake)&&(!this._realfake)){this._fake._h2=this._h2;}this._tgc={imgURL:null};}if(!this._hstyles){return;}this.editStop();this.lastClicked=null;this.resized=null;this.fldSorted=this.r_fldSorted=null;this.cellWidthPX=[];this.cellWidthPC=[];if(this.hdr.rows.length>0){var g=this.xmlFileUrl;this.clearAll(true);this.xmlFileUrl=g;}var j=this.hdr.insertRow(0);for(var h=0;h<this.hdrLabels.length;h++){j.appendChild(document.createElement("TH"));j.childNodes[h]._cellIndex=h;j.childNodes[h].style.height="0px";}if(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined){j.style.position="absolute";}else{j.style.height="auto";}var j=this.hdr.insertRow(_isKHTML?2:1);j._childIndexes=new Array();var f=0;for(var h=0;h<this.hdrLabels.length;h++){j._childIndexes[h]=h-f;if((this.hdrLabels[h]==this.splitSign)&&(h!=0)){if(_isKHTML){j.insertCell(h-f);}j.cells[h-f-1].colSpan=(j.cells[h-f-1].colSpan||1)+1;j.childNodes[h-f-1]._cellIndex++;f++;j._childIndexes[h]=h-f;continue;}j.insertCell(h-f);j.childNodes[h-f]._cellIndex=h;j.childNodes[h-f]._cellIndexS=h;this.setColumnLabel(h,this.hdrLabels[h]);}if(f==0){j._childIndexes=null;}this._cCount=this.hdrLabels.length;if(_isIE){window.setTimeout(function(){if(a.setSizes){a.setSizes();}},1);}if(!this.obj.firstChild){this.obj.appendChild(document.createElement("TBODY"));}var e=this.obj.firstChild;if(!e.firstChild){e.appendChild(document.createElement("TR"));e=e.firstChild;if(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined){e.style.position="absolute";}else{e.style.height="auto";}for(var h=0;h<this.hdrLabels.length;h++){e.appendChild(document.createElement("TH"));e.childNodes[h].style.height="0px";}}this._c_order=null;if(this.multiLine!=true){this.obj.className+=" row20px";}this.sortImg.style.position="absolute";this.sortImg.style.display="none";this.sortImg.src=this.imgURL+"sort_desc.gif";this.sortImg.defLeft=0;if(this.noHeader){this.hdrBox.style.display="none";}else{this.noHeader=false;}this.attachHeader();this.attachHeader(0,0,"_aFoot");this.setSizes();if(k){this.parseXML();}this.obj.scrollTop=0;if(this.dragAndDropOff){this.dragger.addDragLanding(this.entBox,this);}if(this._initDrF){this._initD();}if(this._init_point){this._init_point();}};this.setColumnSizes=function(l){var m=0;var o=[];var h=0;for(var g=0;g<this._cCount;g++){if((this.initCellWidth[g]=="*")&&!this._hrrar[g]){this._awdth=false;o.push(g);continue;}if(this.cellWidthType=="%"){if(typeof this.cellWidthPC[g]=="undefined"){this.cellWidthPC[g]=this.initCellWidth[g];}var k=(l*this.cellWidthPC[g]/100)||0;if(h>0.5){k++;h--;}var e=this.cellWidthPX[g]=Math.floor(k);var h=h+k-e;}else{if(typeof this.cellWidthPX[g]=="undefined"){this.cellWidthPX[g]=this.initCellWidth[g];}}if(!this._hrrar[g]){m+=this.cellWidthPX[g]*1;}}if(o.length){var f=Math.floor((l-m)/o.length);if(f<0){f=1;}for(var g=0;g<o.length;g++){var j=Math.max((this._drsclmW?(this._drsclmW[o[g]]||0):0),f);this.cellWidthPX[o[g]]=j;m+=j;}if(l>m){var n=o[o.length-1];this.cellWidthPX[n]=this.cellWidthPX[n]+(l-m);m=l;}this._setAutoResize();}this.obj.style.width=m+"px";this.hdr.style.width=m+"px";if(this.ftr){this.ftr.style.width=m+"px";}this.chngCellWidth();return m;};this.setSizes=function(){if((!this.hdr.rows[0])){return;}var q=this.quirks=(_isIE&&document.compatMode=="BackCompat");var f=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes){if(this.globalBox){var s=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._delta_x&&!this._realfake){var h=this.globalBox.clientWidth;this.globalBox.style.width=this._delta_x;this.entBox.style.width=Math.max(0,(this.globalBox.clientWidth+(q?s*2:0))-this._fake.entBox.clientWidth)+"px";if(h!=this.globalBox.clientWidth){this._fake._correctSplit(this._fake.entBox.clientWidth);}}if(this._delta_y&&!this._realfake){this.globalBox.style.height=this._delta_y;this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden";this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(q?s*2:0)+"px";}}else{if(this._delta_x){if(this.entBox.parentNode&&this.entBox.parentNode.tagName=="TD"){this.entBox.style.width="1px";this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-f*2+"px";}else{this.entBox.style.width=this._delta_x;}}if(this._delta_y){this.entBox.style.height=this._delta_y;}}}window.clearTimeout(this._sizeTime);if(!this.entBox.offsetWidth&&(!this.globalBox||!this.globalBox.offsetWidth)){this._sizeTime=window.setTimeout(function(){if(a.setSizes){a.setSizes();}},250);return;}var w=((!this._wthB)&&((this.entBox.cmp||this._delta_x)&&(this.skin_name||"").indexOf("dhx")==0&&!q)?2:0);var v=((!this._wthB)&&((this.entBox.cmp||this._delta_y)&&(this.skin_name||"").indexOf("dhx")==0&&!q)?2:0);if(this._sizeFix){w-=this._sizeFix;v-=this._sizeFix;}var k=this.parentGrid?false:(this.objBox.scrollHeight>this.objBox.offsetHeight);var t=dhtmlx.$customScroll?0:18;var u=this.entBox.clientWidth-(this.skin_h_correction||0)*(q?0:1)-w;var n=this.entBox.clientWidth-(this.skin_h_correction||0)-w;var m=this.entBox.clientHeight-v;var o=this.setColumnSizes(n-(k?t:0)-(this._correction_x||0));var j=this.parentGrid?false:((this.objBox.scrollWidth>this.objBox.offsetWidth)||(this.objBox.style.overflowX=="scroll"));var r=this.hdr.clientHeight;var e=this.ftr?this.ftr.clientHeight:0;var l=u;var p=m-r-e;if(this._awdth&&this._awdth[0]&&this._awdth[1]==99999){j=0;}if(this._ahgr){if(this._ahgrMA){p=this.entBox.parentNode.clientHeight-r-e;}else{p=this.obj.offsetHeight+(j?t:0)+(this._correction_y||0);}if(this._ahgrM){if(this._ahgrF){p=Math.min(this._ahgrM,p+r+e)-r-e;}else{p=Math.min(this._ahgrM,p);}}if(k&&p>=this.obj.scrollHeight+(j?t:0)){k=false;this.setColumnSizes(n-(this._correction_x||0));}}if((this._awdth)&&(this._awdth[0])){if(this.cellWidthType=="%"){this.cellWidthType="px";}if(this._fake){o+=this._fake.entBox.clientWidth;}var l=Math.min(Math.max(o+(k?t:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);if(this._fake){l-=this._fake.entBox.clientWidth;}}p=Math.max(0,p);this._ff_size_delta=(this._ff_size_delta==0.1)?0.2:0.1;if(!_isFF){this._ff_size_delta=0;}if(!this.dontSetSizes){this.entBox.style.width=Math.max(0,l+(q?2:0)*f+this._ff_size_delta)+"px";this.entBox.style.height=p+(q?2:0)*f+r+e+"px";}this.objBox.style.height=p+((q&&!k)?2:0)*f+"px";this.hdrBox.style.height=r+"px";if(p!=m){this.doOnScroll(0,!this._srnd);}var g=this["setSizes_"+this.skin_name];if(g){g.call(this);}this.setSortImgPos();if(r!=this.hdr.clientHeight&&this._ahgr){this.setSizes();}this.callEvent("onSetSizes",[]);};this.setSizes_clear=function(){var g=this.hdr.offsetHeight;var e=this.entBox.offsetWidth;var f=g+this.objBox.offsetHeight;this._topMb.style.top=(g||0)+"px";this._topMb.style.width=(e+20)+"px";this._botMb.style.top=(f-3)+"px";this._botMb.style.width=(e+20)+"px";};this.chngCellWidth=function(){if((_isOpera)&&(this.ftr)){this.ftr.width=this.objBox.scrollWidth+"px";}var e=this._cCount;for(var f=0;f<e;f++){this.hdr.rows[0].cells[f].style.width=this.cellWidthPX[f]+"px";this.obj.rows[0].childNodes[f].style.width=this.cellWidthPX[f]+"px";if(this.ftr){this.ftr.rows[0].cells[f].style.width=this.cellWidthPX[f]+"px";}}};this.setDelimiter=function(e){this.delim=e;};this.setInitWidthsP=function(e){this.cellWidthType="%";this.initCellWidth=e.split(this.delim.replace(/px/gi,""));if(!arguments[1]){this._setAutoResize();}};this._setAutoResize=function(){if(this._realfake){return;}var f=window;var e=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(e._resize_timer);if(e._setAutoResize){e._resize_timer=window.setTimeout(function(){if(e.setSizes){e.setSizes();}if(e._fake){e._fake._correctSplit();}},100);}});};this.setInitWidths=function(f){this.cellWidthType="px";this.initCellWidth=f.split(this.delim);if(_isFF){for(var e=0;e<this.initCellWidth.length;e++){if(this.initCellWidth[e]!="*"){this.initCellWidth[e]=parseInt(this.initCellWidth[e]);}}}};this.enableMultiline=function(e){this.multiLine=convertStringToBoolean(e);};this.enableMultiselect=function(e){this.selMultiRows=convertStringToBoolean(e);};this.setImagePath=function(e){this.imgURL=e;};this.setImagesPath=this.setImagePath;this.setIconPath=function(e){this.iconURL=e;};this.setIconsPath=this.setIconPath;this.changeCursorState=function(g){var f=g.target||g.srcElement;if(f.tagName!="TD"){f=this.getFirstParentOfType(f,"TD");}if(!f){return;}if((f.tagName=="TD")&&(this._drsclmn)&&(!this._drsclmn[f._cellIndex])){return f.style.cursor="default";}var e=(g.layerX||0)+(((!_isIE)&&(g.target.tagName=="DIV"))?f.offsetLeft:0);if((f.offsetWidth-(g.offsetX||(parseInt(this.getPosition(f,this.hdrBox))-e)*-1))<(_isOpera?20:10)){f.style.cursor="E-resize";}else{f.style.cursor="default";}if(_isOpera){this.hdrBox.scrollLeft=this.objBox.scrollLeft;}};this.startColResize=function(h){if(this.resized){this.stopColResize();}this.resized=null;var g=h.target||h.srcElement;if(g.tagName!="TD"){g=this.getFirstParentOfType(g,"TD");}var e=h.clientX;var j=this.hdr.offsetWidth;var f=parseInt(g.offsetWidth);if(g.tagName=="TD"&&g.style.cursor!="default"){if((this._drsclmn)&&(!this._drsclmn[g._cellIndex])){return;}a._old_d_mm=document.body.onmousemove;a._old_d_mu=document.body.onmouseup;document.body.onmousemove=function(k){if(a){a.doColResize(k||window.event,g,f,e,j);}};document.body.onmouseup=function(){if(a){a.stopColResize();}};}};this.stopColResize=function(){document.body.onmousemove=a._old_d_mm||"";document.body.onmouseup=a._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this]);};this.doColResize=function(k,f,h,l,n){f.style.cursor="E-resize";this.resized=f;var e=h+(k.clientX-l);var j=n+(k.clientX-l);if(!(this.callEvent("onResize",[f._cellIndex,e,this]))){return;}if(_isIE){this.objBox.scrollLeft=this.hdrBox.scrollLeft;}if(f.colSpan>1){var m=new Array();for(var g=0;g<f.colSpan;g++){m[g]=Math.round(e*this.hdr.rows[0].childNodes[f._cellIndexS+g].offsetWidth/f.offsetWidth);}for(var g=0;g<f.colSpan;g++){this._setColumnSizeR(f._cellIndexS+g*1,m[g]);}}else{this._setColumnSizeR(f._cellIndex,e);}this.doOnScroll(0,1);this.setSizes();if(this._fake&&this._awdth){this._fake._correctSplit();}};this._setColumnSizeR=function(e,h){if(h>((this._drsclmW&&!this._notresize)?(this._drsclmW[e]||10):10)){this.obj.rows[0].childNodes[e].style.width=h+"px";this.hdr.rows[0].childNodes[e].style.width=h+"px";if(this.ftr){this.ftr.rows[0].childNodes[e].style.width=h+"px";}if(this.cellWidthType=="px"){this.cellWidthPX[e]=h;}else{var f=parseInt(this.entBox.offsetWidth);if(this.objBox.scrollHeight>this.objBox.offsetHeight){f-=17;}var g=Math.round(h/f*100);this.cellWidthPC[e]=g;}if(this.sortImg.style.display!="none"){this.setSortImgPos();}}};this.setSortImgState=function(j,h,e,k){e=(e||"asc").toLowerCase();if(!convertStringToBoolean(j)){this.sortImg.style.display="none";this.fldSorted=this.r_fldSorted=null;return;}if(e=="asc"){this.sortImg.src=this.imgURL+"sort_asc.gif";}else{this.sortImg.src=this.imgURL+"sort_desc.gif";}this.sortImg.style.display="";this.fldSorted=this.hdr.rows[0].childNodes[h];var g=this.hdr.rows[k||1];if(!g){return;}for(var f=0;f<g.childNodes.length;f++){if(g.childNodes[f]._cellIndexS==h){this.r_fldSorted=g.childNodes[f];return this.setSortImgPos();}}return this.setSortImgState(j,h,e,(k||1)+1);};this.setSortImgPos=function(f,j,h,e){if(this._hrrar&&this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:f]){return;}if(!e){if(!f){var e=this.r_fldSorted;}else{var e=this.hdr.rows[h||0].cells[f];}}if(e!=null){var k=this.getPosition(e,this.hdrBox);var g=e.offsetWidth;this.sortImg.style.left=Number(k[0]+g-13)+"px";this.sortImg.defLeft=parseInt(this.sortImg.style.left);this.sortImg.style.top=Number(k[1]+5)+"px";if((!this.useImagesInHeader)&&(!j)){this.sortImg.style.display="inline";}this.sortImg.style.left=this.sortImg.defLeft+"px";}};this.setActive=function(e){if(arguments.length==0){var e=true;}if(e==true){if(globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject!=this)){globalActiveDHTMLGridObject.editStop();globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject]);}globalActiveDHTMLGridObject=this;this.isActive=true;}else{this.isActive=false;this.callEvent("onBlur",[this]);}};this._doClick=function(g){var j=0;var f=this.getFirstParentOfType(_isIE?g.srcElement:g.target,"TD");if(!f){return;}var h=true;if(this.markedCells){var e=0;if(g.shiftKey||g.metaKey){e=1;}if(g.ctrlKey){e=2;}this.doMark(f,e);return true;}if(this.selMultiRows!=false){if(g.shiftKey&&this.row!=null&&this.selectedRows.length){j=1;}if(g.ctrlKey||g.metaKey){j=2;}}this.doClick(f,h,j);};this._doContClick=function(g){var f=this.getFirstParentOfType(_isIE?g.srcElement:g.target,"TD");if((!f)||(typeof(f.parentNode.idd)=="undefined")){this.callEvent("onEmptyClick",[g]);return true;}if(g.button==2||(_isMacOS&&g.ctrlKey)){if(!this.callEvent("onRightClick",[f.parentNode.idd,f._cellIndex,g])){var l=function(n){(n||event).cancelBubble=true;return false;};(g.srcElement||g.target).oncontextmenu=l;return l(g);}if(this._ctmndx){if(!(this.callEvent("onBeforeContextMenu",[f.parentNode.idd,f._cellIndex,this]))){return true;}if(_isIE){g.srcElement.oncontextmenu=function(){event.cancelBubble=true;return false;};}if(this._ctmndx.showContextMenu){var k=window.document.documentElement;var h=window.document.body;var j=new Array((k.scrollLeft||h.scrollLeft),(k.scrollTop||h.scrollTop));if(_isIE){var e=g.clientX+j[0];var m=g.clientY+j[1];}else{var e=g.pageX;var m=g.pageY;}this._ctmndx.showContextMenu(e-1,m-1);this.contextID=this._ctmndx.contextMenuZoneId=f.parentNode.idd+"_"+f._cellIndex;this._ctmndx._skip_hide=true;}else{f.contextMenuId=f.parentNode.idd+"_"+f._cellIndex;f.contextMenu=this._ctmndx;f.a=this._ctmndx._contextStart;f.a(f,g);f.a=null;}g.cancelBubble=true;return false;}}else{if(this._ctmndx){if(this._ctmndx.hideContextMenu){this._ctmndx.hideContextMenu();}else{this._ctmndx._contextEnd();}}}return true;};this.doClick=function(e,l,k,u){if(!this.selMultiRows){k=0;}var t=this.row?this.row.idd:0;this.setActive(true);if(!k){k=0;}if(this.cell!=null){this.cell.className=this.cell.className.replace(/cellselected/g,"");}if(e.tagName=="TD"){if(this.checkEvent("onSelectStateChanged")){var f=this.getSelectedId();}var w=this.row;if(k==1){var h=this.rowsCol._dhx_find(e.parentNode);var s=this.rowsCol._dhx_find(this.lastClicked);if(h>s){var n=s;var g=h;}else{var n=h;var g=s;}for(var q=0;q<this.rowsCol.length;q++){if((q>=n&&q<=g)){if(this.rowsCol[q]&&(!this.rowsCol[q]._sRow)){if(this.rowsCol[q].className.indexOf("rowselected")==-1&&this.callEvent("onBeforeSelect",[this.rowsCol[q].idd,t])){this.rowsCol[q].className+=" rowselected";this.selectedRows[this.selectedRows.length]=this.rowsCol[q];}}else{this.clearSelection();return this.doClick(e,l,0,u);}}}}else{if(k==2){if(e.parentNode.className.indexOf("rowselected")!=-1){e.parentNode.className=e.parentNode.className.replace(/rowselected/g,"");this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(e.parentNode));var r=true;u=false;}}}this.editStop();if(typeof(e.parentNode.idd)=="undefined"){return true;}if((!r)&&(!e.parentNode._sRow)){if(this.callEvent("onBeforeSelect",[e.parentNode.idd,t])){if(this.getSelectedRowId()!=e.parentNode.idd){if(k==0){this.clearSelection();}this.cell=e;if((w==e.parentNode)&&(this._chRRS)){l=false;}this.row=e.parentNode;this.row.className+=" rowselected";if(this.cell&&_isIE&&_isIE==8){var o=this.cell.nextSibling;var m=this.cell.parentNode;m.removeChild(this.cell);m.insertBefore(this.cell,o);this.cell.setActive();}if(this.selectedRows._dhx_find(this.row)==-1){this.selectedRows[this.selectedRows.length]=this.row;}}else{this.cell=e;this.row=e.parentNode;}}else{l=false;}}if(this.cell&&this.cell.parentNode.className.indexOf("rowselected")!=-1){this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected";}if(k!=1){if(!this.row){return;}}this.lastClicked=e.parentNode;var p=this.row.idd;var j=this.cell;if(l&&typeof(p)!="undefined"&&j&&!r){a.onRowSelectTime=setTimeout(function(){if(a.callEvent){a.callEvent("onRowSelect",[p,j._cellIndex]);}},100);}else{this.callEvent("onRowSelectRSOnly",[p]);}if(this.checkEvent("onSelectStateChanged")){var v=this.getSelectedId();if(f!=v){this.callEvent("onSelectStateChanged",[v,f]);}}}this.isActive=true;};this.selectAll=function(){this.clearSelection();var f=this.rowsBuffer;if(this.pagingOn){f=this.rowsCol;}for(var e=0;e<f.length;e++){this.render_row(e).className+=" rowselected";}this.selectedRows=dhtmlxArray([].concat(f));if(this.selectedRows.length){this.row=this.selectedRows[0];this.cell=this.row.cells[0];}if((this._fake)&&(!this._realfake)){this._fake.selectAll();}};this.selectCell=function(j,f,k,g,h,e){if(!k){k=false;}if(typeof(j)!="object"){j=this.render_row(j);}if(!j||j==-1){return null;}var l=j.childNodes[f];if(!l){l=j.childNodes[0];}if(!this.markedCells){if(g){this.doClick(l,k,3,e);}else{this.doClick(l,k,0,e);}}else{this.doMark(l,g?2:0);}if(h){this.editCell();}};this.moveToVisible=function(j,k){if(this.pagingOn){var g=Math.floor(this.getRowIndex(j.parentNode.idd)/this.rowsBufferOutSize)+1;if(g!=this.currentPage){this.changePage(g);}}try{if(j.offsetHeight){var e=j.offsetLeft+j.offsetWidth+20;var h=0;if(e>(this.objBox.offsetWidth+this.objBox.scrollLeft)){if(j.offsetLeft>this.objBox.scrollLeft){h=j.offsetLeft-5;}}else{if(j.offsetLeft<this.objBox.scrollLeft){e-=j.offsetWidth*2/3;if(e<this.objBox.scrollLeft){h=j.offsetLeft-5;}}}if((h)&&(!k)){this.objBox.scrollLeft=h;}}if(!j.offsetHeight){var n=this._realfake?this._fake.rowsAr[j.parentNode.idd]:j.parentNode;e=this.rowsBuffer._dhx_find(n)*this._srdh;}else{e=j.offsetTop;}var m=e+j.offsetHeight+38;if(m>(this.objBox.offsetHeight+this.objBox.scrollTop)){var f=e;}else{if(e<this.objBox.scrollTop){var f=e-5;}}if(f){this.objBox.scrollTop=f;}}catch(l){}};this.editCell=function(){if(this.editor&&this.cell==this.editor.cell){return;}this.editStop();if((this.isEditable!=true)||(!this.cell)){return false;}var e=this.cell;if(e.parentNode._locked){return false;}this.editor=this.cells4(e);if(this.editor!=null){if(this.editor.isDisabled()){this.editor=null;return false;}if(this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])!=false&&this.editor.edit){this._Opera_stop=(new Date).valueOf();e.className+=" editable";this.editor.edit();this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex]);}else{this.editor=null;}}};this.editStop=function(j){if(_isOpera){if(this._Opera_stop){if((this._Opera_stop*1+50)>(new Date).valueOf()){return;}this._Opera_stop=null;}}if(this.editor&&this.editor!=null){this.editor.cell.className=this.editor.cell.className.replace("editable","");if(j){var e=this.editor.val;this.editor.detach();this.editor.setValue(e);this.editor=null;this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,e]);return;}if(this.editor.detach()){this.cell.wasChanged=true;}var f=this.editor;this.editor=null;var h=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,f.getValue(),f.val]);if((typeof(h)=="string")||(typeof(h)=="number")){f[f.setImage?"setLabel":"setValue"](h);}else{if(!h){f[f.setImage?"setLabel":"setValue"](f.val);}}if(this._ahgr&&this.multiLine){this.setSizes();}}};this._nextRowCell=function(f,e,g){f=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(f),e);if(!f){return null;}return f.childNodes[f._childIndexes?f._childIndexes[g]:g];};this._getNextCell=function(h,e,g){h=h||this.cell;var f=h.parentNode;if(this._tabOrder){g=this._tabOrder[h._cellIndex];if(typeof g!="undefined"){if(g<0){h=this._nextRowCell(f,e,Math.abs(g)-1);}else{h=f.childNodes[g];}}}else{var g=h._cellIndex+e;if(g>=0&&g<this._cCount){if(f._childIndexes){g=f._childIndexes[h._cellIndex]+e;}h=f.childNodes[g];}else{h=this._nextRowCell(f,e,(e==1?0:(this._cCount-1)));}}if(!h){if((e==1)&&this.tabEnd){this.tabEnd.focus();this.tabEnd.focus();this.setActive(false);}if((e==-1)&&this.tabStart){this.tabStart.focus();this.tabStart.focus();this.setActive(false);}return null;}if(h.style.display!="none"&&(!this.smartTabOrder||!this.cells(h.parentNode.idd,h._cellIndex).isDisabled())){return h;}return this._getNextCell(h,e);};this._nextRow=function(g,e){var f=this.render_row(g+e);if(!f||f==-1){return null;}if(f&&f.style.display=="none"){return this._nextRow(g+e,e);}return f;};this.scrollPage=function(e){if(!this.rowsBuffer.length){return;}var f=this._realfake?this._fake:this;var g=Math.floor((f._r_select||this.getRowIndex(this.row.idd)||0)+(e)*this.objBox.offsetHeight/(this._srdh||20));if(g<0){g=0;}if(g>=this.rowsBuffer.length){g=this.rowsBuffer.length-1;}if(this._srnd&&!this.rowsBuffer[g]){this.objBox.scrollTop+=Math.floor((e)*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20);if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop;}f._r_select=g;}else{this.selectCell(g,this.cell._cellIndex,true,false,false,(this.multiLine||this._srnd));if(!this.multiLine&&!this._srnd&&!this._realfake){this.objBox.scrollTop=this.getRowById(this.getRowId(g)).offsetTop;if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop;}}f._r_select=null;}};this.doKey=function(g){if(!g){return true;}if((g.target||g.srcElement).value!==window.undefined){var e=(g.target||g.srcElement);if((!e.parentNode)||(e.parentNode.className.indexOf("editable")==-1)){return true;}}if((globalActiveDHTMLGridObject)&&(this!=globalActiveDHTMLGridObject)){return globalActiveDHTMLGridObject.doKey(g);}if(this.isActive==false){return true;}if(this._htkebl){return true;}if(!this.callEvent("onKeyPress",[g.keyCode,g.ctrlKey,g.shiftKey,g])){return false;}var f="k"+g.keyCode+"_"+(g.ctrlKey?1:0)+"_"+(g.shiftKey?1:0);if(this.cell){if(this._key_events[f]){if(false===this._key_events[f].call(this)){return true;}if(g.preventDefault){g.preventDefault();}g.cancelBubble=true;return false;}if(this._key_events.k_other){this._key_events.k_other.call(this,g);}}return true;};this.selectRow=function(g,h,f,e){if(typeof(g)!="object"){g=this.render_row(g);}this.selectCell(g,0,h,f,false,e);};this.wasDblClicked=function(f){var e=this.getFirstParentOfType(_isIE?f.srcElement:f.target,"TD");if(e){var g=e.parentNode.idd;return this.callEvent("onRowDblClicked",[g,e._cellIndex,f]);}};this._onHeaderClick=function(h,f){var g=this.grid;f=f||g.getFirstParentOfType(_isIE?event.srcElement:h.target,"TD");if(this.grid.resized==null){if(!(this.grid.callEvent("onHeaderClick",[f._cellIndexS,(h||window.event)]))){return false;}g.sortField(f._cellIndexS,false,f);}this.grid.resized=null;};this.deleteSelectedRows=function(){var f=this.selectedRows.length;if(f==0){return;}var e=this.selectedRows;this.selectedRows=dhtmlxArray();for(var g=f-1;g>=0;g--){var h=e[g];if(!this.deleteRow(h.idd,h)){this.selectedRows[this.selectedRows.length]=h;}else{if(h==this.row){var j=g;}}}if(j){try{if(j+1>this.rowsCol.length){j--;}this.selectCell(j,0,true);}catch(k){this.row=null;this.cell=null;}}};this.getSelectedRowId=function(){var e=new Array(0);var g={};for(var f=0;f<this.selectedRows.length;f++){var h=this.selectedRows[f].idd;if(g[h]){continue;}e[e.length]=h;g[h]=true;}if(e.length==0){return null;}else{return e.join(this.delim);}};this.getSelectedCellIndex=function(){if(this.cell!=null){return this.cell._cellIndex;}else{return -1;}};this.getColWidth=function(e){return parseInt(this.cellWidthPX[e]);};this.setColWidth=function(f,e){if(e=="*"){this.initCellWidth[f]="*";}else{if(this._hrrar[f]){return;}if(this.cellWidthType=="px"){this.cellWidthPX[f]=parseInt(e);}else{this.cellWidthPC[f]=parseInt(e);}}this.setSizes();};this.getRowIndex=function(e){for(var f=0;f<this.rowsBuffer.length;f++){if(this.rowsBuffer[f]&&this.rowsBuffer[f].idd==e){return f;}}return -1;};this.getRowId=function(e){return this.rowsBuffer[e]?this.rowsBuffer[e].idd:this.undefined;};this.setRowId=function(f,e){this.changeRowId(this.getRowId(f),e);};this.changeRowId=function(g,j){if(g==j){return;}var h=this.rowsAr[g];h.idd=j;if(this.UserData[g]){this.UserData[j]=this.UserData[g];this.UserData[g]=null;}if(this._h2&&this._h2.get[g]){this._h2.get[j]=this._h2.get[g];this._h2.get[j].id=j;delete this._h2.get[g];}this.rowsAr[g]=null;this.rowsAr[j]=h;for(var f=0;f<h.childNodes.length;f++){if(h.childNodes[f]._code){h.childNodes[f]._code=this._compileSCL(h.childNodes[f]._val,h.childNodes[f]);}}if(this._mat_links&&this._mat_links[g]){var e=this._mat_links[g];delete this._mat_links[g];for(var k in e){for(var f=0;f<e[k].length;f++){this._compileSCL(e[k][f].original,e[k][f]);}}}this.callEvent("onRowIdChange",[g,j]);};this.setColumnIds=function(e){this.columnIds=e.split(this.delim);};this.setColumnId=function(e,f){this.columnIds[e]=f;};this.getColIndexById=function(f){for(var e=0;e<this.columnIds.length;e++){if(this.columnIds[e]==f){return e;}}};this.getColumnId=function(e){return this.columnIds[e];};this.getColumnLabel=function(e,g,j){var h=(j||this.hdr).rows[(g||0)+1];for(var f=0;f<h.cells.length;f++){if(h.cells[f]._cellIndexS==e){return(_isIE?h.cells[f].innerText:h.cells[f].textContent);}}return"";};this.getColLabel=this.getColumnLabel;this.getFooterLabel=function(e,f){return this.getColumnLabel(e,f,this.ftr);};this.setRowTextBold=function(e){var f=this.getRowById(e);if(f){f.style.fontWeight="bold";}};this.setRowTextStyle=function(f,e){var j=this.getRowById(f);if(!j){return;}for(var g=0;g<j.childNodes.length;g++){var h=j.childNodes[g]._attrs.style||"";if(_isIE){j.childNodes[g].style.cssText=h+"width:"+j.childNodes[g].style.width+";"+e;}else{j.childNodes[g].style.cssText=h+"width:"+j.childNodes[g].style.width+";"+e;}}};this.setRowColor=function(f,e){var h=this.getRowById(f);for(var g=0;g<h.childNodes.length;g++){h.childNodes[g].bgColor=e;}};this.setCellTextStyle=function(g,k,f){var j=this.getRowById(g);if(!j){return;}var e=j.childNodes[j._childIndexes?j._childIndexes[k]:k];if(!e){return;}var h="";if(_isIE){e.style.cssText=h+"width:"+e.style.width+";"+f;}else{e.style.cssText=h+"width:"+e.style.width+";"+f;}};this.setRowTextNormal=function(e){var f=this.getRowById(e);if(f){f.style.fontWeight="normal";}};this.doesRowExist=function(e){if(this.getRowById(e)!=null){return true;}else{return false;}};this.getColumnsNum=function(){return this._cCount;};this.moveRowUp=function(f){var h=this.getRowById(f);if(this.isTreeGrid()){return this.moveRowUDTG(f,-1);}var e=this.rowsCol._dhx_find(h);if((h.previousSibling)&&(e!=0)){h.parentNode.insertBefore(h,h.previousSibling);this.rowsCol._dhx_swapItems(e,e-1);this.setSizes();var g=this.rowsBuffer._dhx_find(h);this.rowsBuffer._dhx_swapItems(g,g-1);if(this._cssEven){this._fixAlterCss(e-1);}}};this.moveRowDown=function(f){var h=this.getRowById(f);if(this.isTreeGrid()){return this.moveRowUDTG(f,1);}var e=this.rowsCol._dhx_find(h);if(h.nextSibling){this.rowsCol._dhx_swapItems(e,e+1);if(h.nextSibling.nextSibling){h.parentNode.insertBefore(h,h.nextSibling.nextSibling);}else{h.parentNode.appendChild(h);}this.setSizes();var g=this.rowsBuffer._dhx_find(h);this.rowsBuffer._dhx_swapItems(g,g+1);if(this._cssEven){this._fixAlterCss(e);}}};this.getCombo=function(e){if(!this.combos[e]){this.combos[e]=new dhtmlXGridComboObject();}return this.combos[e];};this.setUserData=function(f,e,g){if(!f){f="gridglobaluserdata";}if(!this.UserData[f]){this.UserData[f]=new Hashtable();}this.UserData[f].put(e,g);};this.getUserData=function(f,e){if(!f){f="gridglobaluserdata";}this.getRowById(f);var g=this.UserData[f];return(g?g.get(e):"");};this.setEditable=function(e){this.isEditable=convertStringToBoolean(e);};this.selectRowById=function(f,g,e,h){if(!h){h=false;}this.selectCell(this.getRowById(f),0,h,g,false,e);};this.clearSelection=function(){this.editStop();for(var e=0;e<this.selectedRows.length;e++){var f=this.rowsAr[this.selectedRows[e].idd];if(f){f.className=f.className.replace(/rowselected/g,"");}}this.selectedRows=dhtmlxArray();this.row=null;if(this.cell!=null){this.cell.className=this.cell.className.replace(/cellselected/g,"");this.cell=null;}this.callEvent("onSelectionCleared",[]);};this.copyRowContent=function(g,h){var e=this.getRowById(g);if(!this.isTreeGrid()){for(var f=0;f<e.cells.length;f++){this.cells(h,f).setValue(this.cells(g,f).getValue());}}else{this._copyTreeGridRowContent(e,g,h);}if(!_isIE){this.getRowById(g).cells[0].height=e.cells[0].offsetHeight;}};this.setFooterLabel=function(g,e,f){return this.setColumnLabel(g,e,f,this.ftr);};this.setColumnLabel=function(j,n,e,p){var k=(p||this.hdr).rows[e||1];var f=(k._childIndexes?k._childIndexes[j]:j);if(!k.cells[f]){return;}if(!this.useImagesInHeader){var h="<div class='hdrcell'>";if(n.indexOf("img:[")!=-1){var g=n.replace(/.*\[([^>]+)\].*/,"$1");n=n.substr(n.indexOf("]")+1,n.length);h+="<img width='18px' height='18px' align='absmiddle' src='"+g+"' hspace='2'>";}h+=n;h+="</div>";k.cells[f].innerHTML=h;if(this._hstyles[f]){k.cells[f].style.cssText=this._hstyles[f];}}else{k.cells[f].style.textAlign="left";k.cells[f].innerHTML="<img src='"+this.imgURL+""+n+"' onerror='this.src = \""+this.imgURL+"imageloaderror.gif\"'>";var m=new Image();m.src=this.imgURL+""+n.replace(/(\.[a-z]+)/,".des$1");this.preloadImagesAr[this.preloadImagesAr.length]=m;var l=new Image();l.src=this.imgURL+""+n.replace(/(\.[a-z]+)/,".asc$1");this.preloadImagesAr[this.preloadImagesAr.length]=l;}if((n||"").indexOf("#")!=-1){var q=n.match(/(^|{)#([^}]+)(}|$)/);if(q){var o="_in_header_"+q[2];if(this[o]){this[o]((this.forceDivInHeader?k.cells[f].firstChild:k.cells[f]),f,n.split(q[0]));}}}};this.setColLabel=function(f,e,g,h){return this.setColumnLabel(f,e,(g||0)+1,h);};this.clearAll=function(h){if(!this.obj.rows[0]){return;}if(this._h2){this._h2=new dhtmlxHierarchy();if(this._fake){if(this._realfake){this._h2=this._fake._h2;}else{this._fake._h2=this._h2;}}}this.limit=this._limitC=0;this.editStop(true);if(this._dLoadTimer){window.clearTimeout(this._dLoadTimer);}if(this._dload){this.objBox.scrollTop=0;this.limit=this._limitC||0;this._initDrF=true;}var e=this.rowsCol.length;e=this.obj.rows.length;for(var f=e-1;f>0;f--){var g=this.obj.rows[f];g.parentNode.removeChild(g);}if(h){this._master_row=null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(var f=this.hdr.rows.length-1;f>=0;f--){var g=this.hdr.rows[f];g.parentNode.removeChild(g);}if(this.ftr){this.ftr.parentNode.removeChild(this.ftr);this.ftr=null;}this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this._strangeParams=[];this.defVal=[];this._ivizcol=null;}this.row=null;this.cell=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=dhtmlxArray();this.UserData=[];this.selectedRows=dhtmlxArray();if(this.pagingOn||this._srnd){this.xmlFileUrl="";}if(this.pagingOn){this.changePage(1);}if(this._contextCallTimer){window.clearTimeout(this._contextCallTimer);}if(this._sst){this.enableStableSorting(true);}this._fillers=this.undefined;this.setSortImgState(false);this.setSizes();this.callEvent("onClearAll",[]);};this.sortField=function(h,n,f){if(this.getRowsNum()==0){return false;}var g=this.hdr.rows[0].cells[h];if(!g){return;}if(g.tagName=="TH"&&(this.fldSort.length-1)>=g._cellIndex&&this.fldSort[g._cellIndex]!="na"){var k=this.getSortingState();var j=(k[0]==h&&k[1]=="asc")?"des":"asc";if(!this.callEvent("onBeforeSorting",[h,this.fldSort[h],j])){return;}this.sortImg.src=this.imgURL+"sort_"+(j=="asc"?"asc":"desc")+".gif";if(this.useImagesInHeader){var m=this.hdr.rows[1].cells[g._cellIndex].firstChild;if(this.fldSorted!=null){var o=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;o.src=o.src.replace(/(\.asc\.)|(\.des\.)/,".");}m.src=m.src.replace(/(\.[a-z]+)$/,"."+j+"$1");}this.sortRows(g._cellIndex,this.fldSort[g._cellIndex],j);this.fldSorted=g;this.r_fldSorted=f;var l=this.hdr.rows[1];var l=f.parentNode;var e=l._childIndexes?l._childIndexes[g._cellIndex]:g._cellIndex;this.setSortImgPos(false,false,false,f);}};this.enableHeaderImages=function(e){this.useImagesInHeader=e;};this.setHeader=function(h,o,n){if(typeof(h)!="object"){var j=this._eSplit(h);}else{j=[].concat(h);}var e=new Array(0);var f=new dhtmlxArray(0);var m=new Array(0);var l=new Array(0);var g=new Array(0);for(var k=0;k<j.length;k++){e[e.length]=Math.round(100/j.length);f[f.length]="ed";m[m.length]="left";l[l.length]="middle";g[g.length]="na";}this.splitSign=o||"#cspan";this.hdrLabels=j;this.cellWidth=e;if(!this.initCellWidth.length){this.setInitWidthsP(e.join(this.delim),true);}this.cellType=f;this.cellAlign=m;this.cellVAlign=l;this.fldSort=g;this._hstyles=n||[];};this._eSplit=function(g){if(![].push){return g.split(this.delim);}var e="r"+(new Date()).valueOf();var f=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(g||"").replace(RegExp(f,"g"),e).replace(RegExp("\\\\"+e,"g"),this.delim).split(e);};this.getColType=function(e){return this.cellType[e];};this.getColTypeById=function(e){return this.cellType[this.getColIndexById(e)];};this.setColTypes=function(e){this.cellType=dhtmlxArray(e.split(this.delim));this._strangeParams=new Array();for(var f=0;f<this.cellType.length;f++){if((this.cellType[f].indexOf("[")!=-1)){var g=this.cellType[f].split(/[\[\]]+/g);this.cellType[f]=g[0];this.defVal[f]=g[1];if(g[1].indexOf("=")==0){this.cellType[f]="math";this._strangeParams[f]=g[0];}}if(!window["eXcell_"+this.cellType[f]]){dhtmlxError.throwError("Configuration","Incorrect cell type: "+this.cellType[f],[this,this.cellType[f]]);}}};this.setColSorting=function(e){this.fldSort=e.split(this.delim);};this.setColAlign=function(f){this.cellAlign=f.split(this.delim);for(var e=0;e<this.cellAlign.length;e++){this.cellAlign[e]=this.cellAlign[e]._dhx_trim();}};this.setColVAlign=function(e){this.cellVAlign=e.split(this.delim);};this.setNoHeader=function(e){this.noHeader=convertStringToBoolean(e);};this.showRow=function(e){this.getRowById(e);if(this._h2){this.openItem(this._h2.get[e].parent.id);}var f=this.getRowById(e).childNodes[0];while(f&&f.style.display=="none"){f=f.nextSibling;}if(f){this.moveToVisible(f,true);}};this.setStyle=function(h,k,g,f){this.ssModifier=[h,k,g,g,f];var o=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"];var l=0;while(!_isIE){try{var n=document.styleSheets[l].cssRules.length;}catch(m){l++;continue;}break;}for(var j=0;j<o.length;j++){if(this.ssModifier[j]){if(_isIE){document.styleSheets[0].addRule(o[j],this.ssModifier[j]);}else{document.styleSheets[l].insertRule(o[j]+(" { "+this.ssModifier[j]+" }"),document.styleSheets[l].cssRules.length);}}}};this.setColumnColor=function(e){this.columnColor=e.split(this.delim);};this.enableAlterCss=function(h,e,f,g){if(h||e){this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();if(this._fake){this._fake._fixAlterCss();}});}this._cssSP=f;this._cssSU=g;this._cssEven=h;this._cssUnEven=e;};this._fixAlterCss=function(g){if(this._h2&&(this._cssSP||this._cssSU)){return this._fixAlterCssTGR(g);}if(!this._cssEven&&!this._cssUnEven){return;}g=g||0;var e=g;for(var f=g;f<this.rowsCol.length;f++){if(!this.rowsCol[f]){continue;}if(this.rowsCol[f].style.display!="none"){if(this.rowsCol[f]._cntr){e=1;continue;}if(this.rowsCol[f].className.indexOf("rowselected")!=-1){if(e%2==1){this.rowsCol[f].className=this._cssUnEven+" rowselected "+(this.rowsCol[f]._css||"");}else{this.rowsCol[f].className=this._cssEven+" rowselected "+(this.rowsCol[f]._css||"");}}else{if(e%2==1){this.rowsCol[f].className=this._cssUnEven+" "+(this.rowsCol[f]._css||"");}else{this.rowsCol[f].className=this._cssEven+" "+(this.rowsCol[f]._css||"");}}e++;}}};this.getPosition=function(j,f){if(!f){var k=getOffset(j);return[k.left,k.top];}f=f||document.body;var e=j;var h=0;var g=0;while((e)&&(e!=f)){h+=e.offsetLeft-e.scrollLeft;g+=e.offsetTop-e.scrollTop;e=e.offsetParent;}if(f==document.body){if(_isIE){g+=document.body.offsetTop||document.documentElement.offsetTop;h+=document.body.offsetLeft||document.documentElement.offsetLeft;}else{if(!_isFF){h+=document.body.offsetLeft;g+=document.body.offsetTop;}}}return[h,g];};this.getFirstParentOfType=function(f,e){while(f&&f.tagName!=e&&f.tagName!="BODY"){f=f.parentNode;}return f;};this.objBox.onscroll=function(){this.grid._doOnScroll();};this.objBox.ontouchend=function(){this.hdrBox.scrollLeft=this.objBox.scrollLeft;};this.hdrBox.onscroll=function(){if(this._try_header_sync){return;}this._try_header_sync=true;if(this.grid.objBox.scrollLeft!=this.scrollLeft){this.grid.objBox.scrollLeft=this.scrollLeft;}this._try_header_sync=false;};if((!_isOpera)||(_OperaRv>8.5)){this.hdr.onmousemove=function(f){this.grid.changeCursorState(f||window.event);};this.hdr.onmousedown=function(f){return this.grid.startColResize(f||window.event);};}this.obj.onmousemove=this._drawTooltip;this.objBox.onclick=function(f){(f||event).cancelBubble=true;};this.obj.onclick=function(f){this.grid._doClick(f||window.event);if(this.grid._sclE){this.grid.editCell(f||window.event);}else{this.grid.editStop();}(f||event).cancelBubble=true;};if(_isMacOS){this.entBox.oncontextmenu=function(g){g.cancelBubble=true;g.returnValue=false;var f=this.grid;if(f._realfake){f=f._fake;}return f._doContClick(g||window.event);};}else{this.entBox.onmousedown=function(f){return this.grid._doContClick(f||window.event);};this.entBox.oncontextmenu=function(f){if(this.grid._ctmndx){(f||event).cancelBubble=true;}return !this.grid._ctmndx;};}this.obj.ondblclick=function(f){if(!this.grid.wasDblClicked(f||window.event)){return false;}if(this.grid._dclE){var g=this.grid.getFirstParentOfType((_isIE?event.srcElement:f.target),"TR");if(g==this.grid.row){this.grid.editCell(f||window.event);}}(f||event).cancelBubble=true;if(_isOpera){return false;}};this.hdr.onclick=this._onHeaderClick;this.sortImg.onclick=function(){a._onHeaderClick.apply({grid:a},[null,a.r_fldSorted]);};this.hdr.ondblclick=this._onHeaderDblClick;if(!document.body._dhtmlxgrid_onkeydown){dhtmlxEvent(document,"keydown",function(f){if(globalActiveDHTMLGridObject){return globalActiveDHTMLGridObject.doKey(f||window.event);}});document.body._dhtmlxgrid_onkeydown=true;}dhtmlxEvent(document.body,"click",function(){if(a.editStop){a.editStop();}if(a.isActive){a.setActive(false);}});this.entBox.onbeforeactivate=function(){this._still_active=null;this.grid.setActive();event.cancelBubble=true;};this.entBox.onbeforedeactivate=function(){if(this.grid._still_active){this.grid._still_active=null;}else{this.grid.isActive=false;}event.cancelBubble=true;};if(this.entBox.style.height.toString().indexOf("%")!=-1){this._delta_y=this.entBox.style.height;}if(this.entBox.style.width.toString().indexOf("%")!=-1){this._delta_x=this.entBox.style.width;}if(this._delta_x||this._delta_y){this._setAutoResize();}this.setColHidden=this.setColumnsVisibility;this.enableCollSpan=this.enableColSpan;this.setMultiselect=this.enableMultiselect;this.setMultiLine=this.enableMultiline;this.deleteSelectedItem=this.deleteSelectedRows;this.getSelectedId=this.getSelectedRowId;this.getHeaderCol=this.getColumnLabel;this.isItemExists=this.doesRowExist;this.getColumnCount=this.getColumnsNum;this.setSelectedRow=this.selectRowById;this.setHeaderCol=this.setColumnLabel;this.preventIECashing=this.preventIECaching;this.enableAutoHeigth=this.enableAutoHeight;this.getUID=this.uid;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path);}if(dhtmlx.skin){this.setSkin(dhtmlx.skin);}return this;}dhtmlXGridObject.prototype={getRowAttribute:function(b,a){return this.getRowById(b)._attrs[a];},setRowAttribute:function(c,a,b){this.getRowById(c)._attrs[a]=b;},isTreeGrid:function(){return(this.cellType._dhx_find("tree")!=-1);},setRowHidden:function(g,c){var b=convertStringToBoolean(c);var e=this.getRowById(g);if(!e){return;}if(e.expand===""){this.collapseKids(e);}if((c)&&(e.style.display!="none")){e.style.display="none";var d=this.selectedRows._dhx_find(e);if(d!=-1){e.className=e.className.replace("rowselected","");for(var a=0;a<e.childNodes.length;a++){e.childNodes[a].className=e.childNodes[a].className.replace(/cellselected/g,"");}this.selectedRows._dhx_removeAt(d);}this.callEvent("onGridReconstructed",[]);}if((!c)&&(e.style.display=="none")){e.style.display="";this.callEvent("onGridReconstructed",[]);}this.callEvent("onRowHide",[g,c]);this.setSizes();},enableRowsHover:function(b,a){this._unsetRowHover(false,true);this._hvrCss=a;if(convertStringToBoolean(b)){if(!this._elmnh){this.obj._honmousemove=this.obj.onmousemove;this.obj.onmousemove=this._setRowHover;if(_isIE){this.obj.onmouseleave=this._unsetRowHover;}else{this.obj.onmouseout=this._unsetRowHover;}this._elmnh=true;}}else{if(this._elmnh){this.obj.onmousemove=this.obj._honmousemove;if(_isIE){this.obj.onmouseleave=null;}else{this.obj.onmouseout=null;}this._elmnh=false;}}},enableEditEvents:function(b,c,a){this._sclE=convertStringToBoolean(b);this._dclE=convertStringToBoolean(c);this._f2kE=convertStringToBoolean(a);},enableLightMouseNavigation:function(a){if(convertStringToBoolean(a)){if(!this._elmn){this.entBox._onclick=this.entBox.onclick;this.entBox.onclick=function(){return true;};this.obj._onclick=this.obj.onclick;this.obj.onclick=function(b){var d=this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");if(!d){return;}this.grid.editStop();this.grid.doClick(d);this.grid.editCell();(b||event).cancelBubble=true;};this.obj._onmousemove=this.obj.onmousemove;this.obj.onmousemove=this._autoMoveSelect;this._elmn=true;}}else{if(this._elmn){this.entBox.onclick=this.entBox._onclick;this.obj.onclick=this.obj._onclick;this.obj.onmousemove=this.obj._onmousemove;this._elmn=false;}}},_unsetRowHover:function(b,d){if(d){that=this;}else{that=this.grid;}if((that._lahRw)&&(that._lahRw!=d)){for(var a=0;a<that._lahRw.childNodes.length;a++){that._lahRw.childNodes[a].className=that._lahRw.childNodes[a].className.replace(that._hvrCss,"");}that._lahRw=null;}},_setRowHover:function(b){var d=this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");if(d&&d.parentNode!=this.grid._lahRw){this.grid._unsetRowHover(0,d);d=d.parentNode;if(!d.idd||d.idd=="__filler__"){return;}for(var a=0;a<d.childNodes.length;a++){d.childNodes[a].className+=" "+this.grid._hvrCss;}this.grid._lahRw=d;}this._honmousemove(b);},_autoMoveSelect:function(a){if(!this.grid.editor){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(b.parentNode.idd){this.grid.doClick(b,true,0);}}this._onmousemove(a);},destructor:function(){this.editStop(true);if(this._sizeTime){this._sizeTime=window.clearTimeout(this._sizeTime);}this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,"");if(this.formInputs){for(var c=0;c<this.formInputs.length;c++){this.parentForm.removeChild(this.formInputs[c]);}}var b;this.xmlLoader=this.xmlLoader.destructor();for(var c=0;c<this.rowsCol.length;c++){if(this.rowsCol[c]){this.rowsCol[c].grid=null;}}for(c in this.rowsAr){if(this.rowsAr[c]){this.rowsAr[c]=null;}}this.rowsCol=new dhtmlxArray();this.rowsAr={};this.entBox.innerHTML="";var d=function(){};this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=d;this.setSizes=this._update_srnd_view=this.callEvent=d;this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;if(this._fake){this.globalBox.innerHTML="";this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=d;this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=d;}for(b in this){if((this[b])&&(this[b].m_obj)){this[b].m_obj=null;}this[b]=null;}if(this==globalActiveDHTMLGridObject){globalActiveDHTMLGridObject=null;}return null;},getSortingState:function(){var a=new Array();if(this.fldSorted){a[0]=this.fldSorted._cellIndex;a[1]=(this.sortImg.src.indexOf("sort_desc.gif")!=-1)?"des":"asc";}return a;},enableAutoHeight:function(c,b,a){this._ahgr=convertStringToBoolean(c);this._ahgrF=convertStringToBoolean(a);this._ahgrM=b||null;if(arguments.length==1){this.objBox.style.overflowY=c?"hidden":"auto";}if(b=="auto"){this._ahgrM=null;this._ahgrMA=true;this._setAutoResize();}},enableStableSorting:function(a){this._sst=convertStringToBoolean(a);this.rowsCol.stablesort=function(f){var e=this.length-1;for(var d=0;d<this.length-1;d++){for(var c=0;c<e;c++){if(f(this[c],this[c+1])>0){var b=this[c];this[c]=this[c+1];this[c+1]=b;}}e--;}};},enableKeyboardSupport:function(a){this._htkebl=!convertStringToBoolean(a);},enableContextMenu:function(a){this._ctmndx=a;},setScrollbarWidthCorrection:function(a){},enableTooltips:function(b){this._enbTts=b.split(",");for(var a=0;a<this._enbTts.length;a++){this._enbTts[a]=convertStringToBoolean(this._enbTts[a]);}},enableResizing:function(b){this._drsclmn=b.split(",");for(var a=0;a<this._drsclmn.length;a++){this._drsclmn[a]=convertStringToBoolean(this._drsclmn[a]);}},setColumnMinWidth:function(a,b){if(arguments.length==2){if(!this._drsclmW){this._drsclmW=new Array();}this._drsclmW[b]=a;}else{this._drsclmW=a.split(",");}},enableCellIds:function(a){this._enbCid=convertStringToBoolean(a);},lockRow:function(a,c){var b=this.getRowById(a);if(b){b._locked=convertStringToBoolean(c);if((this.cell)&&(this.cell.parentNode.idd==a)){this.editStop();}}},_getRowArray:function(e){var d=new Array();for(var c=0;c<e.childNodes.length;c++){var b=this.cells3(e,c);d[c]=b.getValue();}return d;},_launchCommands:function(a){for(var d=0;d<a.length;d++){var c=new Array();for(var b=0;b<a[d].childNodes.length;b++){if(a[d].childNodes[b].nodeType==1){c[c.length]=a[d].childNodes[b].firstChild.data;}}this[a[d].getAttribute("command")].apply(this,c);}},_parseHead:function(e){var d=this.xmlLoader.doXPath("./head",e);if(d.length){var f=this.xmlLoader.doXPath("./column",d[0]);var g=this.xmlLoader.doXPath("./settings",d[0]);var t="setInitWidths";var o=false;if(g[0]){for(var h=0;h<g[0].childNodes.length;h++){switch(g[0].childNodes[h].tagName){case"colwidth":if(g[0].childNodes[h].firstChild&&g[0].childNodes[h].firstChild.data=="%"){t="setInitWidthsP";}break;case"splitat":o=(g[0].childNodes[h].firstChild?g[0].childNodes[h].firstChild.data:false);break;}}}this._launchCommands(this.xmlLoader.doXPath("./beforeInit/call",d[0]));if(f.length>0){if(this.hdr.rows.length>0){this.clearAll(true);}var a=[[],[],[],[],[],[],[],[],[]];var n=["","width","type","align","sort","color","format","hidden","id"];var m=["",t,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"];for(var r=0;r<f.length;r++){for(var q=1;q<n.length;q++){a[q].push(f[r].getAttribute(n[q]));}a[0].push((f[r].firstChild?f[r].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"));}this.setHeader(a[0]);for(var r=0;r<m.length;r++){if(m[r]){this[m[r]](a[r].join(this.delim));}}for(var r=0;r<f.length;r++){if((this.cellType[r].indexOf("co")==0)||(this.cellType[r]=="clist")){var k=this.xmlLoader.doXPath("./option",f[r]);if(k.length){var p=new Array();if(this.cellType[r]=="clist"){for(var q=0;q<k.length;q++){p[p.length]=k[q].firstChild?k[q].firstChild.data:"";}this.registerCList(r,p);}else{var u=this.getCombo(r);for(var q=0;q<k.length;q++){u.put(k[q].getAttribute("value"),k[q].firstChild?k[q].firstChild.data:"");}}}}else{if(a[6][r]){if((this.cellType[r].toLowerCase().indexOf("calendar")!=-1)||(this.fldSort[r]=="date")){this.setDateFormat(a[6][r]);}else{this.setNumberFormat(a[6][r],r);}}}}this.init();var c=a[7].join(this.delim);if(this.setColHidden&&c.replace(/,/g,"")!=""){this.setColHidden(c);}if((o)&&(this.splitAt)){this.splitAt(o);}}this._launchCommands(this.xmlLoader.doXPath("./afterInit/call",d[0]));}var b=this.xmlLoader.doXPath("//rows/userdata",e);if(b.length>0){if(!this.UserData.gridglobaluserdata){this.UserData.gridglobaluserdata=new Hashtable();}for(var q=0;q<b.length;q++){var v="";for(var l=0;l<b[q].childNodes.length;l++){v+=b[q].childNodes[l].nodeValue;}this.UserData.gridglobaluserdata.put(b[q].getAttribute("name"),v);}}},getCheckedRows:function(a){var b=new Array();this.forEachRowA(function(c){if(this.cells(c,a).getValue()!=0){b.push(c);}},true);return b.join(",");},checkAll:function(){var b=arguments.length?arguments[0]:1;for(var a=0;a<this.getColumnsNum();a++){if(this.getColType(a)=="ch"){this.setCheckedRows(a,b);}}},uncheckAll:function(){this.checkAll(0);},setCheckedRows:function(b,a){this.forEachRowA(function(c){if(this.cells(c,b).isCheckbox()){this.cells(c,b).setValue(a);}});},_drawTooltip:function(f){var g=this.grid.getFirstParentOfType(f?f.target:event.srcElement,"TD");if(!g||((this.grid.editor)&&(this.grid.editor.cell==g))){return true;}var d=g.parentNode;if(!d.idd||d.idd=="__filler__"){return;}var b=(f?f.target:event.srcElement);if(d.idd==window.unknown){return true;}if(!this.grid.callEvent("onMouseOver",[d.idd,g._cellIndex,(f||window.event)])){return true;}if((this.grid._enbTts)&&(!this.grid._enbTts[g._cellIndex])){if(b.title){b.title="";}return true;}if(g._cellIndex>=this.grid._cCount){return;}var a=this.grid.cells3(d,g._cellIndex);if(!a||!a.cell||!a.cell._attrs){return;}if(b._title){a.cell.title="";}if(!a.cell._attrs.title){b._title=true;}return true;},enableCellWidthCorrection:function(a){if(_isFF){this._wcorr=parseInt(a);}},getAllRowIds:function(c){var a=[];for(var b=0;b<this.rowsBuffer.length;b++){if(this.rowsBuffer[b]){a.push(this.rowsBuffer[b].idd);}}return a.join(c||this.delim);},getAllItemIds:function(){return this.getAllRowIds();},preventIECaching:function(a){this.no_cashe=convertStringToBoolean(a);this.xmlLoader.rSeed=this.no_cashe;},enableColumnAutoSize:function(a){this._eCAS=convertStringToBoolean(a);},_onHeaderDblClick:function(c){var b=this.grid;var a=b.getFirstParentOfType(_isIE?event.srcElement:c.target,"TD");if(!b._eCAS){return false;}b.adjustColumnSize(a._cellIndexS);},adjustColumnSize:function(f,h){if(this._hrrar&&this._hrrar[f]){return;}this._notresize=true;var b=0;this._setColumnSizeR(f,20);for(var e=1;e<this.hdr.rows.length;e++){var d=this.hdr.rows[e];d=d.childNodes[(d._childIndexes)?d._childIndexes[f]:f];if((d)&&((!d.colSpan)||(d.colSpan<2))&&d._cellIndex==f){if((d.childNodes[0])&&(d.childNodes[0].className=="hdrcell")){d=d.childNodes[0];}b=Math.max(b,d.scrollWidth);}}var c=this.obj.rows.length;for(var g=1;g<c;g++){var k=this.obj.rows[g];if(!this.rowsAr[k.idd]){continue;}if(k._childIndexes&&k._childIndexes[f]!=f||!k.childNodes[f]){continue;}if(_isFF||_isOpera||h){k=k.childNodes[f].textContent.length*this.fontWidth;}else{k=k.childNodes[f].scrollWidth;}if(k>b){b=k;}}b+=20+(h||0);this._setColumnSizeR(f,b);this._notresize=false;this.setSizes();},detachHeader:function(a,c){c=c||this.hdr;var b=c.rows[a+1];if(b){b.parentNode.removeChild(b);}this.setSizes();},detachFooter:function(a){this.detachHeader(a,this.ftr);},attachHeader:function(a,d,b){if(typeof(a)=="string"){a=this._eSplit(a);}if(typeof(d)=="string"){d=d.split(this.delim);}b=b||"_aHead";if(this.hdr.rows.length){if(a){this._createHRow([a,d],this[(b=="_aHead")?"hdr":"ftr"]);}else{if(this[b]){for(var c=0;c<this[b].length;c++){this.attachHeader.apply(this,this[b][c]);}}}}else{if(!this[b]){this[b]=new Array();}this[b][this[b].length]=[a,d,b];}},_createHRow:function(c,l){if(!l){if(this.entBox.style.position!="absolute"){this.entBox.style.position="relative";}var g=document.createElement("DIV");g.className="c_ftr".substr(2);this.entBox.appendChild(g);var o=document.createElement("TABLE");o.cellPadding=o.cellSpacing=0;if(!_isIE||_isIE==8){o.width="100%";o.style.paddingRight="20px";}o.style.marginRight="20px";o.style.tableLayout="fixed";g.appendChild(o);o.appendChild(document.createElement("TBODY"));this.ftr=l=o;var f=o.insertRow(0);var a=((this.hdrLabels.length<=1)?c[0].length:this.hdrLabels.length);for(var d=0;d<a;d++){f.appendChild(document.createElement("TH"));f.childNodes[d]._cellIndex=d;}if(_isIE&&_isIE<8){f.style.position="absolute";}else{f.style.height="auto";}}var e=c[1];var g=document.createElement("TR");l.rows[0].parentNode.appendChild(g);for(var d=0;d<c[0].length;d++){if(c[0][d]=="#cspan"){var h=g.cells[g.cells.length-1];h.colSpan=(h.colSpan||1)+1;continue;}if((c[0][d]=="#rspan")&&(l.rows.length>1)){var q=l.rows.length-2;var p=false;var h=null;while(!p){var h=l.rows[q];for(var b=0;b<h.cells.length;b++){if(h.cells[b]._cellIndex==d){p=b+1;break;}}q--;}h=h.cells[p-1];h.rowSpan=(h.rowSpan||1)+1;continue;}var k=document.createElement("TD");k._cellIndex=k._cellIndexS=d;if(this._hrrar&&this._hrrar[d]&&!_isIE){k.style.display="none";}if(typeof c[0][d]=="object"){k.appendChild(c[0][d]);}else{if(this.forceDivInHeader){k.innerHTML="<div class='hdrcell'>"+(c[0][d]||"&nbsp;")+"</div>";}else{k.innerHTML=(c[0][d]||"&nbsp;");}if((c[0][d]||"").indexOf("#")!=-1){var o=c[0][d].match(/(^|{)#([^}]+)(}|$)/);if(o){var m="_in_header_"+o[2];if(this[m]){this[m]((this.forceDivInHeader?k.firstChild:k),d,c[0][d].split(o[0]));}}}}if(e){k.style.cssText=e[d];}g.appendChild(k);}var n=l;if(_isKHTML){if(l._kTimer){window.clearTimeout(l._kTimer);}l._kTimer=window.setTimeout(function(){l.rows[1].style.display="none";window.setTimeout(function(){l.rows[1].style.display="";},1);},500);}},forEachRow:function(c){for(var b in this.rowsAr){if(this.rowsAr[b]&&this.rowsAr[b].idd){c.apply(this,[this.rowsAr[b].idd]);}}},forEachRowA:function(c){for(var b=0;b<this.rowsBuffer.length;b++){if(this.rowsBuffer[b]){c.call(this,this.render_row(b).idd);}}},forEachCell:function(c,b){var d=this.getRowById(c);if(!d){return;}for(var a=0;a<this._cCount;a++){b(this.cells3(d,a),a);}},enableAutoWidth:function(c,a,b){this._awdth=[convertStringToBoolean(c),parseInt(a||99999),parseInt(b||0)];if(arguments.length==1){this.objBox.style.overflowX=c?"hidden":"auto";}},updateFromXML:function(a,d,b,c){if(typeof d=="undefined"){d=true;}this._refresh_mode=[true,d,b];this.load(a,c);},_refreshFromXML:function(d){if(this._f_rowsBuffer){this.filterBy(0,"");}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(m){var l=this.grid._h2.get[this.cell.parentNode.idd];if(l&&this.cell.parentNode.valTag){this.setLabel(m);}else{this.setValueX(m);}};}var k=this.cellType._dhx_find("tree");d.getXMLTopNode("rows");var e=d.doXPath("//rows")[0].getAttribute("parent")||0;var g={};if(this._refresh_mode[2]){if(k!=-1){this._h2.forEachChild(e,function(l){g[l.id]=true;},this);}else{this.forEachRow(function(l){g[l]=true;});}}var j=d.doXPath("//row");for(var c=0;c<j.length;c++){var h=j[c];var a=h.getAttribute("id");g[a]=false;var e=h.parentNode.getAttribute("id")||e;if(this.rowsAr[a]&&this.rowsAr[a].tagName!="TR"){if(this._h2){this._h2.get[a].buff.data=h;}else{this.rowsBuffer[this.getRowIndex(a)].data=h;}this.rowsAr[a]=h;}else{if(this.rowsAr[a]){this._process_xml_row(this.rowsAr[a],h,-1);this._postRowProcessing(this.rowsAr[a],true);}else{if(this._refresh_mode[1]){var f={idd:a,data:h,_parser:this._process_xml_row,_locator:this._get_xml_data};var b=this.rowsBuffer.length;if(this._refresh_mode[1]=="top"){this.rowsBuffer.unshift(f);b=0;}else{this.rowsBuffer.push(f);}if(this._h2){reset=true;(this._h2.add(a,(h.parentNode.getAttribute("id")||h.parentNode.getAttribute("parent")))).buff=this.rowsBuffer[this.rowsBuffer.length-1];}this.rowsAr[a]=h;h=this.render_row(b);this._insertRowAt(h,b?-1:0);}}}}if(this._refresh_mode[2]){for(a in g){if(g[a]&&this.rowsAr[a]){this.deleteRow(a);}}}this._refresh_mode=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX;}if(reset){this._renderSort();}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.filterByAll();}},getCustomCombo:function(c,b){var a=this.cells(c,b).cell;if(!a._combo){a._combo=new dhtmlXGridComboObject();}return a._combo;},setTabOrder:function(b){var d=b.split(this.delim);this._tabOrder=[];var a=this._cCount||b.length;for(var c=0;c<a;c++){d[c]={c:parseInt(d[c]),ind:c};}d.sort(function(f,e){return(f.c>e.c?1:-1);});for(var c=0;c<a;c++){if(!d[c+1]||(typeof d[c].c=="undefined")){this._tabOrder[d[c].ind]=(d[0].ind+1)*-1;}else{this._tabOrder[d[c].ind]=d[c+1].ind;}}},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a+1],this.cell._cellIndex,true);},k13_0_1:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a-1],this.cell._cellIndex,true);},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[(this.row?this.row.idd:null),(this.cell?this.cell._cellIndex:null)]);this._still_active=true;},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[true])){return true;}var a=this._getNextCell(null,1);if(a){this.selectCell(a.parentNode,a._cellIndex,(this.row!=a.parentNode),false,true);this._still_active=true;}},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[false])){return false;}var a=this._getNextCell(null,-1);if(a){this.selectCell(a.parentNode,a._cellIndex,(this.row!=a.parentNode),false,true);this._still_active=true;}},k113_0_0:function(){if(this._f2kE){this.editCell();}},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||(a.changeState()===false)){return false;}},k27_0_0:function(){this.editStop(true);},k33_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage-1);}else{this.scrollPage(-1);}},k34_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage+1);}else{this.scrollPage(1);}},k37_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.collapseKids(this.row);}else{return false;}},k39_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.expandKids(this.row);}else{return false;}},k40_0_0:function(){var b=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftNext();}else{if(!this.row.idd){return;}var a=Math.max((b._r_select||0),this.getRowIndex(this.row.idd));var c=this._nextRow(a,1);if(c){b._r_select=null;this.selectCell(c,this.cell._cellIndex,true);if(b.pagingOn){b.showRow(c.idd);}}else{if(!this.callEvent("onLastRow",[])){return false;}this._key_events.k34_0_0.apply(this,[]);if(this.pagingOn&&this.rowsCol[a+1]){this.selectCell(a+1,0,true);}}}this._still_active=true;},k38_0_0:function(){var b=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftPrev();}else{if(!this.row.idd){return;}var a=this.getRowIndex(this.row.idd)+1;if(a!=-1&&(!this.pagingOn||(a!=1))){var c=this._nextRow(a-1,-1);this.selectCell(c,this.cell._cellIndex,true);if(b.pagingOn&&c){b.showRow(c.idd);}}else{this._key_events.k33_0_0.apply(this,[]);}}this._still_active=true;}},_build_master_row:function(){var c=document.createElement("DIV");var b=["<table><tr>"];for(var a=0;a<this._cCount;a++){b.push("<td></td>");}b.push("</tr></table>");c.innerHTML=b.join("");this._master_row=c.firstChild.rows[0];},_prepareRow:function(a){if(!this._master_row){this._build_master_row();}var c=this._master_row.cloneNode(true);for(var b=0;b<c.childNodes.length;b++){c.childNodes[b]._cellIndex=b;if(this._enbCid){c.childNodes[b].id="c_"+a+"_"+b;}if(this.dragAndDropOff){this.dragger.addDraggableItem(c.childNodes[b],this);}}c.idd=a;c.grid=this;return c;},_process_jsarray_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={};}this._fillRow(b,(this._c_order?this._swapColumns(c):c));return b;},_get_jsarray_data:function(b,a){return b[a];},_process_json_row:function(a,b){b=this._c_order?this._swapColumns(b.data):b.data;return this._process_some_row(a,b);},_process_some_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={};}this._fillRow(b,c);return b;},_get_json_data:function(b,a){return b.data[a];},_process_js_row:function(c,d){var a=[];for(var b=0;b<this.columnIds.length;b++){a[b]=d[this.columnIds[b]];if(!a[b]&&a[b]!==0){a[b]="";}}this._process_some_row(c,a);c._attrs=d;return c;},_get_js_data:function(b,a){return b[this.columnIds[a]];},_process_csv_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={};}this._fillRow(b,(this._c_order?this._swapColumns(c.split(this.csv.cell)):c.split(this.csv.cell)));return b;},_get_csv_data:function(b,a){return b.split(this.csv.cell)[a];},_process_store_row:function(e,d){var a=[];for(var c=0;c<this.columnIds.length;c++){a[c]=d[this.columnIds[c]];}for(var b=0;b<e.childNodes.length;b++){e.childNodes[b]._attrs={};}e._attrs=d;this._fillRow(e,a);},_process_xml_row:function(a,f){var m=this.xmlLoader.doXPath(this.xml.cell,f);var k=[];a._attrs=this._xml_attrs(f);if(this._ud_enabled){var l=this.xmlLoader.doXPath("./userdata",f);for(var e=l.length-1;e>=0;e--){var h="";for(var c=0;c<l[e].childNodes.length;c++){h+=l[e].childNodes[c].nodeValue;}this.setUserData(a.idd,l[e].getAttribute("name"),h);}}for(var c=0;c<m.length;c++){var d=m[this._c_order?this._c_order[c]:c];if(!d){continue;}var b=a._childIndexes?a._childIndexes[c]:c;var g=d.getAttribute("type");if(a.childNodes[b]){if(g){a.childNodes[b]._cellType=g;}a.childNodes[b]._attrs=this._xml_attrs(d);}if(!d.getAttribute("xmlcontent")){if(d.firstChild){d=d.firstChild.data;}else{d="";}}k.push(d);}for(c<m.length;c<a.childNodes.length;c++){a.childNodes[c]._attrs={};}if(a.parentNode&&a.parentNode.tagName=="row"){a._attrs.parent=a.parentNode.getAttribute("idd");}this._fillRow(a,k);return a;},_get_xml_data:function(b,a){b=b.firstChild;while(true){if(!b){return"";}if(b.tagName=="cell"){a--;}if(a<0){break;}b=b.nextSibling;}return(b.firstChild?b.firstChild.data:"");},_fillRow:function(d,f){if(this.editor){this.editStop();}for(var b=0;b<d.childNodes.length;b++){if((b<f.length)||(this.defVal[b])){var c=d.childNodes[b]._cellIndex;var e=f[c];var a=this.cells4(d.childNodes[b]);if((this.defVal[c])&&((e=="")||(typeof(e)=="undefined"))){e=this.defVal[c];}if(a){a.setValue(e);}}else{d.childNodes[b].innerHTML="&nbsp;";d.childNodes[b]._clearCell=true;}}return d;},_postRowProcessing:function(f,h){if(f._attrs["class"]){f._css=f.className=f._attrs["class"];}if(f._attrs.locked){f._locked=true;}if(f._attrs.bgColor){f.bgColor=f._attrs.bgColor;}var g=0;for(var b=0;b<f.childNodes.length;b++){var j=f.childNodes[b];var e=j._cellIndex;var d=j._attrs.style||f._attrs.style;if(d){j.style.cssText+=";"+d;}if(j._attrs["class"]){j.className=j._attrs["class"];}d=j._attrs.align||this.cellAlign[e];if(d){j.align=d;}j.vAlign=j._attrs.valign||this.cellVAlign[e];var a=j._attrs.bgColor||this.columnColor[e];if(a){j.bgColor=a;}if(j._attrs.colspan&&!h){this.setColspan(f.idd,b+g,j._attrs.colspan);g+=(j._attrs.colspan-1);}if(this._hrrar&&this._hrrar[e]&&!h){j.style.display="none";}}this.callEvent("onRowCreated",[f.idd,f,null]);},load:function(a,c,b){this.callEvent("onXLS",[this]);if(arguments.length==2&&typeof c!="function"){b=c;c=null;}b=b||"xml";if(!this.xmlFileUrl){this.xmlFileUrl=a;}this._data_type=b;this.xmlLoader.onloadAction=function(g,e,j,h,f){if(!g.callEvent){return;}f=g["_process_"+b](f);if(!g._contextCallTimer){g.callEvent("onXLE",[g,0,0,f]);}if(c){c();c=null;}};this.xmlLoader.loadXML(a);},loadXML:function(a,b){this.load(a,b,"xml");},parse:function(c,b,a){if(arguments.length==2&&typeof b!="function"){a=b;b=null;}a=a||"xml";this._data_type=a;c=this["_process_"+a](c);if(!this._contextCallTimer){this.callEvent("onXLE",[this,0,0,c]);}if(b){b();}},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(b){var c={};if(b.attributes.length){for(var a=0;a<b.attributes.length;a++){c[b.attributes[a].name]=b.attributes[a].value;}}return c;},_process_xml:function(d){if(!d.doXPath){var l=new dtmlXMLLoaderObject(function(){});if(typeof d=="string"){l.loadXMLString(d);}else{if(d.responseXML){l.xmlDoc=d;}else{l.xmlDoc={};}l.xmlDoc.responseXML=d;}d=l;}if(this._refresh_mode){return this._refreshFromXML(d);}this._parsing=true;var g=d.getXMLTopNode(this.xml.top);if(g.tagName!=this.xml.top){return;}var k=g.getAttribute("dhx_security");if(k){dhtmlx.security_key=k;}this._parseHead(g);var m=d.doXPath(this.xml.row,g);var f=parseInt(d.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0);var j=parseInt(d.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0);var e=false;if(j&&j!=this.rowsBuffer.length){if(!this.rowsBuffer[j-1]){if(this.rowsBuffer.length){e=true;}this.rowsBuffer[j-1]=null;}if(j<this.rowsBuffer.length){this.rowsBuffer.splice(j,this.rowsBuffer.length-j);e=true;}}if(this.isTreeGrid()){return this._process_tree_xml(d);}for(var b=0;b<m.length;b++){if(this.rowsBuffer[b+f]){continue;}var a=m[b].getAttribute("id")||(b+f+1);this.rowsBuffer[b+f]={idd:a,data:m[b],_parser:this._process_xml_row,_locator:this._get_xml_data};this.rowsAr[a]=m[b];}this.callEvent("onDataReady",[]);if(e&&this._srnd){var c=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=c;}else{this.render_dataset();}this._parsing=false;return d.xmlDoc.responseXML?d.xmlDoc.responseXML:d.xmlDoc;},_process_jsarray:function(data){this._parsing=true;if(data&&data.xmlDoc){eval("dhtmlx.temp="+data.xmlDoc.responseText+";");data=dhtmlx.temp;}for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.rowsAr[id]=data[i];}this.render_dataset();this._parsing=false;},_process_csv:function(d){this._parsing=true;if(d.xmlDoc){d=d.xmlDoc.responseText;}d=d.replace(/\r/g,"");d=d.split(this.csv.row);if(this._csvHdr){this.clearAll();var c=d.splice(0,1)[0].split(this.csv.cell);if(!this._csvAID){c.splice(0,1);}this.setHeader(c.join(this.delim));this.init();}for(var b=0;b<d.length;b++){if(!d[b]&&b==d.length-1){continue;}if(this._csvAID){var e=b+1;this.rowsBuffer.push({idd:e,data:d[b],_parser:this._process_csv_row,_locator:this._get_csv_data});}else{var a=d[b].split(this.csv.cell);var e=a.splice(0,1)[0];this.rowsBuffer.push({idd:e,data:a,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});}this.rowsAr[e]=d[b];}this.render_dataset();this._parsing=false;},_process_js:function(a){return this._process_json(a,"js");},_process_json:function(data,mode){this._parsing=true;if(data&&data.xmlDoc){eval("dhtmlx.temp="+data.xmlDoc.responseText+";");data=dhtmlx.temp;}if(mode=="js"){if(data.data){data=data.data;}for(var i=0;i<data.length;i++){var row=data[i];var id=row.id||(i+1);this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data});this.rowsAr[id]=data[i];}}else{for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data});this.rowsAr[id]=data.rows[i];}}if(data.dhx_security){dhtmlx.security_key=data.dhx_security;}this.render_dataset();this._parsing=false;},render_dataset:function(d,a){if(this._srnd){if(this._fillers){return this._update_srnd_view();}a=Math.min((this._get_view_size()+(this._srnd_pr||0)),this.rowsBuffer.length);}if(this.pagingOn){d=Math.max((d||0),(this.currentPage-1)*this.rowsBufferOutSize);a=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length);}else{d=d||0;a=a||this.rowsBuffer.length;}for(var c=d;c<a;c++){var f=this.render_row(c);if(f==-1){if(this.xmlFileUrl){if(this.callEvent("onDynXLS",[c,(this._dpref?this._dpref:(a-c))])){this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+c+"&count="+(this._dpref?this._dpref:(a-c)),this._data_type);}}a=c;break;}if(!f.parentNode||!f.parentNode.tagName){this._insertRowAt(f,c);if(f._attrs.selected||f._attrs.select){this.selectRow(f,f._attrs.call?true:false,true);f._attrs.selected=f._attrs.select=null;}}if(this._ads_count&&c-d==this._ads_count){var e=this;this._context_parsing=this._context_parsing||this._parsing;return this._contextCallTimer=window.setTimeout(function(){e._contextCallTimer=null;e.render_dataset(c,a);if(!e._contextCallTimer){if(e._context_parsing){e.callEvent("onXLE",[]);}else{e._fixAlterCss();}e.callEvent("onDistributedEnd",[]);e._context_parsing=false;}},this._ads_time);}}if(this._srnd&&!this._fillers){var b=this.rowsBuffer.length-a;this._fillers=[];while(b>0){var h=(_isIE||window._FFrv)?Math.min(b,50000):b;var g=this._add_filler(a,h);if(g){this._fillers.push(g);}b-=h;a+=h;}}this.setSizes();},render_row:function(b){if(!this.rowsBuffer[b]){return -1;}if(this.rowsBuffer[b]._parser){var a=this.rowsBuffer[b];if(this.rowsAr[a.idd]&&this.rowsAr[a.idd].tagName=="TR"){return this.rowsBuffer[b]=this.rowsAr[a.idd];}var c=this._prepareRow(a.idd);this.rowsBuffer[b]=c;this.rowsAr[a.idd]=c;a._parser.call(this,c,a.data);this._postRowProcessing(c);return c;}return this.rowsBuffer[b];},_get_cell_value:function(b,a,c){if(b._locator){if(this._c_order){a=this._c_order[a];}return b._locator.call(this,b.data,a);}return this.cells3(b,a)[c?c:"getValue"]();},sortRows:function(c,f,b){b=(b||"asc").toLowerCase();f=(f||this.fldSort[c]);c=c||0;if(this.isTreeGrid()){this.sortTreeRows(c,f,b);}else{var a={};var e=this.cellType[c];var g="getValue";if(e=="link"){g="getContent";}if(e=="dhxCalendar"||e=="dhxCalendarA"){g="getDate";}for(var d=0;d<this.rowsBuffer.length;d++){a[this.rowsBuffer[d].idd]=this._get_cell_value(this.rowsBuffer[d],c,g);}this._sortRows(c,f,b,a);}this.callEvent("onAfterSorting",[c,f,b]);},_sortCore:function(c,f,b,a,e){var d="sort";if(this._sst){e.stablesort=this.rowsCol.stablesort;d="stablesort";}if(f=="str"){e[d](function(h,g){if(b=="asc"){return a[h.idd]>a[g.idd]?1:-1;}else{return a[h.idd]<a[g.idd]?1:-1;}});}else{if(f=="int"){e[d](function(j,h){var g=parseFloat(a[j.idd]);g=isNaN(g)?-99999999999999:g;var k=parseFloat(a[h.idd]);k=isNaN(k)?-99999999999999:k;if(b=="asc"){return g-k;}else{return k-g;}});}else{if(f=="date"){e[d](function(j,h){var g=Date.parse(a[j.idd])||(Date.parse("01/01/1900"));var k=Date.parse(a[h.idd])||(Date.parse("01/01/1900"));if(b=="asc"){return g-k;}else{return k-g;}});}}}},_sortRows:function(c,d,b,a){this._sortCore(c,d,b,a,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[]);},_reset_view:function(c){if(!this.obj.rows[0]){return;}if(this._lahRw){this._unsetRowHover(0,true);}this.callEvent("onResetView",[]);var a=this.obj.rows[0].parentNode;var d=a.removeChild(a.childNodes[0],true);if(_isKHTML){for(var b=a.parentNode.childNodes.length-1;b>=0;b--){if(a.parentNode.childNodes[b].tagName=="TR"){a.parentNode.removeChild(a.parentNode.childNodes[b],true);}}}else{if(_isIE){for(var b=a.childNodes.length-1;b>=0;b--){a.childNodes[b].removeNode(true);}}else{a.innerHTML="";}}a.appendChild(d);this.rowsCol=dhtmlxArray();if(this._sst){this.enableStableSorting(true);}this._fillers=this.undefined;if(!c){if(_isIE&&this._srnd){this.render_dataset();}else{this.render_dataset();}}},deleteRow:function(b,d){if(!d){d=this.getRowById(b);}if(!d){return;}this.editStop();if(!this._realfake){if(this.callEvent("onBeforeRowDeleted",[b])==false){return false;}}var a=0;if(this.cellType._dhx_find("tree")!=-1&&!this._realfake){a=this._h2.get[b].parent.id;this._removeTrGrRow(d);}else{if(d.parentNode){d.parentNode.removeChild(d);}var g=this.rowsCol._dhx_find(d);if(g!=-1){this.rowsCol._dhx_removeAt(g);}for(var c=0;c<this.rowsBuffer.length;c++){if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==b){this.rowsBuffer._dhx_removeAt(c);g=c;break;}}}this.rowsAr[b]=null;for(var c=0;c<this.selectedRows.length;c++){if(this.selectedRows[c].idd==b){this.selectedRows._dhx_removeAt(c);}}if(this._srnd){for(var c=0;c<this._fillers.length;c++){var e=this._fillers[c];if(!e){continue;}this._update_fillers(c,(e[1]>=g?-1:0),(e[0]>=g?-1:0));}this._update_srnd_view();}if(this.pagingOn){this.changePage();}if(!this._realfake){this.callEvent("onAfterRowDeleted",[b,a]);}this.callEvent("onGridReconstructed",[]);if(this._ahgr){this.setSizes();}return true;},_addRow:function(g,h,b){if(b==-1||typeof b=="undefined"){b=this.rowsBuffer.length;}if(typeof h=="string"){h=h.split(this.delim);}var k=this._prepareRow(g);k._attrs={};for(var c=0;c<k.childNodes.length;c++){k.childNodes[c]._attrs={};}this.rowsAr[k.idd]=k;if(this._h2){this._h2.get[k.idd].buff=k;}this._fillRow(k,h);this._postRowProcessing(k);if(this._skipInsert){this._skipInsert=false;return this.rowsAr[k.idd]=k;}if(this.pagingOn){this.rowsBuffer._dhx_insertAt(b,k);this.rowsAr[k.idd]=k;return k;}if(this._fillers){this.rowsCol._dhx_insertAt(b,null);this.rowsBuffer._dhx_insertAt(b,k);if(this._fake){this._fake.rowsCol._dhx_insertAt(b,null);}this.rowsAr[k.idd]=k;var l=false;for(var d=0;d<this._fillers.length;d++){var e=this._fillers[d];if(e&&e[0]<=b&&(e[0]+e[1])>=b){e[1]=e[1]+1;var a=e[2].firstChild.style.height=parseInt(e[2].firstChild.style.height)+this._srdh+"px";l=true;if(this._fake){this._fake._fillers[d][1]++;this._fake._fillers[d][2].firstChild.style.height=a;}}if(e&&e[0]>b){e[0]=e[0]+1;if(this._fake){this._fake._fillers[d][0]++;}}}if(!l){this._fillers.push(this._add_filler(b,1,(b==0?{parentNode:this.obj.rows[0].parentNode,nextSibling:(this.rowsCol[1])}:this.rowsCol[b-1])));}return k;}this.rowsBuffer._dhx_insertAt(b,k);return this._insertRowAt(k,b);},addRow:function(a,d,c){var b=this._addRow(a,d,c);if(!this.dragContext){this.callEvent("onRowAdded",[a]);}if(this.pagingOn){this.changePage(this.currentPage);}if(this._srnd){this._update_srnd_view();}b._added=true;if(this._ahgr){this.setSizes();}this.callEvent("onGridReconstructed",[]);return b;},_insertRowAt:function(c,d,b){this.rowsAr[c.idd]=c;if(this._skipInsert){this._skipInsert=false;return c;}if((d<0)||((!d)&&(parseInt(d)!==0))){d=this.rowsCol.length;}else{if(d>this.rowsCol.length){d=this.rowsCol.length;}}if(this._cssEven){var a=c.className.replace(this._cssUnEven,"");if((this._cssSP?this.getLevel(c.idd):d)%2==1){c.className+=a+" "+this._cssUnEven+(this._cssSU?(" "+this._cssUnEven+"_"+this.getLevel(c.idd)):"");}else{c.className+=a+" "+this._cssEven+(this._cssSU?(" "+this._cssEven+"_"+this.getLevel(c.idd)):"");}}if(!b){if((d==(this.obj.rows.length-1))||(!this.rowsCol[d])){if(_isKHTML){this.obj.appendChild(c);}else{this.obj.firstChild.appendChild(c);}}else{this.rowsCol[d].parentNode.insertBefore(c,this.rowsCol[d]);}}this.rowsCol._dhx_insertAt(d,c);this.callEvent("onRowInserted",[c,d]);return c;},getRowById:function(c){var b=this.rowsAr[c];if(b){if(b.tagName!="TR"){for(var a=0;a<this.rowsBuffer.length;a++){if(this.rowsBuffer[a]&&this.rowsBuffer[a].idd==c){return this.render_row(a);}}if(this._h2){return this.render_row(null,b.idd);}}return b;}return null;},cellById:function(b,a){return this.cells(b,a);},cells:function(d,b){if(arguments.length==0){return this.cells4(this.cell);}else{var e=this.getRowById(d);}var a=(e._childIndexes?e.childNodes[e._childIndexes[b]]:e.childNodes[b]);if(!a&&e._childIndexes){a=e.firstChild||{};}return this.cells4(a);},cellByIndex:function(b,a){return this.cells2(b,a);},cells2:function(d,b){var e=this.render_row(d);var a=(e._childIndexes?e.childNodes[e._childIndexes[b]]:e.childNodes[b]);if(!a&&e._childIndexes){a=e.firstChild||{};}return this.cells4(a);},cells3:function(c,b){var a=(c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b]);return this.cells4(a);},cells4:function(a){var b=window["eXcell_"+(a._cellType||this.cellType[a._cellIndex])];if(b){return new b(a);}},cells5:function(a,c){var c=c||(a._cellType||this.cellType[a._cellIndex]);if(!this._ecache[c]){if(!window["eXcell_"+c]){var b=eXcell_ro;}else{var b=window["eXcell_"+c];}this._ecache[c]=new b(a);}this._ecache[c].cell=a;return this._ecache[c];},dma:function(a){if(!this._ecache){this._ecache={};}if(a&&!this._dma){this._dma=this.cells4;this.cells4=this.cells5;}else{if(!a&&this._dma){this.cells4=this._dma;this._dma=null;}}},getRowsNum:function(){return this.rowsBuffer.length;},enableEditTabOnly:function(a){if(arguments.length>0){this.smartTabOrder=convertStringToBoolean(a);}else{this.smartTabOrder=true;}},setExternalTabOrder:function(e,a){var b=this;this.tabStart=(typeof(e)=="object")?e:document.getElementById(e);var c=this.tabStart.onkeydown;this.tabStart.onkeydown=function(g){if(c){c.call(this,g);}var f=(g||window.event);if(f.keyCode==9&&!f.shiftKey){f.cancelBubble=true;b.selectCell(0,0,0,0,1);if(b.smartTabOrder&&b.cells2(0,0).isDisabled()){b._key_events.k9_0_0.call(b);}this.blur();return false;}};if(_isOpera){this.tabStart.onkeypress=this.tabStart.onkeydown;}this.tabEnd=(typeof(a)=="object")?a:document.getElementById(a);var d=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(g){if(d){d.call(this,g);}var f=(g||window.event);if(f.keyCode==9&&f.shiftKey){f.cancelBubble=true;b.selectCell((b.getRowsNum()-1),(b.getColumnCount()-1),0,0,1);if(b.smartTabOrder&&b.cells2((b.getRowsNum()-1),(b.getColumnCount()-1)).isDisabled()){b._key_events.k9_0_1.call(b);}this.blur();return false;}};if(_isOpera){this.tabEnd.onkeypress=this.tabEnd.onkeydown;}},uid:function(){if(!this._ui_seed){this._ui_seed=(new Date()).valueOf();}return this._ui_seed++;},clearAndLoad:function(){var a=this._pgn_skin;this._pgn_skin=null;this.clearAll();this._pgn_skin=a;this.load.apply(this,arguments);},getStateOfView:function(){if(this.pagingOn){var a=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,a,Math.min(a+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length];}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length];}};(function(){function d(g,h){this[g]=h;}function f(g,h){this[g].call(this,h);}function c(g,h){this[g].call(this,h.join(this.delim));}function a(g,k){for(var j=0;j<k.length;j++){if(typeof k[j]=="object"){var l=this.getCombo(j);for(var h in k[j]){l.put(h,k[j][h]);}}}}function e(g,r,n){var t=1;var q=[];function s(k,h,u){if(!q[h]){q[h]=[];}if(typeof u=="object"){u.toString=function(){return this.text;};}q[h][k]=u;}for(var o=0;o<r.length;o++){if(typeof(r[o])=="object"&&r[o].length){for(var m=0;m<r[o].length;m++){s(o,m,r[o][m]);}}else{s(o,0,r[o]);}}for(var o=0;o<q.length;o++){for(var m=0;m<q[0].length;m++){var p=q[o][m];q[o][m]=(p||"").toString()||"&nbsp;";if(p&&p.colspan){for(var l=1;l<p.colspan;l++){s(m+l,o,"#cspan");}}if(p&&p.rowspan){for(var l=1;l<p.rowspan;l++){s(m,o+l,"#rspan");}}}}this.setHeader(q[0]);for(var o=1;o<q.length;o++){this.attachHeader(q[o]);}}var b=[{name:"label",def:"&nbsp;",operation:"setHeader",type:e},{name:"id",def:"",operation:"columnIds",type:d},{name:"width",def:"*",operation:"setInitWidths",type:c},{name:"align",def:"left",operation:"cellAlign",type:d},{name:"valign",def:"middle",operation:"cellVAlign",type:d},{name:"sort",def:"na",operation:"fldSort",type:d},{name:"type",def:"ro",operation:"setColTypes",type:c},{name:"options",def:"",operation:"",type:a}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(g){return[g.parent];},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(m){for(var g=0;g<b.length;g++){var l=[];for(var h=0;h<m.length;h++){l[h]=m[h][b[g].name]||b[g].def;}var k=b[g].type||f;k.call(this,b[g].operation,l,m);}this.init();},rows:function(g){},headers:function(h){for(var g=0;g<h.length;g++){this.attachHeader(h[g]);}}});})();dhtmlXGridObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(b,d){if(this.obj._h2){this.obj.addRow(d,c,null,parent);}else{this.obj.addRow(d,[],0);}var c=this.obj.getRowById(d);if(c){this.obj._process_xml_row(c,b.firstChild);this.obj._postRowProcessing(c);}});a.attachEvent("updateCallback",function(b,d){var c=this.obj.getRowById(d);if(c){this.obj._process_xml_row(c,b.firstChild);this.obj._postRowProcessing(c);}});a.attachEvent("deleteCallback",function(b,c){this.obj.setUserData(c,this.action_param,"true_deleted");this.obj.deleteRow(c);});a._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(d,e,c){if(a._columns&&!a._columns[c]){return true;}var b=this.cells(e,c);if(d==1){if(b.isCheckbox()){a.setUpdated(e,true);}}else{if(d==2){if(b.wasChanged()){a.setUpdated(e,true);}}}return true;});this.attachEvent("onRowPaste",function(b){a.setUpdated(b,true);});this.attachEvent("onUndo",function(b){a.setUpdated(b,true);});this.attachEvent("onRowIdChange",function(d,b){var c=a.findRow(d);if(c<a.updatedRows.length){a.updatedRows[c]=b;}});this.attachEvent("onSelectStateChanged",function(b){if(a.updateMode=="row"){a.sendData();}return true;});this.attachEvent("onEnter",function(c,b){if(a.updateMode=="row"){a.sendData();}return true;});this.attachEvent("onBeforeRowDeleted",function(b){if(!this.rowsAr[b]){return true;}if(this.dragContext&&a.dnd){window.setTimeout(function(){a.setUpdated(b,true);},1);return true;}var c=a.getState(b);if(this._h2){this._h2.forEachChild(b,function(d){a.setUpdated(d.id,false);a.markRow(d.id,true,"deleted");},this);}if(c=="inserted"){a.set_invalid(b,false);a.setUpdated(b,false);return true;}if(c=="deleted"){return false;}if(c=="true_deleted"){a.setUpdated(b,false);return true;}a.setUpdated(b,true,"deleted");return false;});this.attachEvent("onBindUpdate",function(b){if(typeof b=="object"){b=b.id;}a.setUpdated(b,true);});this.attachEvent("onRowAdded",function(b){if(this.dragContext&&a.dnd){return true;}a.setUpdated(b,true,"inserted");return true;});a._getRowData=function(d,m){var g=[];g.gr_id=d;if(this.obj.isTreeGrid()){g.gr_pid=this.obj.getParentId(d);}var b=this.obj.getRowById(d);for(var h=0;h<this.obj._cCount;h++){if(this.obj._c_order){var k=this.obj._c_order[h];}else{var k=h;}var l=this.obj.cells(b.idd,h);if(this._changed&&!l.wasChanged()){continue;}if(this._endnm){g[this.obj.getColumnId(h)]=l.getValue();}else{g["c"+k]=l.getValue();}}var e=this.obj.UserData[d];if(e){for(var f=0;f<e.keys.length;f++){if(e.keys[f]&&e.keys[f].indexOf("__")!=0){g[e.keys[f]]=e.values[f];}}}var e=this.obj.UserData.gridglobaluserdata;if(e){for(var f=0;f<e.keys.length;f++){g[e.keys[f]]=e.values[f];}}return g;};a._clearUpdateFlag=function(c){var d=this.obj.getRowById(c);if(d){for(var b=0;b<this.obj._cCount;b++){this.obj.cells(c,b).cell.wasChanged=false;}}};a.checkBeforeUpdate=function(f){var e=true;var b=[];for(var d=0;d<this.obj._cCount;d++){if(this.mandatoryFields[d]){var c=this.mandatoryFields[d].call(this.obj,this.obj.cells(f,d).getValue(),f,d);if(typeof c=="string"){this.messages.push(c);e=false;}else{e&=c;b[d]=!c;}}}if(!e){this.set_invalid(f,"invalid",b);this.setUpdated(f,false);}return e;};};function dhtmlXGridCellObject(a){this.destructor=function(){this.cell.obj=null;this.cell=null;this.grid=null;this.base=null;return null;};this.cell=a;this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value;}else{return this.cell.innerHTML._dhx_trim();}};this.getMathValue=function(){if(this.cell._val){return this.cell._val;}else{return this.getValue();}};this.getFont=function(){arOut=new Array(3);if(this.cell.style.fontFamily){arOut[0]=this.cell.style.fontFamily;}if(this.cell.style.fontWeight=="bold"||this.cell.parentNode.style.fontWeight=="bold"){arOut[1]="bold";}if(this.cell.style.fontStyle=="italic"||this.cell.parentNode.style.fontWeight=="italic"){arOut[1]+="italic";}if(this.cell.style.fontSize){arOut[2]=this.cell.style.fontSize;}else{arOut[2]="";}return arOut.join("-");};this.getTextColor=function(){if(this.cell.style.color){return this.cell.style.color;}else{return"#000000";}};this.getBgColor=function(){if(this.cell.bgColor){return this.cell.bgColor;}else{return"#FFFFFF";}};this.getHorAlign=function(){if(this.cell.style.textAlign){return this.cell.style.textAlign;}else{if(this.cell.style.textAlign){return this.cell.style.textAlign;}else{return"left";}}};this.getWidth=function(){return this.cell.scrollWidth;};this.setFont=function(b){fntAr=b.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];if(fntAr.length==3){if(/bold/.test(fntAr[1])){this.cell.style.fontWeight="bold";}if(/italic/.test(fntAr[1])){this.cell.style.fontStyle="italic";}if(/underline/.test(fntAr[1])){this.cell.style.textDecoration="underline";}}};this.setTextColor=function(b){this.cell.style.color=b;};this.setBgColor=function(b){if(b==""){b=null;}this.cell.bgColor=b;};this.setHorAlign=function(b){if(b.length==1){if(b=="c"){this.cell.style.textAlign="center";}else{if(b=="l"){this.cell.style.textAlign="left";}else{this.cell.style.textAlign="right";}}}else{this.cell.style.textAlign=b;}};this.wasChanged=function(){if(this.cell.wasChanged){return true;}else{return false;}};this.isCheckbox=function(){var b=this.cell.firstChild;if(b&&b.tagName=="INPUT"){type=b.type;if(type=="radio"||type=="checkbox"){return true;}else{return false;}}else{return false;}};this.isChecked=function(){if(this.isCheckbox()){return this.cell.firstChild.checked;}};this.isDisabled=function(){return this.cell._disabled;};this.setChecked=function(b){if(this.isCheckbox()){if(b!="true"&&b!=1){b=false;}this.cell.firstChild.checked=b;}};this.setDisabled=function(b){if(b!="true"&&b!=1){b=false;}if(this.isCheckbox()){this.cell.firstChild.disabled=b;if(this.disabledF){this.disabledF(b);}}this.cell._disabled=b;};}dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a];},setAttribute:function(a,b){this.cell._attrs[a]=b;},getInput:function(){if(this.obj&&(this.obj.tagName=="INPUT"||this.obj.tagName=="TEXTAREA")){return this.obj;}var a=(this.obj||this.cell).getElementsByTagName("TEXTAREA");if(!a.length){a=(this.obj||this.cell).getElementsByTagName("INPUT");}return a[0];}};dhtmlXGridCellObject.prototype.setValue=function(a){if((typeof(a)!="number")&&(!a||a.toString()._dhx_trim()=="")){a="&nbsp;";this.cell._clearCell=true;}else{this.cell._clearCell=false;}this.setCValue(a);};dhtmlXGridCellObject.prototype.getTitle=function(){return(_isIE?this.cell.innerText:this.cell.textContent);};dhtmlXGridCellObject.prototype.setCValue=function(b,a){this.cell.innerHTML=b;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,(arguments.length>1?a:b)]);};dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(a));this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a]);};dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a;};dhtmlXGridCellObject.prototype.getMath=function(){if(this._val){return this.val;}else{return this.getValue();}};function eXcell(){this.obj=null;this.val=null;this.changeState=function(){return false;};this.edit=function(){this.val=this.getValue();};this.detach=function(){return false;};this.getPosition=function(d){var a=d;var c=0;var b=0;while(a.tagName!="BODY"){c+=a.offsetLeft;b+=a.offsetTop;a=a.offsetParent;}return new Array(c,b);};}eXcell.prototype=new dhtmlXGridCellObject;function eXcell_ed(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;}this.edit=function(){this.cell.atag=((!this.grid.multiLine)&&(_isKHTML||_isMacOS||_isFF))?"INPUT":"TEXTAREA";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");this.obj.style.height=(this.cell.offsetHeight-(_isIE?4:4))+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(b){(b||event).cancelBubble=true;};this.obj.onmousedown=function(b){(b||event).cancelBubble=true;};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);if(_isFF){this.obj.style.overflow="visible";if((this.grid.multiLine)&&(this.obj.offsetHeight>=18)&&(this.obj.offsetHeight<40)){this.obj.style.height="36px";this.obj.style.overflow="scroll";}}this.obj.onselectstart=function(b){if(!b){b=event;}b.cancelBubble=true;return true;};if(_isIE){this.obj.focus();}this.obj.focus();};this.getValue=function(){if((this.cell.firstChild)&&((this.cell.atag)&&(this.cell.firstChild.tagName==this.cell.atag))){return this.cell.firstChild.value;}if(this.cell._clearCell){return"";}return this.cell.innerHTML.toString()._dhx_trim();};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue();};}eXcell_ed.prototype=new eXcell;function eXcell_edtxt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;}this.getValue=function(){if((this.cell.firstChild)&&((this.cell.atag)&&(this.cell.firstChild.tagName==this.cell.atag))){return this.cell.firstChild.value;}if(this.cell._clearCell){return"";}return(_isIE?this.cell.innerText:this.cell.textContent);};this.setValue=function(b){if(!b||b.toString()._dhx_trim()==""){b=" ";this.cell._clearCell=true;}else{this.cell._clearCell=false;}this.setCTxtValue(b);};}eXcell_edtxt.prototype=new eXcell_ed;function eXcell_edn(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;}this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value;}if(this.cell._clearCell){return"";}return this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex);};this.detach=function(){var b=this.obj.value;this.setValue(b);return this.val!=this.getValue();};}eXcell_edn.prototype=new eXcell_ed;eXcell_edn.prototype.setValue=function(a){if(!a||a.toString()._dhx_trim()==""){this.cell._clearCell=true;return this.setCValue("&nbsp;",0);}else{this.cell._clearCell=false;}this.setCValue(this.grid._aplNF(a,this.cell._cellIndex));};function eXcell_ch(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.cell.obj=this;}this.disabledF=function(b){if((b==true)||(b==1)){this.cell.innerHTML=this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis.");}else{this.cell.innerHTML=this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.");}};this.changeState=function(){if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return;}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])){this.val=this.getValue();if(this.val=="1"){this.setValue("0");}else{this.setValue("1");}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);}else{this.editor=null;}};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0";};this.isCheckbox=function(){return true;};this.isChecked=function(){if(this.getValue()=="1"){return true;}else{return false;}};this.setChecked=function(b){this.setValue(b.toString());};this.detach=function(){return this.val!=this.getValue();};this.edit=null;}eXcell_ch.prototype=new eXcell;eXcell_ch.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b){b=b.toString()._dhx_trim();if((b=="false")||(b=="0")){b="";}}if(b){b="1";this.cell.chstate="1";}else{b="0";this.cell.chstate="0";}var a=this;this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+b+".gif' onclick='new eXcell_ch(this.parentNode).changeState();(arguments[0]||event).cancelBubble=true;'>",this.cell.chstate);};function eXcell_ra(a){this.base=eXcell_ch;this.base(a);this.grid=a.parentNode.grid;this.disabledF=function(b){if((b==true)||(b==1)){this.cell.innerHTML=this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis.");}else{this.cell.innerHTML=this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.");}};this.changeState=function(b){if(b===false&&this.getValue()==1){return;}if((!this.grid.isEditable)||(this.cell.parentNode._locked)){return;}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val=="1"){this.setValue("0");}else{this.setValue("1");}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);}else{this.editor=null;}};this.edit=null;}eXcell_ra.prototype=new eXcell_ch;eXcell_ra.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b){b=b.toString()._dhx_trim();if((b=="false")||(b=="0")){b="";}}if(b){if(!this.grid._RaSeCol){this.grid._RaSeCol=[];}if(this.grid._RaSeCol[this.cell._cellIndex]){var a=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);a.setValue("0");if(this.grid.rowsAr[a.cell.parentNode.idd]){this.grid.callEvent("onEditCell",[1,a.cell.parentNode.idd,a.cell._cellIndex]);}}this.grid._RaSeCol[this.cell._cellIndex]=this.cell;b="1";this.cell.chstate="1";}else{b="0";this.cell.chstate="0";}this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+b+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate);};function eXcell_txt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(f){(f||event).cancelBubble=true;};var c=this.grid.getPosition(this.cell);if(!this.cell._clearCell){this.obj.value=this.val;}this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;if(_isFF){var b=document.createElement("DIV");b.appendChild(this.obj);b.style.overflow="auto";b.className="dhx_textarea";this.obj.style.margin="0px 0px 0px 0px";this.obj.style.border="0px";this.obj=b;}document.body.appendChild(this.obj);if(_isOpera){this.obj.onkeypress=function(e){if(e.keyCode==9){return false;}};}this.obj.onkeydown=function(g){var f=(g||event);if(f.keyCode==9){globalActiveDHTMLGridObject.entBox.focus();globalActiveDHTMLGridObject.doKey({keyCode:f.keyCode,shiftKey:f.shiftKey,srcElement:"0"});return false;}};this.obj.style.left=c[0]+"px";this.obj.style.top=c[1]+this.cell.offsetHeight+"px";if(this.cell.offsetWidth<200){var d=200;}else{var d=this.cell.offsetWidth;}this.obj.style.width=d+(_isFF?18:16)+"px";if(_isFF){this.obj.firstChild.style.width=parseInt(this.obj.style.width)+"px";this.obj.firstChild.style.height=this.obj.offsetHeight-3+"px";}if(_isIE){this.obj.select();this.obj.value=this.obj.value;}if(_isFF){this.obj.firstChild.focus();}else{this.obj.focus();}};this.detach=function(){var b="";if(_isFF){b=this.obj.firstChild.value;}else{b=this.obj.value;}if(b==""){this.cell._clearCell=true;}else{this.cell._clearCell=false;}this.setValue(b);document.body.removeChild(this.obj);this.obj=null;return this.val!=this.getValue();};this.getValue=function(){if(this.obj){if(_isFF){return this.obj.firstChild.value;}else{return this.obj.value;}}if(this.cell._clearCell){return"";}if((!this.grid.multiLine)){return this.cell._brval||this.cell.innerHTML;}else{return this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim();}};}eXcell_txt.prototype=new eXcell;function eXcell_txttxt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;}this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value;}if(this.cell._clearCell){return"";}if((!this.grid.multiLine)&&this.cell._brval){return this.cell._brval;}return(_isIE?this.cell.innerText:this.cell.textContent);};this.setValue=function(b){this.cell._brval=b;if(!b||b.toString()._dhx_trim()==""){b=" ";}this.setCTxtValue(b);};}eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(a){if(!a||a.toString()._dhx_trim()==""){a="&nbsp;";this.cell._clearCell=true;}else{this.cell._clearCell=false;}this.cell._brval=a;if((!this.grid.multiLine)){this.setCValue(a,a);}else{this.setCValue(a.replace(/\n/g,"<br/>"),a);}};function eXcell_co(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.combo=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex));this.editable=true;}this.shiftNext=function(){var b=this.list.options[this.list.selectedIndex+1];if(b){b.selected=true;}this.obj.value=this.list.options[this.list.selectedIndex].text;return true;};this.shiftPrev=function(){if(this.list.selectedIndex!=0){var b=this.list.options[this.list.selectedIndex-1];if(b){b.selected=true;}this.obj.value=this.list.options[this.list.selectedIndex].text;}return true;};this.edit=function(){this.val=this.getValue();this.text=this.getText()._dhx_trim();var d=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";this.obj.style.height=(this.cell.offsetHeight-4)+"px";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(j){(j||event).cancelBubble=true;};this.obj.value=this.text;this.obj.onselectstart=function(j){if(!j){j=event;}j.cancelBubble=true;return true;};var f=this;this.obj.onkeyup=function(l){var k=(l||event).keyCode;if(k==38||k==40||k==9){return;}var m=this.readonly?String.fromCharCode(k):this.value;var n=f.list.options;for(var j=0;j<n.length;j++){if(n[j].text.indexOf(m)==0){return n[j].selected=true;}}};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.style.left=d[0]+"px";this.list.style.top=d[1]+this.cell.offsetHeight+"px";this.list.onclick=function(l){var k=l||window.event;var j=k.target||k.srcElement;if(j.tagName=="OPTION"){j=j.parentNode;}f.setValue(j.value);f.editable=false;f.grid.editStop();};var b=this.combo.getKeys();var e=false;var h=0;for(var c=0;c<b.length;c++){var g=this.combo.get(b[c]);this.list.options[this.list.options.length]=new Option(g,b[c]);if(b[c]==this.val){h=this.list.options.length-1;e=true;}}if(e==false){this.list.options[this.list.options.length]=new Option(this.text,this.val===null?"":this.val);h=this.list.options.length-1;}document.body.appendChild(this.list);this.list.size="6";this.cstate=1;if(this.editable){this.cell.innerHTML="";}else{this.obj.style.width="1px";this.obj.style.height="1px";}this.cell.appendChild(this.obj);this.list.options[h].selected=true;if((!_isFF)||(this.editable)){this.obj.focus();this.obj.focus();}if(!this.editable){this.obj.style.visibility="hidden";this.list.focus();this.list.onkeydown=function(j){j=j||window.event;f.grid.setActive(true);if(j.keyCode<30){return f.grid.doKey({target:f.cell,keyCode:j.keyCode,shiftKey:j.shiftKey,ctrlKey:j.ctrlKey});}};}};this.getValue=function(){return((this.cell.combo_value==window.undefined)?"":this.cell.combo_value);};this.detach=function(){if(this.val!=this.getValue()){this.cell.wasChanged=true;}if(this.list.parentNode!=null){if(this.editable){var b=this.list.options[this.list.selectedIndex];if(b&&b.text==this.obj.value){this.setValue(this.list.value);}else{var c=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex));var d=c.values._dhx_find(this.obj.value);if(d!=-1){this.setValue(c.keys[d]);}else{this.setCValue(this.cell.combo_value=this.obj.value);}}}else{this.setValue(this.list.value);}}if(this.list.parentNode){this.list.parentNode.removeChild(this.list);}if(this.obj.parentNode){this.obj.parentNode.removeChild(this.obj);}return this.val!=this.getValue();};}eXcell_co.prototype=new eXcell;eXcell_co.prototype.getText=function(){return this.cell.innerHTML;};eXcell_co.prototype.setValue=function(c){if(typeof(c)=="object"){var b=this.grid.xmlLoader.doXPath("./option",c);if(b.length){this.cell._combo=new dhtmlXGridComboObject();}for(var a=0;a<b.length;a++){this.cell._combo.put(b[a].getAttribute("value"),b[a].firstChild?b[a].firstChild.data:"");}c=c.firstChild.data;}if((c||"").toString()._dhx_trim()==""){c=null;}this.cell.combo_value=c;if(c!==null){this.setCValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(c)||c,c);}else{this.setCValue("&nbsp;",c);}};function eXcell_coro(a){this.base=eXcell_co;this.base(a);this.editable=false;}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(a){this.base=eXcell_co;this.base(a);}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return(_isIE?this.cell.innerText:this.cell.textContent);};eXcell_cotxt.prototype.setValue=function(c){if(typeof(c)=="object"){var b=this.grid.xmlLoader.doXPath("./option",c);if(b.length){this.cell._combo=new dhtmlXGridComboObject();}for(var a=0;a<b.length;a++){this.cell._combo.put(b[a].getAttribute("value"),b[a].firstChild?b[a].firstChild.data:"");}c=c.firstChild.data;}if((c||"").toString()._dhx_trim()==""){c=null;}if(c!==null){this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(c)||c,c);}else{this.setCTxtValue(" ",c);}this.cell.combo_value=c;};function eXcell_corotxt(a){this.base=eXcell_co;this.base(a);this.editable=false;}eXcell_corotxt.prototype=new eXcell_cotxt;function eXcell_cp(a){try{this.cell=a;this.grid=this.cell.parentNode.grid;}catch(b){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var c=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=c[0]+"px";this.obj.style.top=c[1]+this.cell.offsetHeight+"px";};this.toolDNum=function(c){if(c.length==1){c="0"+c;}return c;};this.colorPanel=function(l,p){var h=document.createElement("TABLE");p.appendChild(h);h.cellSpacing=0;h.editor_obj=this;h.style.cursor="default";h.onclick=function(q){var n=q||window.event;var c=n.target||n.srcElement;var j=c.parentNode.parentNode.parentNode.editor_obj;j.setValue(c._bg);j.grid.editStop();};var f=256/l;for(var g=0;g<=(256/f);g++){var d=h.insertRow(g);for(var k=0;k<=(256/f);k++){for(var e=0;e<=(256/f);e++){R=new Number(f*g)-(g==0?0:1);G=new Number(f*k)-(k==0?0:1);B=new Number(f*e)-(e==0?0:1);var o=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16));var m=d.insertCell(k);m.width="10px";m.innerHTML="&nbsp;";m.title=o.toUpperCase();m.style.backgroundColor="#"+o;m._bg="#"+o;if(this.val!=null&&"#"+o.toUpperCase()==this.val.toUpperCase()){m.style.border="2px solid white";}}}}};this.getValue=function(){return this.cell.firstChild._bg||"";};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16));};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16));};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16));};this.detach=function(){if(this.obj.offsetParent!=null){document.body.removeChild(this.obj);}return this.val!=this.getValue();};}eXcell_cp.prototype=new eXcell;eXcell_cp.prototype.setValue=function(a){this.setCValue("<div style='width:100%;height:"+((this.grid.multiLine?cell.offsetHeight-2:16))+";background-color:"+(a||"")+";border:0px;'>&nbsp;</div>",a);this.cell.firstChild._bg=a;};function eXcell_img(a){try{this.cell=a;this.grid=this.cell.parentNode.grid;}catch(b){}this.getValue=function(){if(this.cell.firstChild.tagName=="IMG"){return this.cell.firstChild.src+(this.cell.titFl!=null?"^"+this.cell.tit:"");}else{if(this.cell.firstChild.tagName=="A"){var c=this.cell.firstChild.firstChild.src+(this.cell.titFl!=null?"^"+this.cell.tit:"");c+="^"+this.cell.lnk;if(this.cell.trg){c+="^"+this.cell.trg;}return c;}}};this.isDisabled=function(){return true;};}eXcell_img.prototype=new eXcell;eXcell_img.prototype.getTitle=function(){return this.cell.tit;};eXcell_img.prototype.setValue=function(c){var b=c;if(c.indexOf("^")!=-1){var a=c.split("^");c=a[0];b=this.cell._attrs.title||a[1];if(a.length>2){this.cell.lnk=a[2];if(a[3]){this.cell.trg=a[3];}}this.cell.titFl="1";}this.setCValue("<img src='"+this.grid.iconURL+(c||"")._dhx_trim()+"' border='0'>",c);if(this.cell.lnk){this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>";}this.cell.tit=b;};function eXcell_price(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){if(this.cell.childNodes.length>1){return this.cell.childNodes[1].innerHTML.toString()._dhx_trim();}else{return"0";}};}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(b){if(isNaN(parseFloat(b))){b=this.val||0;}var a="green";if(b<0){a="red";}this.setCValue("<span>$</span><span style='padding-right:2px;color:"+a+";'>"+b+"</span>",b);};function eXcell_dyn(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim();};}eXcell_dyn.prototype=new eXcell_ed;eXcell_dyn.prototype.setValue=function(c){if(!c||isNaN(Number(c))){if(c!==""){c=0;}}if(c>0){var b="green";var a="dyn_up.gif";}else{if(c==0){var b="black";var a="dyn_.gif";}else{var b="red";var a="dyn_down.gif";}}this.setCValue("<div style='position:relative;padding-right:2px;width:100%;overflow:hidden;white-space:nowrap;'><img src='"+this.grid.imgURL+""+a+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px;width:100%;color:"+b+";'>"+c+"</span></div>",c);};function eXcell_ro(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;}this.edit=function(){};this.isDisabled=function(){return true;};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim();};}eXcell_ro.prototype=new eXcell;function eXcell_ron(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true;};this.getValue=function(){return this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex);};}eXcell_ron.prototype=new eXcell;eXcell_ron.prototype.setValue=function(a){if(a===0){}else{if(!a||a.toString()._dhx_trim()==""){this.setCValue("&nbsp;");return this.cell._clearCell=true;}}this.setCValue(a?this.grid._aplNF(a,this.cell._cellIndex):"0");this.cell._clearCell=false;};function eXcell_rotxt(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true;};this.setValue=function(b){if(!b||b.toString()._dhx_trim()==""){b=" ";}this.setCTxtValue(b);};this.getValue=function(){if(this.cell._clearCell){return"";}return(_isIE?this.cell.innerText:this.cell.textContent);};}eXcell_rotxt.prototype=new eXcell;function dhtmlXGridComboObject(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();this.put=function(b,c){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){this.values[a]=c;return true;}}this.values[this.values.length]=c;this.keys[this.keys.length]=b;};this.get=function(b){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){return this.values[a];}}return null;};this.clear=function(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();};this.remove=function(b){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){this.keys._dhx_removeAt(a);this.values._dhx_removeAt(a);return true;}}};this.size=function(){var a=0;for(var b=0;b<this.keys.length;b++){if(this.keys[b]!=null){a++;}}return a;};this.getKeys=function(){var a=new Array(0);for(var b=0;b<this.keys.length;b++){if(this.keys[b]!=null){a[a.length]=this.keys[b];}}return a;};this.save=function(){this._save=new Array();for(var a=0;a<this.keys.length;a++){this._save[a]=[this.keys[a],this.values[a]];}};this.restore=function(){if(this._save){this.keys[a]=new Array();this.values[a]=new Array();for(var a=0;a<this._save.length;a++){this.keys[a]=this._save[a][0];this.values[a]=this._save[a][1];}}};return this;}function Hashtable(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();return this;}Hashtable.prototype=new dhtmlXGridComboObject;function dhtmlXGridFromTable(obj,init){if(typeof(obj)!="object"){obj=document.getElementById(obj);}obj.className="";var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?(obj.offsetWidth+"px"):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)["width"]:(obj.currentStyle?obj.currentStyle.width:0)));w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?(obj.offsetHeight+"px"):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)["height"]:(obj.currentStyle?obj.currentStyle.height:0)));var mr=obj;var drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||("name_"+(new Date()).valueOf());var windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit");var acs2=mr.getAttribute("oninit");if(acs){eval(acs);}var imgurl=window.location.pathname;imgurl=imgurl.substring(0,imgurl.substring(1).indexOf("/")+1)+"/resource/platform/js/dhtmlx/grid/imgs/";windowf.setImagePath(imgurl);if(init){init(windowf);}var hrow=mr.rows[0];var za="";var zb="";var zc="";var zd="";var ze="";for(var i=0;i<hrow.cells.length;i++){za+=(za?",":"")+hrow.cells[i].innerHTML;var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null)["width"]:(hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0));zb+=(zb?",":"")+(width=="*"?width:parseInt(width));zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left");zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ro");ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"na");var f_a=hrow.cells[i].getAttribute("format");if(f_a){if(hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")!=-1){windowf._dtmask=f_a;}else{windowf.setNumberFormat(f_a,i);}}}windowf.setHeader(za);windowf.setInitWidths(zb);windowf.setColAlign(zc);windowf.setColTypes(zd);windowf.setColSorting(ze);windowf.enableAlterCss("ev_","odd_",windowf.isTreeGrid());if(obj.getAttribute("gridHeight")=="auto"){windowf.enableAutoHeigth(true);}if(obj.getAttribute("multiline")){windowf.enableMultiline(true);}var lmn=mr.getAttribute("lightnavigation");if(lmn){windowf.enableLightMouseNavigation(lmn);}var evr=mr.getAttribute("evenrow");var uevr=mr.getAttribute("unevenrow");if(evr||uevr){windowf.enableAlterCss(evr,uevr);}if(drag){windowf.enableDragAndDrop(true);}windowf.init();if(obj.getAttribute("split")){windowf.splitAt(obj.getAttribute("split"));}windowf._process_inner_html(mr,1);if(acs2){eval(acs2);}if(obj.parentNode&&obj.parentNode.removeChild){obj.parentNode.removeChild(obj);}return windowf;}dhtmlXGridObject.prototype._process_html=function(b){if(b.tagName&&b.tagName=="TABLE"){return this._process_inner_html(b,0);}var a=document.createElement("DIV");a.innerHTML=b.xmlDoc.responseText;var c=a.getElementsByTagName("TABLE")[0];this._process_inner_html(c,0);};dhtmlXGridObject.prototype._process_inner_html=function(c,e){var b=c.rows.length;for(var a=e;a<b;a++){var d=c.rows[a].getAttribute("id")||a;this.rowsBuffer.push({idd:d,data:c.rows[a],_parser:this._process_html_row,_locator:this._get_html_data});}this.render_dataset();this.setSizes();};dhtmlXGridObject.prototype._process_html_row=function(h,e){var g=e.getElementsByTagName("TD");var b=[];h._attrs=this._xml_attrs(e);for(var d=0;d<g.length;d++){var f=g[d];var a=f.getAttribute("type");if(h.childNodes[d]){if(a){h.childNodes[d]._cellType=a;}h.childNodes[d]._attrs=this._xml_attrs(g[d]);}if(f.firstChild){b.push(f.innerHTML);}else{b.push("");}if(f.colSpan>1){h.childNodes[d]._attrs.colspan=f.colSpan;for(var c=1;c<f.colSpan;c++){b.push("");}}}for(d<g.length;d<h.childNodes.length;d++){h.childNodes[d]._attrs={};}this._fillRow(h,(this._c_order?this._swapColumns(b):b));return h;};dhtmlXGridObject.prototype._get_html_data=function(b,a){b=b.firstChild;while(true){if(!b){return"";}if(b.tagName=="TD"){a--;}if(a<0){break;}b=b.nextSibling;}return(b.firstChild?b.firstChild.data:"");};dhtmlxEvent(window,"load",function(){var c=document.getElementsByTagName("table");for(var b=0;b<c.length;b++){if(c[b].className=="dhtmlxGrid"){dhtmlXGridFromTable(c[b]);}}});function xmlPointer(a){this.d=a;}xmlPointer.prototype={text:function(){if(!_isFF){return this.d.xml;}var a=new XMLSerializer();return a.serializeToString(this.d);},get:function(a){return this.d.getAttribute(a);},exists:function(){return !!this.d;},content:function(){return this.d.firstChild?this.d.firstChild.data:"";},each:function(d,h,g,e){var b=this.d.childNodes;var j=new xmlPointer();if(b.length){for(e=e||0;e<b.length;e++){if(b[e].tagName==d){j.d=b[e];if(h.apply(g,[j,e])==-1){return;}}}}},get_all:function(){var d={};var c=this.d.attributes;for(var e=0;e<c.length;e++){d[c[e].name]=c[e].value;}return d;},sub:function(d){var b=this.d.childNodes;var f=new xmlPointer();if(b.length){for(var e=0;e<b.length;e++){if(b[e].tagName==d){f.d=b[e];return f;}}}},up:function(a){return new xmlPointer(this.d.parentNode);},set:function(a,b){this.d.setAttribute(a,b);},clone:function(a){return new xmlPointer(this.d);},sub_exists:function(c){var b=this.d.childNodes;if(b.length){for(var d=0;d<b.length;d++){if(b[d].tagName==c){return true;}}}return false;},through:function(b,h,l,e,m){var j=this.d.childNodes;if(j.length){for(var d=0;d<j.length;d++){if(j[d].tagName==b&&j[d].getAttribute(h)!=null&&j[d].getAttribute(h)!=""&&(!l||j[d].getAttribute(h)==l)){var g=new xmlPointer(j[d]);e.apply(m,[g,d]);}var k=this.d;this.d=j[d];this.through(b,h,l,e,m);this.d=k;}}}};function dhtmlXTreeObject(g,d,b,a){if(_isIE){try{document.execCommand("BackgroundImageCache",false,true);}catch(f){}}if(typeof(g)!="object"){this.parentObject=document.getElementById(g);}else{this.parentObject=g;}this.parentObject.style.overflow="hidden";this._itim_dg=true;this.dlmtr=",";this.dropLower=false;this.enableIEImageFix();this.xmlstate=0;this.mytype="tree";this.smcheck=true;this.width=d;this.height=b;this.rootId=a;this.childCalc=null;this.def_img_x="18px";this.def_img_y="18px";this.def_line_img_x="18px";this.def_line_img_y="18px";this._dragged=new Array();this._selected=new Array();this.style_pointer="pointer";this._aimgs=true;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.cMenu=0;this.mlitems=0;this.iconURL="";this.dadmode=0;this.slowParse=false;this.autoScroll=true;this.hfMode=0;this.nodeCut=new Array();this.XMLsource=0;this.XMLloadingWarning=0;this._idpull={};this._pullSize=0;this.treeLinesOn=true;this.tscheck=false;this.timgen=true;this.dpcpy=false;this._ld_id=null;this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif");this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif");this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif");this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif");this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif");this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif");this.cutImg=new Array(0,0,0);this.cutImage="but_cut.gif";dhtmlxEventable(this);this.dragger=new dhtmlDragAndDropObject();this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this);}if(_isFF){this.allTree.childNodes[0].width="100%";this.allTree.childNodes[0].style.overflow="hidden";}var c=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS){this.allTree.oncontextmenu=function(h){return c._doContClick(h||window.event,true);};}this.allTree.onmousedown=function(h){return c._doContClick(h||window.event);};this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,true,this.no_cashe);if(_isIE){this.preventIECashing(true);}if(window.addEventListener){window.addEventListener("unload",function(){try{c.destructor();}catch(h){}},false);}if(window.attachEvent){window.attachEvent("onunload",function(){try{c.destructor();}catch(h){}});}this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path);}if(dhtmlx.skin){this.setSkin(dhtmlx.skin);}return this;}dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a;};dhtmlXTreeObject.prototype._doContClick=function(g,a){if(!a&&g.button!=2){if(this._acMenu){if(this._acMenu.hideContextMenu){this._acMenu.hideContextMenu();}else{this.cMenu._contextEnd();}}return true;}var b=(_isIE?g.srcElement:g.target);while((b)&&(b.tagName!="BODY")){if(b.parentObject){break;}b=b.parentNode;}if((!b)||(!b.parentObject)){return true;}var e=b.parentObject;if(!this.callEvent("onRightClick",[e.id,g])){(g.srcElement||g.target).oncontextmenu=function(k){(k||event).cancelBubble=true;return false;};}this._acMenu=(e.cMenu||this.cMenu);if(this._acMenu){if(!(this.callEvent("onBeforeContextMenu",[e.id]))){return true;}if(!_isMacOS){(g.srcElement||g.target).oncontextmenu=function(k){(k||event).cancelBubble=true;return false;};}if(this._acMenu.showContextMenu){var d=window.document.documentElement;var c=window.document.body;var h=new Array((d.scrollLeft||c.scrollLeft),(d.scrollTop||c.scrollTop));if(_isIE){var j=g.clientX+h[0];var f=g.clientY+h[1];}else{var j=g.pageX;var f=g.pageY;}this._acMenu.showContextMenu(j-1,f-1);this.contextID=e.id;g.cancelBubble=true;this._acMenu._skip_hide=true;}else{b.contextMenuId=e.id;b.contextMenu=this._acMenu;b.a=this._acMenu._contextStart;b.a(b,g);b.a=null;}return false;}return true;};dhtmlXTreeObject.prototype.enableIEImageFix=function(a){if(!a){this._getImg=function(b){return document.createElement((b==this.rootId)?"div":"img");};this._setSrc=function(d,c){d.src=c;};this._getSrc=function(b){return b.src;};}else{this._getImg=function(){var b=document.createElement("DIV");b.innerHTML="&nbsp;";b.className="dhx_bg_img_fix";return b;};this._setSrc=function(d,c){d.style.backgroundImage="url("+c+")";};this._getSrc=function(b){var c=b.style.backgroundImage;return c.substr(4,c.length-5).replace(/(^")|("$)/g,"");};}};dhtmlXTreeObject.prototype.enableContextMenu=function(a){if(a){this.cMenu=a;}};dhtmlXTreeObject.prototype.destructor=function(){for(var b in this._idpull){var c=this._idpull[b];if(!c){continue;}c.parentObject=null;c.treeNod=null;c.childNodes=null;c.span=null;c.tr.nodem=null;c.tr=null;c.htmlNode.objBelong=null;c.htmlNode=null;this._idpull[b]=null;}this.parentObject.innerHTML="";if(this.XMLLoader){this.XMLLoader.destructor();}this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(var b in this){this[b]=null;}};function cObject(){return this;}cObject.prototype=new Object;cObject.prototype.clone=function(){function a(){}a.prototype=this;return new a();};function dhtmlXTreeItemObject(f,b,c,a,d,e){this.htmlNode="";this.acolor="";this.scolor="";this.tr=0;this.childsCount=0;this.tempDOMM=0;this.tempDOMU=0;this.dragSpan=0;this.dragMove=0;this.span=0;this.closeble=1;this.childNodes=new Array();this.userData=new cObject();this.checkstate=0;this.treeNod=a;this.label=b;this.parentObject=c;this.actionHandler=d;this.images=new Array(a.imageArray[0],a.imageArray[1],a.imageArray[2]);this.id=a._globalIdStorageAdd(f,this);if(this.treeNod.checkBoxOff){this.htmlNode=this.treeNod._createItem(1,this,e);}else{this.htmlNode=this.treeNod._createItem(0,this,e);}this.htmlNode.objBelong=this;return this;}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(b,a){if(this._globalIdStorageFind(b,1,1)){b=b+"_"+(new Date()).valueOf();return this._globalIdStorageAdd(b,a);}this._idpull[b]=a;this._pullSize++;return b;};dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){if(this._idpull[a]){this._unselectItem(this._idpull[a]);this._idpull[a]=null;this._pullSize--;}if((this._locker)&&(this._locker[a])){this._locker[a]=false;}};dhtmlXTreeObject.prototype._globalIdStorageFind=function(e,a,b,c){var d=this._idpull[e];if(d){return d;}return null;};dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case"none":return a;break;case"utf8":return encodeURIComponent(a);break;default:return escape(a);break;}};dhtmlXTreeObject.prototype._drawNewTr=function(e,c){var d=document.createElement("tr");var b=document.createElement("td");var a=document.createElement("td");b.appendChild(document.createTextNode(" "));a.colSpan=3;a.appendChild(e);d.appendChild(b);d.appendChild(a);return d;};dhtmlXTreeObject.prototype.loadXMLString=function(c,b){var a=this;if(!this.parsCount){this.callEvent("onXLS",[a,null]);}this.xmlstate=1;if(b){this.XMLLoader.waitCall=b;}this.XMLLoader.loadXMLString(c);};dhtmlXTreeObject.prototype.loadXML=function(a,c){if(this._datamode&&this._datamode!="xml"){return this["load"+this._datamode.toUpperCase()](a,c);}var b=this;if(!this.parsCount){this.callEvent("onXLS",[b,this._ld_id]);}this._ld_id=null;this.xmlstate=1;this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,true,this.no_cashe);if(c){this.XMLLoader.waitCall=c;}this.XMLLoader.loadXML(a);};dhtmlXTreeObject.prototype._attachChildNode=function(g,f,d,h,u,t,s,j,c,m,o){if(m&&m.parentObject){g=m.parentObject;}if(((g.XMLload==0)&&(this.XMLsource))&&(!this.XMLloadingWarning)){g.XMLload=1;this._loadDynXML(g.id);}var k=g.childsCount;var v=g.childNodes;if(o&&o.tr.previousSibling){if(o.tr.previousSibling.previousSibling){m=o.tr.previousSibling.nodem;}else{j=j.replace("TOP","")+",TOP";}}if(m){var e,r;for(e=0;e<k;e++){if(v[e]==m){for(r=k;r!=e;r--){v[1+r]=v[r];}break;}}e++;k=e;}if(j){var p=j.split(",");for(var q=0;q<p.length;q++){switch(p[q]){case"TOP":if(g.childsCount>0){m=new Object;m.tr=g.childNodes[0].tr.previousSibling;}g._has_top=true;for(e=k;e>0;e--){v[e]=v[e-1];}k=0;break;}}}var l;if(!(l=this._idpull[f])||l.span!=-1){l=v[k]=new dhtmlXTreeItemObject(f,d,g,this,h,1);f=v[k].id;g.childsCount++;}if(!l.htmlNode){l.label=d;l.htmlNode=this._createItem((this.checkBoxOff?1:0),l);l.htmlNode.objBelong=l;}if(u){l.images[0]=u;}if(t){l.images[1]=t;}if(s){l.images[2]=s;}var b=this._drawNewTr(l.htmlNode);if((this.XMLloadingWarning)||(this._hAdI)){l.htmlNode.parentNode.parentNode.style.display="none";}if((m)&&m.tr&&(m.tr.nextSibling)){g.htmlNode.childNodes[0].insertBefore(b,m.tr.nextSibling);}else{if(this.parsingOn==g.id){this.parsedArray[this.parsedArray.length]=b;}else{g.htmlNode.childNodes[0].appendChild(b);}}if((m)&&(!m.span)){m=null;}if(this.XMLsource){if((c)&&(c!=0)){l.XMLload=0;}else{l.XMLload=1;}}l.tr=b;b.nodem=l;if(g.itemId==0){b.childNodes[0].className="hiddenRow";}if((g._r_logic)||(this._frbtr)){this._setSrc(l.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]);}if(j){var p=j.split(",");for(var q=0;q<p.length;q++){switch(p[q]){case"SELECT":this.selectItem(f,false);break;case"CALL":this.selectItem(f,true);break;case"CHILD":l.XMLload=0;break;case"CHECKED":if(this.XMLloadingWarning){this.setCheckList+=this.dlmtr+f;}else{this.setCheck(f,1);}break;case"HCHECKED":this._setCheck(l,"unsure");break;case"OPEN":l.openMe=1;break;}}}if(!this.XMLloadingWarning){if((this._getOpenState(g)<0)&&(!this._hAdI)){this.openItem(g.id);}if(m){this._correctPlus(m);this._correctLine(m);}this._correctPlus(g);this._correctLine(g);this._correctPlus(l);if(g.childsCount>=2){this._correctPlus(v[g.childsCount-2]);this._correctLine(v[g.childsCount-2]);}if(g.childsCount!=2){this._correctPlus(v[0]);}if(this.tscheck){this._correctCheckStates(g);}if(this._onradh){if(this.xmlstate==1){var a=this.onXLE;this.onXLE=function(n){this._onradh(f);if(a){a(n);}};}else{this._onradh(f);}}}return l;};dhtmlXTreeObject.prototype.insertNewItem=function(d,h,k,c,g,f,e,b,a){var l=this._globalIdStorageFind(d);if(!l){return(-1);}var j=this._attachChildNode(l,h,k,c,g,f,e,b,a);if(!this._idpull[this.rootId].XMLload){this._idpull[this.rootId].XMLload=1;}return j;};dhtmlXTreeObject.prototype.insertNewChild=function(d,h,j,c,g,f,e,b,a){return this.insertNewItem(d,h,j,c,g,f,e,b,a);};dhtmlXTreeObject.prototype._parseXMLTree=function(f,e,k,j,g){var h=new xmlPointer(g.getXMLTopNode("tree"));f._parse(h);f._p=h;};dhtmlXTreeObject.prototype._parseItem=function(f,k,e,h){var b;if(this._srnd&&(!this._idpull[b=f.get("id")]||!this._idpull[b].span)){this._addItemSRND(k.id,b,f);return;}var g=f.get_all();if((typeof(this.waitUpdateXML)=="object")&&(!this.waitUpdateXML[g.id])){this._parse(f,g.id,1);return;}var m=[];if(g.select){m.push("SELECT");}if(g.top){m.push("TOP");}if(g.call){this.nodeAskingCall=g.id;}if(g.checked==-1){m.push("HCHECKED");}else{if(g.checked){m.push("CHECKED");}}if(g.open){m.push("OPEN");}if(this.waitUpdateXML){if(this._globalIdStorageFind(g.id)){var j=this.updateItem(g.id,g.text,g.im0,g.im1,g.im2,g.checked,g.child);}else{if(this.npl==0){m.push("TOP");}else{e=k.childNodes[this.npl];}var j=this._attachChildNode(k,g.id,g.text,0,g.im0,g.im1,g.im2,m.join(","),g.child,0,e);g.id=j.id;e=null;}}else{var j=this._attachChildNode(k,g.id,g.text,0,g.im0,g.im1,g.im2,m.join(","),g.child,(h||0),e);}if(g.tooltip){j.span.parentNode.parentNode.title=g.tooltip;}if(g.style){if(j.span.style.cssText){j.span.style.cssText+=(";"+g.style);}else{j.span.setAttribute("style",j.span.getAttribute("style")+"; "+g.style);}}if(g.radio){j._r_logic=true;}if(g.nocheckbox){var l=j.span.parentNode.previousSibling.previousSibling;l.style.display="none";j.nocheckbox=true;}if(g.disabled){if(g.checked!=null){this._setCheck(j,g.checked);}this.disableCheckbox(j,1);}j._acc=g.child||0;if(this.parserExtension){this.parserExtension._parseExtension.call(this,f,g,(k?k.id:0));}this.setItemColor(j,g.aCol,g.sCol);if(g.locked=="1"){this.lockItem(j.id,true,true);}if((g.imwidth)||(g.imheight)){this.setIconSize(g.imwidth,g.imheight,j);}if((g.closeable=="0")||(g.closeable=="1")){this.setItemCloseable(j,g.closeable);}var d="";if(g.topoffset){this.setItemTopOffset(j,g.topoffset);}if((!this.slowParse)||(typeof(this.waitUpdateXML)=="object")){if(f.sub_exists("item")){d=this._parse(f,g.id,1);}}if(d!=""){this.nodeAskingCall=d;}f.each("userdata",function(a){this.setUserData(f.get("id"),a.get("name"),a.content());},this);};dhtmlXTreeObject.prototype._parse=function(c,f,a,b){if(this._srnd&&!this.parentObject.offsetHeight){var o=this;return window.setTimeout(function(){o._parse(c,f,a,b);},100);}if(!c.exists()){return;}this.skipLock=true;if(!f){f=c.get("id");var l=c.get("dhx_security");if(l){dhtmlx.security_key=l;}if(c.get("radio")){this.htmlNode._r_logic=true;}this.parsingOn=f;this.parsedArray=new Array();this.setCheckList="";this.nodeAskingCall="";}var m=this._globalIdStorageFind(f);if(!m){return dhtmlxError.throwError("DataStructure","XML refers to not existing parent");}this.parsCount=this.parsCount?(this.parsCount+1):1;this.XMLloadingWarning=1;if((m.childsCount)&&(!b)&&(!this._edsbps)&&(!m._has_top)){var g=0;}else{var g=0;}this.npl=0;c.each("item",function(p,n){m.XMLload=1;this._parseItem(p,m,0,g);this.npl++;},this,b);if(!a){c.each("userdata",function(n){this.setUserData(c.get("id"),n.get("name"),n.content());},this);m.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=false;for(var e=m.childsCount-1;e>=0;e--){if(m.childNodes[e]._dmark){this.deleteItem(m.childNodes[e].id);}}}var j=this._globalIdStorageFind(this.parsingOn);for(var e=0;e<this.parsedArray.length;e++){m.htmlNode.childNodes[0].appendChild(this.parsedArray[e]);}this.parsedArray=[];this.lastLoadedXMLId=f;this.XMLloadingWarning=0;var k=this.setCheckList.split(this.dlmtr);for(var d=0;d<k.length;d++){if(k[d]){this.setCheck(k[d],1);}}if((this.XMLsource)&&(this.tscheck)&&(this.smcheck)&&(m.id!=this.rootId)){if(m.checkstate===0){this._setSubChecked(0,m);}else{if(m.checkstate===1){this._setSubChecked(1,m);}}}this._redrawFrom(this,null,b);if(c.get("order")&&c.get("order")!="none"){this._reorderBranch(m,c.get("order"),true);}if(this.nodeAskingCall!=""){this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]);}if(this._branchUpdate){this._branchUpdateNext(c);}}if(this.parsCount==1){this.parsingOn=null;if((!this._edsbps)||(!this._edsbpsA.length)){var h=this;window.setTimeout(function(){h.callEvent("onXLE",[h,f]);},1);this.xmlstate=0;}this.skipLock=false;}this.parsCount--;if(!a&&this.onXLE){this.onXLE(this,f);}return this.nodeAskingCall;};dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(d){var b=d.get("id");if(this._idpull[b]&&(!this._idpull[b].XMLload)){return;}this._branchUpdate++;this.smartRefreshItem(d.get("id"),d);},this);this._branchUpdate--;};dhtmlXTreeObject.prototype.checkUserData=function(b,c){if((b.nodeType==1)&&(b.tagName=="userdata")){var a=b.getAttribute("name");if((a)&&(b.childNodes[0])){this.setUserData(c,a,b.childNodes[0].data);}}};dhtmlXTreeObject.prototype._redrawFrom=function(g,a,f,b){if(!a){var d=g._globalIdStorageFind(g.lastLoadedXMLId);g.lastLoadedXMLId=-1;if(!d){return 0;}}else{d=a;}var e=0;for(var c=(f?f-1:0);c<d.childsCount;c++){if((!this._branchUpdate)||(this._getOpenState(d)==1)){if((!a)||(b==1)){d.childNodes[c].htmlNode.parentNode.parentNode.style.display="";}}if(d.childNodes[c].openMe==1){this._openItem(d.childNodes[c]);d.childNodes[c].openMe=0;}g._redrawFrom(g,d.childNodes[c]);}if((!d.unParsed)&&((d.XMLload)||(!this.XMLsource))){d._acc=e;}g._correctLine(d);g._correctPlus(d);};dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");a.className="containerTableStyle";a.style.width=this.width;a.style.height=this.height;this.parentObject.appendChild(a);return a;};dhtmlXTreeObject.prototype._xcloseAll=function(b){if(b.unParsed){return;}if(this.rootId!=b.id){if(!b.htmlNode){return;}var d=b.htmlNode.childNodes[0].childNodes;var a=d.length;for(var c=1;c<a;c++){d[c].style.display="none";}this._correctPlus(b);}for(var c=0;c<b.childsCount;c++){if(b.childNodes[c].childsCount){this._xcloseAll(b.childNodes[c]);}}};dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var b=0;b<a.childsCount;b++){this._xopenAll(a.childNodes[b]);}};dhtmlXTreeObject.prototype._correctPlus=function(b){if(!b.htmlNode){return;}var c=b.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild;var e=b.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0];var a=this.lineArray;if((this.XMLsource)&&(!b.XMLload)){var a=this.plusArray;this._setSrc(e,this.iconURL+b.images[2]);if(this._txtimg){return(c.innerHTML="[+]");}}else{if((b.childsCount)||(b.unParsed)){if((b.htmlNode.childNodes[0].childNodes[1])&&(b.htmlNode.childNodes[0].childNodes[1].style.display!="none")){if(!b.wsign){var a=this.minusArray;}this._setSrc(e,this.iconURL+b.images[1]);if(this._txtimg){return(c.innerHTML="[-]");}}else{if(!b.wsign){var a=this.plusArray;}this._setSrc(e,this.iconURL+b.images[2]);if(this._txtimg){return(c.innerHTML="[+]");}}}else{this._setSrc(e,this.iconURL+b.images[0]);}}var d=2;if(!b.treeNod.treeLinesOn){this._setSrc(c,this.imPath+a[3]);}else{if(b.parentObject){d=this._getCountStatus(b.id,b.parentObject);}this._setSrc(c,this.imPath+a[d]);}};dhtmlXTreeObject.prototype._correctLine=function(b){if(!b.htmlNode){return;}var a=b.parentObject;if(a){if((this._getLineStatus(b.id,a)==0)||(!this.treeLinesOn)){for(var c=1;c<=b.childsCount;c++){if(!b.htmlNode.childNodes[0].childNodes[c]){break;}b.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="";b.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat="";}}else{for(var c=1;c<=b.childsCount;c++){if(!b.htmlNode.childNodes[0].childNodes[c]){break;}b.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";b.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat="repeat-y";}}}};dhtmlXTreeObject.prototype._getCountStatus=function(b,a){if(a.childsCount<=1){if(a.id==this.rootId){return 4;}else{return 0;}}if(a.childNodes[0].id==b){if(a.id==this.rootId){return 2;}else{return 1;}}if(a.childNodes[a.childsCount-1].id==b){return 0;}return 1;};dhtmlXTreeObject.prototype._getLineStatus=function(b,a){if(a.childNodes[a.childsCount-1].id==b){return 0;}return 1;};dhtmlXTreeObject.prototype._HideShow=function(b,e){if((this.XMLsource)&&(!b.XMLload)){if(e==1){return;}b.XMLload=1;this._loadDynXML(b.id);return;}var d=b.htmlNode.childNodes[0].childNodes;var a=d.length;if(a>1){if(((d[1].style.display!="none")||(e==1))&&(e!=2)){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";nodestyle="none";}else{nodestyle="";}for(var c=1;c<a;c++){d[c].style.display=nodestyle;}}this._correctPlus(b);};dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode){return 0;}var b=a.htmlNode.childNodes[0].childNodes;if(b.length<=1){return 0;}if(b[1].style.display!="none"){return 1;}else{return -1;}};dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onDblClick",[this.parentObject.id,a])){return false;}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){a._HideShow(this.parentObject);}else{a._HideShow(this.parentObject,2);}if(a.checkEvent("onOpenEnd")){if(!a.xmlstate){a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]);}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe;}}return false;};dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)])){return 0;}if((this.parentObject.closeble)&&(this.parentObject.closeble!="0")){a._HideShow(this.parentObject);}else{a._HideShow(this.parentObject,2);}if(a.checkEvent("onOpenEnd")){if(!a.xmlstate){a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]);}else{a._oie_onXLE.push(a.onXLE);a.onXLE=a._epnFHe;}}};dhtmlXTreeObject.prototype._epnFHe=function(b,c,a){if(c!=this.rootId){this.callEvent("onOpenEnd",[c,b.getOpenState(c)]);}b.onXLE=b._oie_onXLE.pop();if(!a&&!b._oie_onXLE.length){if(b.onXLE){b.onXLE(b,c);}}};dhtmlXTreeObject.prototype.onRowClickDown=function(b){b=b||window.event;var a=this.parentObject.treeNod;a._selectItem(this.parentObject,b);};dhtmlXTreeObject.prototype.getSelectedItemId=function(){var b=new Array();for(var a=0;a<this._selected.length;a++){b[a]=this._selected[a].id;}return(b.join(this.dlmtr));};dhtmlXTreeObject.prototype._selectItem=function(a,b){if(this.checkEvent("onSelect")){this._onSSCFold=this.getSelectedItemId();}this._unselectItems();this._markItem(a);if(this.checkEvent("onSelect")){var c=this.getSelectedItemId();if(c!=this._onSSCFold){this.callEvent("onSelect",[c]);}}};dhtmlXTreeObject.prototype._markItem=function(a){if(a.scolor){a.span.style.color=a.scolor;}a.span.className="selectedTreeRow";a.span.parentNode.className="standartTreeSelectedRow";a.i_sel=true;this._selected[this._selected.length]=a;};dhtmlXTreeObject.prototype.getIndexById=function(b){var a=this._globalIdStorageFind(b);if(!a){return null;}return this._getIndex(a);};dhtmlXTreeObject.prototype._getIndex=function(a){var c=a.parentObject;for(var b=0;b<c.childsCount;b++){if(c.childNodes[b]==a){return b;}}};dhtmlXTreeObject.prototype._unselectItem=function(b){if((b)&&(b.i_sel)){b.span.className="standartTreeRow";b.span.parentNode.className="standartTreeRow";if(b.acolor){b.span.style.color=b.acolor;}b.i_sel=false;for(var a=0;a<this._selected.length;a++){if(!this._selected[a].i_sel){this._selected.splice(a,1);break;}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var b=this._selected[a];b.span.className="standartTreeRow";b.span.parentNode.className="standartTreeRow";if(b.acolor){b.span.style.color=b.acolor;}b.i_sel=false;}this._selected=new Array();};dhtmlXTreeObject.prototype.onRowSelect=function(d,c,g){d=d||window.event;var b=this.parentObject;if(c){b=c.parentObject;}var a=b.treeNod;var f=a.getSelectedItemId();if((!d)||(!d.skipUnSel)){a._selectItem(b,d);}if(!g){if(b.actionHandler){b.actionHandler(b.id,f);}else{a.callEvent("onClick",[b.id,f]);}}};dhtmlXTreeObject.prototype._correctCheckStates=function(e){if(!this.tscheck){return;}if(!e){return;}if(e.id==this.rootId){return;}var c=e.childNodes;var b=0;var a=0;if(e.childsCount==0){return;}for(var d=0;d<e.childsCount;d++){if(c[d].dscheck){continue;}if(c[d].checkstate==0){b=1;}else{if(c[d].checkstate==1){a=1;}else{b=1;a=1;break;}}}if((b)&&(a)){this._setCheck(e,"unsure");}else{if(b){this._setCheck(e,false);}else{this._setCheck(e,true);}}this._correctCheckStates(e.parentObject);};dhtmlXTreeObject.prototype.onCheckBoxClick=function(a){if(!this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){return;}if(this.parentObject.dscheck){return true;}if(this.treeNod.tscheck){if(this.parentObject.checkstate==1){this.treeNod._setSubChecked(false,this.parentObject);}else{this.treeNod._setSubChecked(true,this.parentObject);}}else{if(this.parentObject.checkstate==1){this.treeNod._setCheck(this.parentObject,false);}else{this.treeNod._setCheck(this.parentObject,true);}}this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate]);};dhtmlXTreeObject.prototype._createItem=function(m,l,h){var n=document.createElement("table");n.cellSpacing=0;n.cellPadding=0;n.border=0;if(this.hfMode){n.style.tableLayout="fixed";}n.style.margin=0;n.style.padding=0;var g=document.createElement("tbody");var k=document.createElement("tr");var d=document.createElement("td");d.className="standartTreeImage";if(this._txtimg){var e=document.createElement("div");d.appendChild(e);e.className="dhx_tree_textSign";}else{var e=this._getImg(l.id);e.border="0";if(e.tagName=="IMG"){e.align="absmiddle";}d.appendChild(e);e.style.padding=0;e.style.margin=0;e.style.width=this.def_line_img_x;e.style.height=this.def_line_img_y;}var c=document.createElement("td");var j=this._getImg(this.cBROf?this.rootId:l.id);j.checked=0;this._setSrc(j,this.imPath+this.checkArray[0]);j.style.width="16px";j.style.height="16px";if(!m){c.style.display="none";}c.appendChild(j);if((!this.cBROf)&&(j.tagName=="IMG")){j.align="absmiddle";}j.onclick=this.onCheckBoxClick;j.treeNod=this;j.parentObject=l;if(!window._KHTMLrv){c.width="20px";}else{c.width="16px";}var b=document.createElement("td");b.className="standartTreeImage";var f=this._getImg(this.timgen?l.id:this.rootId);f.onmousedown=this._preventNsDrag;f.ondragstart=this._preventNsDrag;f.border="0";if(this._aimgs){f.parentObject=l;if(f.tagName=="IMG"){f.align="absmiddle";}f.onclick=this.onRowSelect;}if(!h){this._setSrc(f,this.iconURL+this.imageArray[0]);}b.appendChild(f);f.style.padding=0;f.style.margin=0;if(this.timgen){b.style.width=f.style.width=this.def_img_x;f.style.height=this.def_img_y;}else{f.style.width="0px";f.style.height="0px";if(_isOpera||window._KHTMLrv){b.style.display="none";}}var a=document.createElement("td");a.className="standartTreeRow";l.span=document.createElement("span");l.span.className="standartTreeRow";if(this.mlitems){l.span.style.width=this.mlitems;l.span.style.display="block";}else{a.noWrap=true;}if(_isIE&&_isIE>7){a.style.width="999999px";}else{if(!window._KHTMLrv){a.style.width="100%";}}l.span.innerHTML=l.label;a.appendChild(l.span);a.parentObject=l;d.parentObject=l;a.onclick=this.onRowSelect;d.onclick=this.onRowClick;a.ondblclick=this.onRowClick2;if(this.ettip){k.title=l.label;}if(this.dragAndDropOff){if(this._aimgs){this.dragger.addDraggableItem(b,this);b.parentObject=l;}this.dragger.addDraggableItem(a,this);}l.span.style.paddingLeft="5px";l.span.style.paddingRight="5px";a.style.verticalAlign="";a.style.fontSize="10pt";a.style.cursor=this.style_pointer;k.appendChild(d);k.appendChild(c);k.appendChild(b);k.appendChild(a);g.appendChild(k);n.appendChild(g);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut")){k.onmousemove=this._itemMouseIn;k[(_isIE)?"onmouseleave":"onmouseout"]=this._itemMouseOut;}return n;};dhtmlXTreeObject.prototype.setImagePath=function(a){this.imPath=a;this.iconURL=a;};dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a;};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a);};dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a);};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a);};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a;};dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a);};dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a);};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a);};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a);};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a);};dhtmlXTreeObject.prototype.openAllItems=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0;}this._xopenAll(a);};dhtmlXTreeObject.prototype.getOpenState=function(b){var a=this._globalIdStorageFind(b);if(!a){return"";}return this._getOpenState(a);};dhtmlXTreeObject.prototype.closeAllItems=function(b){if(b===window.undefined){b=this.rootId;}var a=this._globalIdStorageFind(b);if(!a){return 0;}this._xcloseAll(a);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";};dhtmlXTreeObject.prototype.setUserData=function(d,b,c){var a=this._globalIdStorageFind(d,0,true);if(!a){return;}if(b=="hint"){a.htmlNode.childNodes[0].childNodes[0].title=c;}if(typeof(a.userData["t_"+b])=="undefined"){if(!a._userdatalist){a._userdatalist=b;}else{a._userdatalist+=","+b;}}a.userData["t_"+b]=c;};dhtmlXTreeObject.prototype.getUserData=function(c,b){var a=this._globalIdStorageFind(c,0,true);if(!a){return;}return a.userData["t_"+b];};dhtmlXTreeObject.prototype.getItemColor=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0;}var b=new Object();if(a.acolor){b.acolor=a.acolor;}if(a.scolor){b.scolor=a.scolor;}return b;};dhtmlXTreeObject.prototype.setItemColor=function(c,b,d){if((c)&&(c.span)){var a=c;}else{var a=this._globalIdStorageFind(c);}if(!a){return 0;}else{if(a.i_sel){if(d){a.span.style.color=d;}}else{if(b){a.span.style.color=b;}}if(d){a.scolor=d;}if(b){a.acolor=b;}}};dhtmlXTreeObject.prototype.getItemText=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0;}return(a.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML);};dhtmlXTreeObject.prototype.getParentId=function(b){var a=this._globalIdStorageFind(b);if((!a)||(!a.parentObject)){return"";}return a.parentObject.id;};dhtmlXTreeObject.prototype.changeItemId=function(b,c){if(b==c){return;}var a=this._globalIdStorageFind(b);if(!a){return 0;}a.id=c;a.span.contextMenuId=c;this._idpull[c]=this._idpull[b];delete this._idpull[b];};dhtmlXTreeObject.prototype.doCut=function(){if(this.nodeCut){this.clearCut();}this.nodeCut=(new Array()).concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b._cimgs=new Array();b._cimgs[0]=b.images[0];b._cimgs[1]=b.images[1];b._cimgs[2]=b.images[2];b.images[0]=b.images[1]=b.images[2]=this.cutImage;this._correctPlus(b);}};dhtmlXTreeObject.prototype.doPaste=function(c){var a=this._globalIdStorageFind(c);if(!a){return 0;}for(var b=0;b<this.nodeCut.length;b++){if(this._checkPNodes(a,this.nodeCut[b])){continue;}this._moveNode(this.nodeCut[b],a);}this.clearCut();};dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b.images[0]=b._cimgs[0];b.images[1]=b._cimgs[1];b.images[2]=b._cimgs[2];this._correctPlus(b);}this.nodeCut=new Array();};dhtmlXTreeObject.prototype._moveNode=function(a,b){return this._moveNodeTo(a,b);};dhtmlXTreeObject.prototype._fixNodesCollection=function(h,f){var b=0;var d=0;var g=h.childNodes;var a=h.childsCount-1;if(f==g[a]){return;}for(var e=0;e<a;e++){if(g[e]==g[a]){g[e]=g[e+1];g[e+1]=g[a];}}for(var e=0;e<a+1;e++){if(b){var c=g[e];g[e]=b;b=c;}else{if(g[e]==f){b=g[e];g[e]=g[a];}}}};dhtmlXTreeObject.prototype._recreateBranch=function(f,h,e,a){var b;var j="";if(e){for(b=0;b<h.childsCount;b++){if(h.childNodes[b]==e){break;}}if(b!=0){e=h.childNodes[b-1];}else{j="TOP";e="";}}var c=this._onradh;this._onradh=null;var g=this._attachChildNode(h,f.id,f.label,0,f.images[0],f.images[1],f.images[2],j,0,e);g._userdatalist=f._userdatalist;g.userData=f.userData.clone();if(f._attrs){g._attrs={};for(var d in f._attrs){g._attrs[d]=f._attrs[d];}}g.XMLload=f.XMLload;if(c){this._onradh=c;this._onradh(g.id);}for(var b=0;b<f.childsCount;b++){this._recreateBranch(f.childNodes[b],g,0,1);}return g;};dhtmlXTreeObject.prototype._moveNodeTo=function(m,o,l){if(m.treeNod._nonTrivialNode){return m.treeNod._nonTrivialNode(this,o,l,m);}if(this._checkPNodes(o,m)){return false;}if(o.mytype){var g=(m.treeNod.lWin!=o.lWin);}else{var g=(m.treeNod.lWin!=o.treeNod.lWin);}if(!this.callEvent("onDrag",[m.id,o.id,(l?l.id:null),m.treeNod,o.treeNod])){return false;}if((o.XMLload==0)&&(this.XMLsource)){o.XMLload=1;this._loadDynXML(o.id);}this.openItem(o.id);var b=m.treeNod;var j=m.parentObject.childsCount;var k=m.parentObject;if((g)||(b.dpcpy)){var d=m.id;m=this._recreateBranch(m,o,l);if(!b.dpcpy){b.deleteItem(d);}}else{var e=o.childsCount;var n=o.childNodes;if(e==0){o._open=true;}b._unselectItem(m);n[e]=m;m.treeNod=o.treeNod;o.childsCount++;var h=this._drawNewTr(n[e].htmlNode);if(!l){o.htmlNode.childNodes[0].appendChild(h);if(this.dadmode==1){this._fixNodesCollection(o,l);}}else{o.htmlNode.childNodes[0].insertBefore(h,l.tr);this._fixNodesCollection(o,l);n=o.childNodes;}}if((!b.dpcpy)&&(!g)){var a=m.tr;if((document.all)&&(navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1)){window.setTimeout(function(){a.parentNode.removeChild(a);},250);}else{m.parentObject.htmlNode.childNodes[0].removeChild(m.tr);}if((!l)||(o!=m.parentObject)){for(var f=0;f<k.childsCount;f++){if(k.childNodes[f].id==m.id){k.childNodes[f]=0;break;}}}else{k.childNodes[k.childsCount-1]=0;}b._compressChildList(k.childsCount,k.childNodes);k.childsCount--;}if((!g)&&(!b.dpcpy)){m.tr=h;h.nodem=m;m.parentObject=o;if(b!=o.treeNod){if(m.treeNod._registerBranch(m,b)){return;}this._clearStyles(m);this._redrawFrom(this,m.parentObject);if(this._onradh){this._onradh(m.id);}}this._correctPlus(o);this._correctLine(o);this._correctLine(m);this._correctPlus(m);if(l){this._correctPlus(l);}else{if(o.childsCount>=2){this._correctPlus(n[o.childsCount-2]);this._correctLine(n[o.childsCount-2]);}}this._correctPlus(n[o.childsCount-1]);if(this.tscheck){this._correctCheckStates(o);}if(b.tscheck){b._correctCheckStates(k);}}if(j>1){b._correctPlus(k.childNodes[j-2]);b._correctLine(k.childNodes[j-2]);}b._correctPlus(k);b._correctLine(k);this.callEvent("onDrop",[m.id,o.id,(l?l.id:null),b,o.treeNod]);return m.id;};dhtmlXTreeObject.prototype._clearStyles=function(a){if(!a.htmlNode){return;}var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1];var b=d.nextSibling.nextSibling;a.span.innerHTML=a.label;a.i_sel=false;if(a._aimgs){this.dragger.removeDraggableItem(d.nextSibling);}if(this.checkBoxOff){d.childNodes[0].style.display="";d.childNodes[0].onclick=this.onCheckBoxClick;this._setSrc(d.childNodes[0],this.imPath+this.checkArray[a.checkstate]);}else{d.childNodes[0].style.display="none";}d.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(b);if(this.dragAndDropOff){this.dragger.addDraggableItem(b,this);}if(this._aimgs){this.dragger.addDraggableItem(d.nextSibling,this);}b.childNodes[0].className="standartTreeRow";b.onclick=this.onRowSelect;b.ondblclick=this.onRowClick2;d.previousSibling.onclick=this.onRowClick;this._correctLine(a);this._correctPlus(a);for(var c=0;c<a.childsCount;c++){this._clearStyles(a.childNodes[c]);}};dhtmlXTreeObject.prototype._registerBranch=function(b,a){if(a){a._globalIdStorageSub(b.id);}b.id=this._globalIdStorageAdd(b.id,b);b.treeNod=this;for(var c=0;c<b.childsCount;c++){this._registerBranch(b.childNodes[c],a);}return 0;};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=convertStringToBoolean(a);};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=true;this.attachEvent("onMouseIn",a);};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=true;this.attachEvent("onMouseOut",a);};dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=convertStringToBoolean(a);};dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=convertStringToBoolean(a);};dhtmlXTreeObject.prototype.enableCheckBoxes=function(b,a){this.checkBoxOff=convertStringToBoolean(b);this.cBROf=(!(this.checkBoxOff||convertStringToBoolean(a)));};dhtmlXTreeObject.prototype.setStdImages=function(a,c,b){this.imageArray[0]=a;this.imageArray[1]=c;this.imageArray[2]=b;};dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=convertStringToBoolean(a);};dhtmlXTreeObject.prototype.setImageArrays=function(d,a,f,e,c,b){switch(d){case"plus":this.plusArray[0]=a;this.plusArray[1]=f;this.plusArray[2]=e;this.plusArray[3]=c;this.plusArray[4]=b;break;case"minus":this.minusArray[0]=a;this.minusArray[1]=f;this.minusArray[2]=e;this.minusArray[3]=c;this.minusArray[4]=b;break;}};dhtmlXTreeObject.prototype.openItem=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0;}else{return this._openItem(a);}};dhtmlXTreeObject.prototype._openItem=function(a){var b=this._getOpenState(a);if((b<0)||(((this.XMLsource)&&(!a.XMLload)))){if(!this.callEvent("onOpenStart",[a.id,b])){return 0;}this._HideShow(a,2);if(this.checkEvent("onOpenEnd")){if(this.onXLE==this._epnFHe){this._epnFHe(this,a.id,true);}if(!this.xmlstate||!this.XMLsource){this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)]);}else{this._oie_onXLE.push(this.onXLE);this.onXLE=this._epnFHe;}}}else{if(this._srnd){this._HideShow(a,2);}}if(a.parentObject&&!this._skip_open_parent){this._openItem(a.parentObject);}};dhtmlXTreeObject.prototype.closeItem=function(b){if(this.rootId==b){return 0;}var a=this._globalIdStorageFind(b);if(!a){return 0;}if(a.closeble){this._HideShow(a,1);}};dhtmlXTreeObject.prototype.getLevel=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0;}return this._getNodeLevel(a,0);};dhtmlXTreeObject.prototype.setItemCloseable=function(c,a){a=convertStringToBoolean(a);if((c)&&(c.span)){var b=c;}else{var b=this._globalIdStorageFind(c);}if(!b){return 0;}b.closeble=a;};dhtmlXTreeObject.prototype._getNodeLevel=function(a,b){if(a.parentObject){return this._getNodeLevel(a.parentObject,b+1);}return(b);};dhtmlXTreeObject.prototype.hasChildren=function(b){var a=this._globalIdStorageFind(b);if(!a){return 0;}else{if((this.XMLsource)&&(!a.XMLload)){return true;}else{return a.childsCount;}}};dhtmlXTreeObject.prototype._getLeafCount=function(e){var d=0;for(var c=0;c<e.childsCount;c++){if(e.childNodes[c].childsCount==0){d++;}}return d;};dhtmlXTreeObject.prototype.setItemText=function(d,c,b){var a=this._globalIdStorageFind(d);if(!a){return 0;}a.label=c;a.span.innerHTML=c;a.span.parentNode.parentNode.title=b||"";};dhtmlXTreeObject.prototype.getItemTooltip=function(b){var a=this._globalIdStorageFind(b);if(!a){return"";}return(a.span.parentNode.parentNode._dhx_title||a.span.parentNode.parentNode.title||"");};dhtmlXTreeObject.prototype.refreshItem=function(b){if(!b){b=this.rootId;}var a=this._globalIdStorageFind(b);this.deleteChildItems(b);this._loadDynXML(b);};dhtmlXTreeObject.prototype.setItemImage2=function(d,a,e,c){var b=this._globalIdStorageFind(d);if(!b){return 0;}b.images[1]=e;b.images[2]=c;b.images[0]=a;this._correctPlus(b);};dhtmlXTreeObject.prototype.setItemImage=function(c,a,d){var b=this._globalIdStorageFind(c);if(!b){return 0;}if(d){b.images[1]=a;b.images[2]=d;}else{b.images[0]=a;}this._correctPlus(b);};dhtmlXTreeObject.prototype.getSubItems=function(c){var a=this._globalIdStorageFind(c,0,1);if(!a){return 0;}var b="";for(i=0;i<a.childsCount;i++){if(!b){b=""+a.childNodes[i].id;}else{b+=this.dlmtr+a.childNodes[i].id;}}return b;};dhtmlXTreeObject.prototype.Cj=function(a,e,b){var a=a.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");a=new RegExp(a.replace(/([\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi");if(!b){b=this._selected[0];if(!b){b=this.htmlNode;}}var d=b;if(!e){if((b.unParsed)&&((this.sy(b.unParsed.d,"text",a)))){this.tK(b);}b=this._getNextNode(d);if(b==-1){b=this.htmlNode.childNodes[0];}}else{var c=this._getPrevNode(d);if(c==-1){c=this._lastChild(this.htmlNode);}if((c.unParsed)&&((this.sy(c.unParsed.d,"text",a)))){this.tK(c);b=this._getPrevNode(d);}else{b=c;}if(b==-1){b=this._lastChild(this.htmlNode);}}while((b)&&(b!=d)){if((b.label)&&(b.label.search(a)!=-1)){return(b);}if(!e){if(b==-1){if(d==this.htmlNode){break;}b=this.htmlNode.childNodes[0];}if((b.unParsed)&&((this.sy(b.unParsed.d,"text",a)))){this.tK(b);}b=this._getNextNode(b);if(b==-1){b=this.htmlNode;}}else{var c=this._getPrevNode(b);if(c==-1){c=this._lastChild(this.htmlNode);}if((c.unParsed)&&((this.sy(c.unParsed.d,"text",a)))){this.tK(c);b=this._getPrevNode(b);}else{b=c;}if(b==-1){b=this._lastChild(this.htmlNode);}}}return null;};dhtmlXTreeObject.prototype._getNextNode=function(a,b){if((!b)&&(a.childsCount)){return a.childNodes[0];}if(a==this.htmlNode){return -1;}if((a.tr)&&(a.tr.nextSibling)&&(a.tr.nextSibling.nodem)){return a.tr.nextSibling.nodem;}return this._getNextNode(a.parentObject,true);};dhtmlXTreeObject.prototype.findItem=function(a,c,b,e){if(e==null){e=true;}var d=this.Cj(a,c,(b?this.htmlNode:null));if(d){this.selectItem(d.id,e);this._focusNode(d);return d.id;}else{return null;}};dhtmlXTreeObject.prototype._getAllScraggyItems=function(c){var d="";for(var b=0;b<c.childsCount;b++){if((c.childNodes[b].unParsed)||(c.childNodes[b].childsCount>0)){if(c.childNodes[b].unParsed){var a=this._getAllScraggyItemsXML(c.childNodes[b].unParsed,1);}else{var a=this._getAllScraggyItems(c.childNodes[b]);}if(a){if(d){d+=this.dlmtr+a;}else{d=a;}}}else{if(!d){d=""+c.childNodes[b].id;}else{d+=this.dlmtr+c.childNodes[b].id;}}}return d;};dhtmlXTreeObject.prototype._getAllFatItems=function(c){var d="";for(var b=0;b<c.childsCount;b++){if((c.childNodes[b].unParsed)||(c.childNodes[b].childsCount>0)){if(!d){d=""+c.childNodes[b].id;}else{d+=this.dlmtr+c.childNodes[b].id;}if(c.childNodes[b].unParsed){var a=this._getAllFatItemsXML(c.childNodes[b].unParsed,1);}else{var a=this._getAllFatItems(c.childNodes[b]);}if(a){d+=this.dlmtr+a;}}}return d;};dhtmlXTreeObject.prototype._getAllSubItems=function(f,e,d){if(d){b=d;}else{var b=this._globalIdStorageFind(f);}if(!b){return 0;}e="";for(var c=0;c<b.childsCount;c++){if(!e){e=""+b.childNodes[c].id;}else{e+=this.dlmtr+b.childNodes[c].id;}var a=this._getAllSubItems(0,e,b.childNodes[c]);if(a){e+=this.dlmtr+a;}}return e;};dhtmlXTreeObject.prototype.selectItem=function(d,c,b){c=convertStringToBoolean(c);var a=this._globalIdStorageFind(d);if((!a)||(!a.parentObject)){return 0;}if(this.XMLloadingWarning){a.parentObject.openMe=1;}else{this._openItem(a.parentObject);}var e=null;if(b){e=new Object;e.ctrlKey=true;if(a.i_sel){e.skipUnSel=true;}}if(c){this.onRowSelect(e,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],false);}else{this.onRowSelect(e,a.htmlNode.childNodes[0].childNodes[0].childNodes[3],true);}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){var b=new Array();for(var a=0;a<this._selected.length;a++){b[a]=this._selected[a].span.innerHTML;}return(b.join(this.dlmtr));};dhtmlXTreeObject.prototype._compressChildList=function(a,c){a--;for(var b=0;b<a;b++){if(c[b]==0){c[b]=c[b+1];c[b+1]=0;}}};dhtmlXTreeObject.prototype._deleteNode=function(g,e,j){if((!e)||(!e.parentObject)){return 0;}var a=0;var b=0;if(e.tr.nextSibling){a=e.tr.nextSibling.nodem;}if(e.tr.previousSibling){b=e.tr.previousSibling.nodem;}var f=e.parentObject;var c=f.childsCount;var h=f.childNodes;for(var d=0;d<c;d++){if(h[d].id==g){if(!j){f.htmlNode.childNodes[0].removeChild(h[d].tr);}h[d]=0;break;}}this._compressChildList(c,h);if(!j){f.childsCount--;}if(a){this._correctPlus(a);this._correctLine(a);}if(b){this._correctPlus(b);this._correctLine(b);}if(this.tscheck){this._correctCheckStates(f);}if(!j){this._globalIdStorageRecSub(e);}};dhtmlXTreeObject.prototype.setCheck=function(c,b){var a=this._globalIdStorageFind(c,0,1);if(!a){return;}if(b==="unsure"){this._setCheck(a,b);}else{b=convertStringToBoolean(b);if((this.tscheck)&&(this.smcheck)){this._setSubChecked(b,a);}else{this._setCheck(a,b);}}if(this.smcheck){this._correctCheckStates(a.parentObject);}};dhtmlXTreeObject.prototype._setCheck=function(a,c){if(!a){return;}if(((a.parentObject._r_logic)||(this._frbtr))&&(c)){if(this._frbtrs){if(this._frbtrL){this.setCheck(this._frbtrL.id,0);}this._frbtrL=a;}else{for(var b=0;b<a.parentObject.childsCount;b++){this._setCheck(a.parentObject.childNodes[b],0);}}}var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(c=="unsure"){a.checkstate=2;}else{if(c){a.checkstate=1;}else{a.checkstate=0;}}if(a.dscheck){a.checkstate=a.dscheck;}this._setSrc(d,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate]);};dhtmlXTreeObject.prototype.setSubChecked=function(c,b){var a=this._globalIdStorageFind(c);this._setSubChecked(b,a);this._correctCheckStates(a.parentObject);};dhtmlXTreeObject.prototype._setSubChecked=function(c,a){c=convertStringToBoolean(c);if(!a){return;}if(((a.parentObject._r_logic)||(this._frbtr))&&(c)){for(var b=0;b<a.parentObject.childsCount;b++){this._setSubChecked(0,a.parentObject.childNodes[b]);}}if(a._r_logic||this._frbtr){this._setSubChecked(c,a.childNodes[0]);}else{for(var b=0;b<a.childsCount;b++){this._setSubChecked(c,a.childNodes[b]);}}var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];if(c){a.checkstate=1;}else{a.checkstate=0;}if(a.dscheck){a.checkstate=a.dscheck;}this._setSrc(d,this.imPath+((a.parentObject._r_logic||this._frbtr)?this.radioArray:this.checkArray)[a.checkstate]);};dhtmlXTreeObject.prototype.isItemChecked=function(b){var a=this._globalIdStorageFind(b);if(!a){return;}return a.checkstate;};dhtmlXTreeObject.prototype.deleteChildItems=function(d){var a=this._globalIdStorageFind(d);if(!a){return;}var b=a.childsCount;for(var c=0;c<b;c++){this._deleteNode(a.childNodes[0].id,a.childNodes[0]);}};dhtmlXTreeObject.prototype.deleteItem=function(c,a){if((!this._onrdlh)||(this._onrdlh(c))){var b=this._deleteItem(c,a);}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";};dhtmlXTreeObject.prototype._deleteItem=function(f,b,e){b=convertStringToBoolean(b);var a=this._globalIdStorageFind(f);if(!a){return;}var c=this.getParentId(f);var d=a.parentObject;this._deleteNode(f,a,e);if(this._editCell&&this._editCell.id==f){this._editCell=null;}this._correctPlus(d);this._correctLine(d);if((b)&&(c!=this.rootId)){this.selectItem(c,1);}return d;};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var b=0;b<a.childsCount;b++){this._globalIdStorageRecSub(a.childNodes[b]);this._globalIdStorageSub(a.childNodes[b].id);}this._globalIdStorageSub(a.id);var c=a;c.span=null;c.tr.nodem=null;c.tr=null;c.htmlNode=null;};dhtmlXTreeObject.prototype.insertNewNext=function(h,l,k,c,f,e,d,b,a){var g=this._globalIdStorageFind(h);if((!g)||(!g.parentObject)){return(0);}var j=this._attachChildNode(0,l,k,c,f,e,d,b,a,g);return j;};dhtmlXTreeObject.prototype.getItemIdByIndex=function(c,a){var b=this._globalIdStorageFind(c);if((!b)||(a>=b.childsCount)){return null;}return b.childNodes[a].id;};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(c,a){var b=this._globalIdStorageFind(c);if((!b)||(a>=b.childsCount)){return null;}return b.childNodes[a].id;};dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a);};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,"");this._lastMark=null;}this.allTree.className=this.allTree.className.replace(" selectionBox","");};dhtmlXTreeObject.prototype.enableDragAndDrop=function(b,a){if(b=="temporary_disabled"){this.dADTempOff=false;b=true;}else{this.dADTempOff=true;}this.dragAndDropOff=convertStringToBoolean(b);if(this.dragAndDropOff){this.dragger.addDragLanding(this.allTree,this);}if(arguments.length>1){this._ddronr=(!convertStringToBoolean(a));}};dhtmlXTreeObject.prototype._setMove=function(e,c,f){if(e.parentObject.span){var d=getAbsoluteTop(e);var b=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;var a=e.parentObject.span;a.className+=" dragAndDropRow";this._lastMark=a;this._autoScroll(null,d,b);}};dhtmlXTreeObject.prototype._autoScroll=function(c,b,a){if(this.autoScroll){if(c){b=getAbsoluteTop(c);a=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;}if((b-a-parseInt(this.allTree.scrollTop))>(parseInt(this.allTree.offsetHeight)-50)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20;}if((b-a)<(parseInt(this.allTree.scrollTop)+30)){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20;}}};dhtmlXTreeObject.prototype._createDragNode=function(f,d){if(!this.dADTempOff){return null;}var c=f.parentObject;if(!this.callEvent("onBeforeDrag",[c.id,d])){return null;}if(!c.i_sel){this._selectItem(c,d);}var b=document.createElement("div");var g=new Array();if(this._itim_dg){for(var a=0;a<this._selected.length;a++){g[a]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[a].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[a].span.innerHTML+"</td></tr></table>";}}else{g=this.getSelectedItemText().split(this.dlmtr);}b.innerHTML=g.join("");b.style.position="absolute";b.className="dragSpanDiv";this._dragged=(new Array()).concat(this._selected);return b;};dhtmlXTreeObject.prototype._focusNode=function(a){var b=getAbsoluteTop(a.htmlNode)-getAbsoluteTop(this.allTree);if((b>(this.allTree.scrollTop+this.allTree.offsetHeight-30))||(b>=300)||(b<0)){this.allTree.scrollTop=b+this.allTree.scrollTop;}};dhtmlXTreeObject.prototype._preventNsDrag=function(a){if((a)&&(a.preventDefault)){a.preventDefault();return false;}return false;};dhtmlXTreeObject.prototype._drag=function(g,h,a){if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer);}if(!a.parentObject){a=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];this.dadmodec=0;}this._clearMove();var f=g.parentObject.treeNod;if((f)&&(f._clearMove)){f._clearMove("");}if((!this.dragMove)||(this.dragMove())){if((!f)||(!f._clearMove)||(!f._dragged)){var d=new Array(g.parentObject);}else{var d=f._dragged;}var b=a.parentObject;for(var e=0;e<d.length;e++){var c=this._moveNode(d[e],b);if((this.dadmodec)&&(c!==false)){b=this._globalIdStorageFind(c,true,true);}if((c)&&(!this._sADnD)){this.selectItem(c,0,1);}}}if(f){f._dragged=new Array();}};dhtmlXTreeObject.prototype._dragIn=function(f,d,a,h){if(!this.dADTempOff){return 0;}var g=d.parentObject;var b=f.parentObject;if((!b)&&(this._ddronr)){return;}if(!this.callEvent("onDragIn",[g.id,b?b.id:null,g.treeNod,this])){if(b){this._autoScroll(f);}return 0;}if(!b){this.allTree.className+=" selectionBox";}else{if(g.childNodes==null){this._setMove(f,a,h);return f;}var e=g.treeNod;for(var c=0;c<e._dragged.length;c++){if(this._checkPNodes(b,e._dragged[c])){this._autoScroll(f);return 0;}}this._setMove(f,a,h);if(this._getOpenState(b)<=0){this._autoOpenId=b.id;this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1000);}}return f;};dhtmlXTreeObject.prototype._autoOpenItem=function(b,a){a.openItem(a._autoOpenId);};dhtmlXTreeObject.prototype._dragOut=function(a){this._clearMove();if(this._autoOpenTimer){clearTimeout(this._autoOpenTimer);}};dhtmlXTreeObject.prototype.moveItem=function(h,g,c,b){var a=this._globalIdStorageFind(h);if(!a){return(0);}switch(g){case"right":alert("Not supported yet");break;case"item_child":var e=(b||this)._globalIdStorageFind(c);if(!e){return(0);}(b||this)._moveNodeTo(a,e,0);break;case"item_sibling":var e=(b||this)._globalIdStorageFind(c);if(!e){return(0);}(b||this)._moveNodeTo(a,e.parentObject,e);break;case"item_sibling_next":var e=(b||this)._globalIdStorageFind(c);if(!e){return(0);}if((e.tr)&&(e.tr.nextSibling)&&(e.tr.nextSibling.nodem)){(b||this)._moveNodeTo(a,e.parentObject,e.tr.nextSibling.nodem);}else{(b||this)._moveNodeTo(a,e.parentObject);}break;case"left":if(a.parentObject.parentObject){this._moveNodeTo(a,a.parentObject.parentObject,a.parentObject);}break;case"up":var f=this._getPrevNode(a);if((f==-1)||(!f.parentObject)){return;}this._moveNodeTo(a,f.parentObject,f);break;case"up_strict":var f=this._getIndex(a);if(f!=0){this._moveNodeTo(a,a.parentObject,a.parentObject.childNodes[f-1]);}break;case"down_strict":var f=this._getIndex(a);var d=a.parentObject.childsCount-2;if(f==d){this._moveNodeTo(a,a.parentObject);}else{if(f<d){this._moveNodeTo(a,a.parentObject,a.parentObject.childNodes[f+2]);}}break;case"down":var f=this._getNextNode(this._lastChild(a));if((f==-1)||(!f.parentObject)){return;}if(f.parentObject==a.parentObject){var f=this._getNextNode(f);}if(f==-1){this._moveNodeTo(a,a.parentObject);}else{if((f==-1)||(!f.parentObject)){return;}this._moveNodeTo(a,f.parentObject,f);}break;}if(_isIE&&_isIE<8){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";}};dhtmlXTreeObject.prototype._loadDynXML=function(c,b){b=b||this.XMLsource;var a=(new Date()).valueOf();this._ld_id=c;this.loadXML(b+getUrlSymbol(b)+"uid="+a+"&id="+this._escape(c));};dhtmlXTreeObject.prototype._checkPNodes=function(b,a){if(this._dcheckf){return false;}if(a==b){return 1;}if(b.parentObject){return this._checkPNodes(b.parentObject,a);}else{return 0;}};dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=convertStringToBoolean(a);};dhtmlXTreeObject.prototype.preventIECaching=function(a){this.no_cashe=convertStringToBoolean(a);this.XMLLoader.rSeed=this.no_cashe;};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(c,b){if(typeof(c)!="object"){var a=this._globalIdStorageFind(c,0,1);}else{var a=c;}if(!a){return;}a.dscheck=convertStringToBoolean(b)?(((a.checkstate||0)%3)+3):((a.checkstate>2)?(a.checkstate-3):a.checkstate);this._setCheck(a);if(a.dscheck<3){a.dscheck=false;}};dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a;};dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=true;this.ehlta=convertStringToBoolean(a);};dhtmlXTreeObject.prototype._itemMouseOut=function(){var b=this.childNodes[3].parentObject;var a=b.treeNod;a.callEvent("onMouseOut",[b.id]);if(b.id==a._l_onMSI){a._l_onMSI=null;}if(!a.ehlta){return;}b.span.className=b.span.className.replace("_lor","");b.span.parentNode.className=b.span.parentNode.className.replace("standartTreeLightRow","standartTreeRow");};dhtmlXTreeObject.prototype._itemMouseIn=function(){var b=this.childNodes[3].parentObject;var a=b.treeNod;if(a._l_onMSI!=b.id){a.callEvent("onMouseIn",[b.id]);}a._l_onMSI=b.id;if(!a.ehlta){return;}b.span.className=b.span.className.replace("_lor","");b.span.className=b.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor");b.span.parentNode.className=b.span.parentNode.className.replace("standartTreeRow","standartTreeLightRow");};dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=convertStringToBoolean(a);};dhtmlXTreeObject.prototype.focusItem=function(b){var a=this._globalIdStorageFind(b);if(!a){return(0);}this._focusNode(a);};dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a);};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode);};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(c){var d="";for(var b=0;b<c.childsCount;b++){if((c.childNodes[b].unParsed)||(c.childNodes[b].childsCount>0)){if(c.childNodes[b].unParsed){var a=this._getAllScraggyItemsXML(c.childNodes[b].unParsed,1);}else{var a=this._getAllScraggyItems(c.childNodes[b]);}if(a){if(d){d+=this.dlmtr+a;}else{d=a;}}}else{if(!d){d=""+c.childNodes[b].id;}else{d+=this.dlmtr+c.childNodes[b].id;}}}return d;};dhtmlXTreeObject.prototype._getAllFatItems=function(c){var d="";for(var b=0;b<c.childsCount;b++){if((c.childNodes[b].unParsed)||(c.childNodes[b].childsCount>0)){if(!d){d=""+c.childNodes[b].id;}else{d+=this.dlmtr+c.childNodes[b].id;}if(c.childNodes[b].unParsed){var a=this._getAllFatItemsXML(c.childNodes[b].unParsed,1);}else{var a=this._getAllFatItems(c.childNodes[b]);}if(a){d+=this.dlmtr+a;}}}return d;};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode);};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1);};dhtmlXTreeObject.prototype.getAllUnchecked=function(a){if(a){a=this._globalIdStorageFind(a);}return this._getAllChecked(a,"",0);};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2);};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)];var b=this._getAllChecked("","",2);if(b){a.push(b);}return a.join(this.dlmtr);};dhtmlXTreeObject.prototype._getAllChecked=function(d,c,e){if(!d){d=this.htmlNode;}if(d.checkstate==e){if(!d.nocheckbox){if(c){c+=this.dlmtr+d.id;}else{c=""+d.id;}}}var a=d.childsCount;for(var b=0;b<a;b++){c=this._getAllChecked(d.childNodes[b],c,e);}if(c){return c;}else{return"";}};dhtmlXTreeObject.prototype.setItemStyle=function(d,c,b){var b=b||false;var a=this._globalIdStorageFind(d);if(!a){return 0;}if(!a.span.style.cssText){a.span.setAttribute("style",a.span.getAttribute("style")+"; "+c);}else{a.span.style.cssText=b?c:a.span.style.cssText+";"+c;}};dhtmlXTreeObject.prototype.setItemColor=function(f,e,h){var g=f&&f.span?f:this._globalIdStorageFind(f);if(g){if(g.i_sel){if(h){g.span.style.color=h;}}else{if(e){g.span.style.color=e;}}if(h){g.scolor=h;}if(e){g.acolor=e;}}else{return 0;}};dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=convertStringToBoolean(a);};dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a);};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=convertStringToBoolean(a);};dhtmlXTreeObject.prototype.setSkin=function(a){var b=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=b+" dhxtree_"+a;if(a=="dhx_terrace"){this.enableTreeLines(false);}};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,(a.width||"100%"),(a.height||"100%"),(a.root_id||0)];},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{});})();dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(d,f,b){var c=this._loader.doXPath(".//item",d);var e=c[0].getAttribute("text");this.obj.insertNewItem(b,f,e,0,0,0,0,"CHILD");});a.attachEvent("updateCallback",function(d,f,b){var c=this._loader.doXPath(".//item",d);var e=c[0].getAttribute("text");this.obj.setItemText(f,e);if(this.obj.getParentId(f)!=b){this.obj.moveItem(f,"item_child",b);}this.setUpdated(f,true,"updated");});a.attachEvent("deleteCallback",function(c,d,b){this.obj.setUserData(d,this.action_param,"true_deleted");this.obj.deleteItem(d,false);});a._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(b,c){if(b==3){a.setUpdated(c,true);}return true;});this.attachEvent("onDrop",function(f,e,d,c,b){if(c==b){a.setUpdated(f,true);}});this._onrdlh=function(b){var c=a.getState(b);if(c=="inserted"){a.set_invalid(b,false);a.setUpdated(b,false);return true;}if(c=="true_deleted"){a.setUpdated(b,false);return true;}a.setUpdated(b,true,"deleted");return false;};this._onradh=function(b){a.setUpdated(b,true,"inserted");};a._getRowData=function(e){var d={};var f=this.obj._globalIdStorageFind(e);var c=f.parentObject;var b=0;for(b=0;b<c.childsCount;b++){if(c.childNodes[b]==f){break;}}d.tr_id=f.id;d.tr_pid=c.id;d.tr_order=b;d.tr_text=f.span.innerHTML;c=(f._userdatalist||"").split(",");for(b=0;b<c.length;b++){d[c[b]]=f.userData["t_"+c[b]];}return d;};};function dhtmlXMenuObject(d,g){var b=this;this.addBaseIdAsContextZone=null;this.isDhtmlxMenuObject=true;this.skin=(g!=null?g:(typeof(dhtmlx)!="undefined"&&typeof(dhtmlx.skin)=="string"?dhtmlx.skin:"dhx_skyblue"));this.imagePath="";this._isIE6=false;if(_isIE){this._isIE6=(window.XMLHttpRequest==null?true:false);}if(d==null){this.base=document.body;}else{var a=(typeof(d)=="string"?document.getElementById(d):d);if(a!=null){this.base=a;if(!this.base.id){this.base.id=(new Date()).valueOf();}while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0]);}this.base.className+=" dhtmlxMenu_"+this.skin+"_Middle dir_left";this.base._autoSkinUpdate=true;if(this.base.oncontextmenu){this.base._oldContextMenuHandler=this.base.oncontextmenu;}this.addBaseIdAsContextZone=this.base.id;this.base.onselectstart=function(h){h=h||event;h.returnValue=false;return false;};this.base.oncontextmenu=function(h){h=h||event;h.returnValue=false;return false;};}else{this.base=document.body;}}this.topId="dhxWebMenuTopId";if(!this.extendedModule){var e=function(){alert(this.i18n.dhxmenuextalert);};var c=new Array("setItemEnabled","setItemDisabled","isItemEnabled","_changeItemState","getItemText","setItemText","loadFromHTML","hideItem","showItem","isItemHidden","_changeItemVisible","setUserData","getUserData","setOpenMode","setWebModeTimeout","enableDynamicLoading","_updateLoaderIcon","getItemImage","setItemImage","clearItemImage","setAutoShowMode","setAutoHideMode","setContextMenuHideAllMode","getContextMenuHideAllMode","setVisibleArea","setTooltip","getTooltip","setHotKey","getHotKey","setItemSelected","setTopText","setRTL","setAlign","setHref","clearHref","getCircuit","_clearAllSelectedSubItemsInPolygon","_checkArrowsState","_addUpArrow","_addDownArrow","_removeUpArrow","_removeDownArrow","_isArrowExists","_doScrollUp","_doScrollDown","_countPolygonItems","setOverflowHeight","_getRadioImgObj","_setRadioState","_radioOnClickHandler","getRadioChecked","setRadioChecked","addRadioButton","_getCheckboxState","_setCheckboxState","_readLevel","_updateCheckboxImage","_checkboxOnClickHandler","setCheckboxState","getCheckboxState","addCheckbox","serialize");for(var f=0;f<c.length;f++){if(!this[c[f]]){this[c[f]]=e;}}c=null;}this.fixedPosition=false;this.menuSelected=-1;this.menuLastClicked=-1;this.idPrefix="";this.itemTagName="item";this.itemTextTagName="itemtext";this.userDataTagName="userdata";this.itemTipTagName="tooltip";this.itemHotKeyTagName="hotkey";this.itemHrefTagName="href";this.dirTopLevel="bottom";this.dirSubLevel="right";this.menuX1=null;this.menuX2=null;this.menuY1=null;this.menuY2=null;this.menuMode="web";this.menuTimeoutMsec=400;this.menuTimeoutHandler=null;this.autoOverflow=false;this.idPull={};this.itemPull={};this.userData={};this.radio={};this._rtl=false;this._align="left";this.menuTouched=false;this.zIndInit=1200;this.zInd=this.zIndInit;this.zIndStep=50;this.menuModeTopLevelTimeout=true;this.menuModeTopLevelTimeoutTime=200;this._topLevelBottomMargin=1;this._topLevelRightMargin=0;this._topLevelOffsetLeft=1;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-4):-4);this.setSkin=function(j){var k=this.skin;this.skin=j;switch(this.skin){case"dhx_black":case"dhx_blue":case"dhx_skyblue":this._topLevelBottomMargin=2;this._topLevelRightMargin=1;this._topLevelOffsetLeft=1;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-4):-4);break;case"dhx_web":this._arrowFFFix=0;break;case"dhx_terrace":this._topLevelBottomMargin=0;this._topLevelRightMargin=0;this._topLevelOffsetLeft=0;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-4):-4);break;}if(this.base._autoSkinUpdate){this.base.className=this.base.className.replace("dhtmlxMenu_"+k+"_Middle","")+" dhtmlxMenu_"+this.skin+"_Middle";}for(var h in this.idPull){this.idPull[h].className=String(this.idPull[h].className).replace(k,this.skin);}};this.setSkin(this.skin);this.dLoad=false;this.dLoadUrl="";this.dLoadSign="?";this.loaderIcon=false;this.limit=0;this._scrollUpTM=null;this._scrollUpTMTime=20;this._scrollUpTMStep=3;this._scrollDownTM=null;this._scrollDownTMTime=20;this._scrollDownTMStep=3;this.context=false;this.contextZones={};this.contextMenuZoneId=false;this.contextAutoShow=true;this.contextAutoHide=true;this.contextHideAllMode=true;this._selectedSubItems=new Array();this._openedPolygons=new Array();this._addSubItemToSelected=function(k,j){var h=true;for(var l=0;l<this._selectedSubItems.length;l++){if((this._selectedSubItems[l][0]==k)&&(this._selectedSubItems[l][1]==j)){h=false;}}if(h==true){this._selectedSubItems.push(new Array(k,j));}return h;};this._removeSubItemFromSelected=function(l,k){var h=new Array();var j=false;for(var n=0;n<this._selectedSubItems.length;n++){if((this._selectedSubItems[n][0]==l)&&(this._selectedSubItems[n][1]==k)){j=true;}else{h[h.length]=this._selectedSubItems[n];}}if(j==true){this._selectedSubItems=h;}return j;};this._getSubItemToDeselectByPolygon=function(l){var h=new Array();for(var n=0;n<this._selectedSubItems.length;n++){if(this._selectedSubItems[n][1]==l){h[h.length]=this._selectedSubItems[n][0];h=h.concat(this._getSubItemToDeselectByPolygon(this._selectedSubItems[n][0]));var k=true;for(var j=0;j<this._openedPolygons.length;j++){if(this._openedPolygons[j]==this._selectedSubItems[n][0]){k=false;}}if(k==true){this._openedPolygons[this._openedPolygons.length]=this._selectedSubItems[n][0];}this._selectedSubItems[n][0]=-1;this._selectedSubItems[n][1]=-1;}}return h;};this._hidePolygon=function(h){if(this.idPull["polygon_"+h]!=null){if(typeof(this._menuEffect)!="undefined"&&this._menuEffect!==false){this._hidePolygonEffect("polygon_"+h);}else{if(this.idPull["polygon_"+h].style.display=="none"){return;}this.idPull["polygon_"+h].style.display="none";if(this.idPull["arrowup_"+h]!=null){this.idPull["arrowup_"+h].style.display="none";}if(this.idPull["arrowdown_"+h]!=null){this.idPull["arrowdown_"+h].style.display="none";}this._updateItemComplexState(h,true,false);if(this._isIE6){if(this.idPull["polygon_"+h+"_ie6cover"]!=null){this.idPull["polygon_"+h+"_ie6cover"].style.display="none";}}}h=String(h).replace(this.idPrefix,"");if(h==this.topId){h=null;}this.callEvent("onHide",[h]);if(h!=null&&this.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+h].parent==this.idPrefix+this.topId){this._improveTerraceButton(this.idPrefix+h,true);}}};this._showPolygon=function(A,l){var H=this._countVisiblePolygonItems(A);if(H==0){return;}var C="polygon_"+A;if((this.idPull[C]!=null)&&(this.idPull[A]!=null)){if(this.menuModeTopLevelTimeout&&this.menuMode=="web"&&!this.context){if(!this.idPull[A]._mouseOver&&l==this.dirTopLevel){return;}}if(!this.fixedPosition){this._autoDetectVisibleArea();}var D=0;var F=0;var J=null;var u=null;this.idPull[C].style.visibility="hidden";this.idPull[C].style.left="0px";this.idPull[C].style.top="0px";this.idPull[C].style.display="";this.idPull[C].style.zIndex=this.zInd;if(this.autoOverflow){if(this.idPull[C].firstChild.offsetHeight>this.menuY1+this.menuY2){var t=Math.floor((this.menuY2-this.menuY1-35)/24);this.limit=t;}else{this.limit=0;if(this.idPull["arrowup_"+A]!=null){this._removeUpArrow(String(A).replace(this.idPrefix,""));}if(this.idPull["arrowdown_"+A]!=null){this._removeDownArrow(String(A).replace(this.idPrefix,""));}}}if(this.limit>0&&this.limit<H){if(this.idPull["arrowup_"+A]==null){this._addUpArrow(String(A).replace(this.idPrefix,""));}if(this.idPull["arrowdown_"+A]==null){this._addDownArrow(String(A).replace(this.idPrefix,""));}J=this.idPull["arrowup_"+A];J.style.visibility="hidden";J.style.display="";J.style.zIndex=this.zInd;D=J.offsetHeight;u=this.idPull["arrowdown_"+A];u.style.visibility="hidden";u.style.display="";u.style.zIndex=this.zInd;F=u.offsetHeight;}if(this.limit>0){if(this.limit<H){this.idPull[C].style.height=24*this.limit+"px";this.idPull[C].scrollTop=0;}else{this.idPull[C].style.height="";}}this.zInd+=this.zIndStep;if(this.itemPull[A]!=null){var r="polygon_"+this.itemPull[A]["parent"];}else{if(this.context){var r=this.idPull[this.idPrefix+this.topId];}}var j=(this.idPull[A].tagName!=null?getAbsoluteLeft(this.idPull[A]):this.idPull[A][0]);var I=(this.idPull[A].tagName!=null?getAbsoluteTop(this.idPull[A]):this.idPull[A][1]);var k=(this.idPull[A].tagName!=null?this.idPull[A].offsetWidth:0);var m=(this.idPull[A].tagName!=null?this.idPull[A].offsetHeight:0);var q=0;var p=0;var s=this.idPull[C].offsetWidth;var E=this.idPull[C].offsetHeight+D+F;if(l=="bottom"){if(this._rtl){q=j+(k!=null?k:0)-s;}else{if(this._align=="right"){q=j+k-s;}else{q=j-1+(l==this.dirTopLevel?this._topLevelRightMargin:0);}}p=I-1+m+this._topLevelBottomMargin;}if(l=="right"){q=j+k-1;p=I+2;}if(l=="left"){q=j-this.idPull[C].offsetWidth+2;p=I+2;}if(l=="top"){q=j-1;p=I-E+2;}if(this.fixedPosition){var z=65536;var v=65536;}else{var z=(this.menuX2!=null?this.menuX2:0);var v=(this.menuY2!=null?this.menuY2:0);if(z==0){if(window.innerWidth){z=window.innerWidth;v=window.innerHeight;}else{z=document.body.offsetWidth;v=document.body.scrollHeight;}}}if(q+s>z&&!this._rtl){q=j-s+2;}if(q<this.menuX1&&this._rtl){q=j+k-2;}if(q<0){q=0;}if(p+E>v&&this.menuY2!=null){p=Math.max(I+m-E+2,(this._isVisibleArea?this.menuY1+2:2));if(this.context&&this.idPrefix+this.topId==A&&u!=null){p=p-2;}if(this.itemPull[A]!=null&&!this.context){if(this.itemPull[A]["parent"]==this.idPrefix+this.topId){p=p-this.base.offsetHeight;}}}this.idPull[C].style.left=q+"px";this.idPull[C].style.top=p+D+"px";if(typeof(this._menuEffect)!="undefined"&&this._menuEffect!==false){this._showPolygonEffect(C);}else{this.idPull[C].style.visibility="";if(this.limit>0&&this.limit<H){J.style.left=q+"px";J.style.top=p+"px";J.style.width=s+this._arrowFFFix+"px";J.style.visibility="";u.style.left=q+"px";u.style.top=p+E-F+"px";u.style.width=s+this._arrowFFFix+"px";u.style.visibility="";this._checkArrowsState(A);}if(this._isIE6){var o=C+"_ie6cover";if(this.idPull[o]==null){var n=document.createElement("IFRAME");n.className="dhtmlxMenu_IE6CoverFix_"+this.skin;n.frameBorder=0;n.setAttribute("src","javascript:false;");document.body.insertBefore(n,document.body.firstChild);this.idPull[o]=n;}this.idPull[o].style.left=q+"px";this.idPull[o].style.top=p+"px";this.idPull[o].style.width=s+"px";this.idPull[o].style.height=E+"px";this.idPull[o].style.zIndex=this.idPull[C].style.zIndex-1;this.idPull[o].style.display="";}}A=String(A).replace(this.idPrefix,"");if(A==this.topId){A=null;}this.callEvent("onShow",[A]);if(A!=null&&this.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+A].parent==this.idPrefix+this.topId){this._improveTerraceButton(this.idPrefix+A,false);}}};this._redistribSubLevelSelection=function(m,l){while(this._openedPolygons.length>0){this._openedPolygons.pop();}var h=this._getSubItemToDeselectByPolygon(l);this._removeSubItemFromSelected(-1,-1);for(var k=0;k<h.length;k++){if((this.idPull[h[k]]!=null)&&(h[k]!=m)){if(this.itemPull[h[k]]["state"]=="enabled"){this.idPull[h[k]].className="sub_item";}}}for(var k=0;k<this._openedPolygons.length;k++){if(this._openedPolygons[k]!=l){this._hidePolygon(this._openedPolygons[k]);}}if(this.itemPull[m]["state"]=="enabled"){this.idPull[m].className="sub_item_selected";if(this.itemPull[m]["complex"]&&this.dLoad&&(this.itemPull[m]["loaded"]=="no")){if(this.loaderIcon==true){this._updateLoaderIcon(m,true);}var j=new dtmlXMLLoaderObject(this._xmlParser,window);this.itemPull[m]["loaded"]="get";this.callEvent("onXLS",[]);j.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&parentId="+m.replace(this.idPrefix,"")+"&etc="+new Date().getTime());}if(this.itemPull[m]["complex"]||(this.dLoad&&(this.itemPull[m]["loaded"]=="yes"))){if((this.itemPull[m]["complex"])&&(this.idPull["polygon_"+m]!=null)){this._updateItemComplexState(m,true,true);this._showPolygon(m,this.dirSubLevel);}}this._addSubItemToSelected(m,l);this.menuSelected=m;}};this._doOnClick=function(l,v,o){this.menuLastClicked=l;if(this.itemPull[this.idPrefix+l]["href_link"]!=null&&this.itemPull[this.idPrefix+l].state=="enabled"){var r=document.createElement("FORM");var t=String(this.itemPull[this.idPrefix+l]["href_link"]).split("?");r.action=t[0];if(t[1]!=null){var n=String(t[1]).split("&");for(var h=0;h<n.length;h++){var u=String(n[h]).split("=");var s=document.createElement("INPUT");s.type="hidden";s.name=(u[0]||"");s.value=(u[1]||"");r.appendChild(s);}}if(this.itemPull[this.idPrefix+l]["href_target"]!=null){r.target=this.itemPull[this.idPrefix+l]["href_target"];}r.style.display="none";document.body.appendChild(r);r.submit();if(r!=null){document.body.removeChild(r);r=null;}return;}if(v.charAt(0)=="c"){return;}if(v.charAt(1)=="d"){return;}if(v.charAt(2)=="s"){return;}if(this.checkEvent("onClick")){this.callEvent("onClick",[l,this.contextMenuZoneId,o]);}else{if((v.charAt(1)=="d")||(this.menuMode=="win"&&v.charAt(2)=="t")){return;}}if(this.context&&this._isContextMenuVisible()&&this.contextAutoHide){this._hideContextMenu();}else{if(this._clearAndHide){this._clearAndHide();}}};this._doOnTouchMenu=function(h){if(this.menuTouched==false){this.menuTouched=true;if(this.checkEvent("onTouch")){this.callEvent("onTouch",[h]);}}};this._searchMenuNode=function(l,o){var h=new Array();for(var n=0;n<o.length;n++){if(typeof(o[n])=="object"){if(o[n].length==5){if(typeof(o[n][0])!="object"){if((o[n][0].replace(this.idPrefix,"")==l)&&(n==0)){h=o;}}}var k=this._searchMenuNode(l,o[n]);if(k.length>0){h=k;}}}return h;};this._getMenuNodes=function(k){var h=new Array;for(var j in this.itemPull){if(this.itemPull[j]["parent"]==k){h[h.length]=j;}}return h;};this._genStr=function(h){var j="";var l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var k=0;k<h;k++){j+=l.charAt(Math.round(Math.random()*(l.length-1)));}return j;};this.getItemType=function(h){h=this.idPrefix+h;if(this.itemPull[h]==null){return null;}return this.itemPull[h]["type"];};this.forEachItem=function(j){for(var h in this.itemPull){j(String(h).replace(this.idPrefix,""));}};this._clearAndHide=function(){b.menuSelected=-1;b.menuLastClicked=-1;while(b._openedPolygons.length>0){b._openedPolygons.pop();}for(var h=0;h<b._selectedSubItems.length;h++){var j=b._selectedSubItems[h][0];if(b.idPull[j]!=null){if(b.itemPull[j]["state"]=="enabled"){if(b.idPull[j].className=="sub_item_selected"){b.idPull[j].className="sub_item";}if(b.idPull[j].className=="dhtmlxMenu_"+b.skin+"_TopLevel_Item_Selected"){if(b.itemPull[j]["cssNormal"]!=null){b.idPull[j].className=b.itemPull[j]["cssNormal"];}else{b.idPull[j].className="dhtmlxMenu_"+b.skin+"_TopLevel_Item_Normal";}}}}b._hidePolygon(j);}b.menuTouched=false;if(b.context){if(b.contextHideAllMode){b._hidePolygon(b.idPrefix+b.topId);b.zInd=b.zIndInit;}else{b.zInd=b.zIndInit+b.zIndStep;}}};this._doOnLoad=function(){};this.loadXML=function(h,j){if(j){this._doOnLoad=function(){j();};}this.callEvent("onXLS",[]);this._xmlLoader.loadXML(h);};this.loadXMLString=function(j,h){if(h){this._doOnLoad=function(){h();};}this._xmlLoader.loadXMLString(j);};this._buildMenu=function(s,l){var o=0;for(var j=0;j<s.childNodes.length;j++){if(s.childNodes[j].tagName==this.itemTagName){var h=s.childNodes[j];var p={};p.id=this.idPrefix+(h.getAttribute("id")||this._genStr(24));p.title=h.getAttribute("text")||"";p.imgen=h.getAttribute("img")||"";p.imgdis=h.getAttribute("imgdis")||"";p.tip="";p.hotkey="";if(h.getAttribute("cssNormal")!=null){p.cssNormal=h.getAttribute("cssNormal");}p.type=h.getAttribute("type")||"item";if(p.type=="checkbox"){p.checked=(h.getAttribute("checked")!=null);p.imgen="chbx_"+(p.checked?"1":"0");p.imgdis=p.imgen;}if(p.type=="radio"){p.checked=(h.getAttribute("checked")!=null);p.imgen="rdbt_"+(p.checked?"1":"0");p.imgdis=p.imgen;p.group=h.getAttribute("group")||this._genStr(24);if(this.radio[p.group]==null){this.radio[p.group]=new Array();}this.radio[p.group][this.radio[p.group].length]=p.id;}p.state=(h.getAttribute("enabled")!=null||h.getAttribute("disabled")!=null?(h.getAttribute("enabled")=="false"||h.getAttribute("disabled")=="true"?"disabled":"enabled"):"enabled");p.parent=(l!=null?l:this.idPrefix+this.topId);p.complex=(this.dLoad?(h.getAttribute("complex")!=null?true:false):(this._buildMenu(h,p.id)>0));if(this.dLoad&&p.complex){p.loaded="no";}this.itemPull[p.id]=p;for(var n=0;n<h.childNodes.length;n++){var k=h.childNodes[n].tagName;if(k!=null){k=k.toLowerCase();}if(k==this.userDataTagName){var m=h.childNodes[n];if(m.getAttribute("name")!=null){this.userData[p.id+"_"+m.getAttribute("name")]=(m.firstChild!=null&&m.firstChild.nodeValue!=null?m.firstChild.nodeValue:"");}}if(k==this.itemTextTagName){p.title=h.childNodes[n].firstChild.nodeValue;}if(k==this.itemTipTagName){p.tip=h.childNodes[n].firstChild.nodeValue;}if(k==this.itemHotKeyTagName){p.hotkey=h.childNodes[n].firstChild.nodeValue;}if(k==this.itemHrefTagName&&p.type=="item"){p.href_link=h.childNodes[n].firstChild.nodeValue;if(h.childNodes[n].getAttribute("target")!=null){p.href_target=h.childNodes[n].getAttribute("target");}}}o++;}}return o;};this._xmlParser=function(){if(b.dLoad){var m=this.getXMLTopNode("menu");parentId=(m.getAttribute("parentId")!=null?m.getAttribute("parentId"):null);if(parentId==null){b._buildMenu(m,null);b._initTopLevelMenu();}else{b._buildMenu(m,b.idPrefix+parentId);b._addSubMenuPolygon(b.idPrefix+parentId,b.idPrefix+parentId);if(b.menuSelected==b.idPrefix+parentId){var l=b.idPrefix+parentId;var k=b.itemPull[b.idPrefix+parentId]["parent"]==b.idPrefix+b.topId;var o=((k&&(!b.context))?b.dirTopLevel:b.dirSubLevel);var h=false;if(k&&b.menuModeTopLevelTimeout&&b.menuMode=="web"&&!b.context){var n=b.idPull[b.idPrefix+parentId];if(n._mouseOver==true){var j=b.menuModeTopLevelTimeoutTime-(new Date().getTime()-n._dynLoadTM);if(j>1){n._menuOpenTM=window.setTimeout(function(){b._showPolygon(l,o);},j);h=true;}}}if(!h){b._showPolygon(l,o);}}b.itemPull[b.idPrefix+parentId]["loaded"]="yes";if(b.loaderIcon==true){b._updateLoaderIcon(b.idPrefix+parentId,false);}}this.destructor();b.callEvent("onXLE",[]);}else{var m=this.getXMLTopNode("menu");b._buildMenu(m,null);b.init();b.callEvent("onXLE",[]);b._doOnLoad();}};this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._showSubLevelItem=function(j,h){if(document.getElementById("arrow_"+this.idPrefix+j)!=null){document.getElementById("arrow_"+this.idPrefix+j).style.display=(h?"none":"");}if(document.getElementById("image_"+this.idPrefix+j)!=null){document.getElementById("image_"+this.idPrefix+j).style.display=(h?"none":"");}if(document.getElementById(this.idPrefix+j)!=null){document.getElementById(this.idPrefix+j).style.display=(h?"":"none");}};this._hideSubLevelItem=function(h){this._showSubLevelItem(h,true);};this.idPrefix=this._genStr(12);this._bodyClick=function(h){h=h||event;if(h.button==2||(_isOpera&&h.ctrlKey==true)){return;}if(b.context){if(b.contextAutoHide&&(!_isOpera||(b._isContextMenuVisible()&&_isOpera))){b._hideContextMenu();}}else{if(b._clearAndHide){b._clearAndHide();}}};this._bodyContext=function(k){k=k||event;var j=String((k.srcElement||k.target).className);if(j.search("dhtmlxMenu")!=-1&&j.search("SubLevelArea")!=-1){return;}var h=true;var l=k.target||k.srcElement;while(l!=null){if(l.id!=null){if(b.isContextZone(l.id)){h=false;}}if(l==document.body){h=false;}l=l.parentNode;}if(h){b.hideContextMenu();}};if(_isIE){document.body.attachEvent("onclick",this._bodyClick);document.body.attachEvent("oncontextmenu",this._bodyContext);}else{window.addEventListener("click",this._bodyClick,false);window.addEventListener("contextmenu",this._bodyContext,false);}this._UID=this._genStr(32);dhtmlxMenuObjectLiveInstances[this._UID]=this;dhtmlxEventable(this);return this;}dhtmlXMenuObject.prototype.init=function(){if(this._isInited==true){return;}if(this.dLoad){this.callEvent("onXLS",[]);this._xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&etc="+new Date().getTime());}else{this._initTopLevelMenu();this._isInited=true;}};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(f){var d=0;for(var b in this.itemPull){var c=this.itemPull[b]["parent"];var e=this.itemPull[b]["type"];if(this.idPull[b]!=null){if(c==f&&(e=="item"||e=="radio"||e=="checkbox")&&this.idPull[b].style.display!="none"){d++;}}}return d;};dhtmlXMenuObject.prototype._redefineComplexState=function(b){if(this.idPrefix+this.topId==b){return;}if((this.idPull["polygon_"+b]!=null)&&(this.idPull[b]!=null)){var a=this._countVisiblePolygonItems(b);if((a>0)&&(!this.itemPull[b]["complex"])){this._updateItemComplexState(b,true,false);}if((a==0)&&(this.itemPull[b]["complex"])){this._updateItemComplexState(b,false,false);}}};dhtmlXMenuObject.prototype._updateItemComplexState=function(e,c,d){if((!this.context)&&(this._getItemLevelType(e.replace(this.idPrefix,""))=="TopLevel")){this.itemPull[e]["complex"]=c;return;}if((this.idPull[e]==null)||(this.itemPull[e]==null)){return;}this.itemPull[e]["complex"]=c;if(e==this.idPrefix+this.topId){return;}var a=null;var b=this.idPull[e].childNodes[this._rtl?0:2];if(b.childNodes[0]){if(String(b.childNodes[0].className).search("complex_arrow")===0){a=b.childNodes[0];}}if(this.itemPull[e]["complex"]){if(a==null){a=document.createElement("DIV");a.className="complex_arrow";a.id="arrow_"+e;while(b.childNodes.length>0){b.removeChild(b.childNodes[0]);}b.appendChild(a);}if(this.dLoad&&(this.itemPull[e]["loaded"]=="get")&&this.loaderIcon){if(a.className!="complex_arrow_loading"){a.className="complex_arrow_loading";}}else{a.className="complex_arrow";}return;}if((!this.itemPull[e]["complex"])&&(a!=null)){b.removeChild(a);if(this.itemPull[e]["hotkey_backup"]!=null&&this.setHotKey){this.setHotKey(e.replace(this.idPrefix,""),this.itemPull[e]["hotkey_backup"]);}}};dhtmlXMenuObject.prototype._getItemLevelType=function(a){return(this.itemPull[this.idPrefix+a]["parent"]==this.idPrefix+this.topId?"TopLevel":"SubLevelArea");};dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(d,b){var a=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var c=0;c<a.length;c++){if(a[c]!=d){this._hidePolygon(a[c]);}if((this.idPull[a[c]]!=null)&&(a[c]!=d)){this.idPull[a[c]].className=this.idPull[a[c]].className.replace(/Selected/g,"Normal");}}if(this.itemPull[this.idPrefix+d]["state"]=="enabled"){this.idPull[this.idPrefix+d].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_Selected";this._addSubItemToSelected(this.idPrefix+d,"parent");this.menuSelected=(this.menuMode=="win"?(this.menuSelected!=-1?d:this.menuSelected):d);if((this.itemPull[this.idPrefix+d]["complex"])&&(this.menuSelected!=-1)){this._showPolygon(this.idPrefix+d,this.dirTopLevel);}}};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.dirTopLevel="bottom";this.dirSubLevel=(this._rtl?"left":"right");if(this.context){this.idPull[this.idPrefix+this.topId]=new Array(0,0);this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);}else{var a=this._getMenuNodes(this.idPrefix+this.topId);for(var b=0;b<a.length;b++){if(this.itemPull[a[b]]["type"]=="item"){this._renderToplevelItem(a[b],null);}if(this.itemPull[a[b]]["type"]=="separator"){this._renderSeparator(a[b],null);}}}};dhtmlXMenuObject.prototype._renderToplevelItem=function(g,f){var b=this;var a=document.createElement("DIV");a.id=g;if(this.itemPull[g]["state"]=="enabled"&&this.itemPull[g]["cssNormal"]!=null){a.className=this.itemPull[g]["cssNormal"];}else{a.className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[g]["state"]=="enabled"?"Normal":"Disabled");}if(this.itemPull[g]["title"]!=""){var e=document.createElement("DIV");e.className="top_level_text";e.innerHTML=this.itemPull[g]["title"];a.appendChild(e);}if(this.itemPull[g]["tip"].length>0){a.title=this.itemPull[g]["tip"];}if((this.itemPull[g]["imgen"]!="")||(this.itemPull[g]["imgdis"]!="")){var d=this.itemPull[g][(this.itemPull[g]["state"]=="enabled")?"imgen":"imgdis"];if(d){var c=document.createElement("IMG");c.border="0";c.id="image_"+g;c.src=this.imagePath+d;c.className="dhtmlxMenu_TopLevel_Item_Icon";if(a.childNodes.length>0&&!this._rtl){a.insertBefore(c,a.childNodes[0]);}else{a.appendChild(c);}}}a.onselectstart=function(h){h=h||event;h.returnValue=false;return false;};a.oncontextmenu=function(h){h=h||event;h.returnValue=false;return false;};if(!this.cont){this.cont=document.createElement("DIV");this.cont.dir="ltr";this.cont.className=(this._align=="right"?"align_right":"align_left");this.base.appendChild(this.cont);}if(f!=null){f++;if(f<0){f=0;}if(f>this.cont.childNodes.length-1){f=null;}}if(f!=null){this.cont.insertBefore(a,this.cont.childNodes[f]);}else{this.cont.appendChild(a);}this.idPull[a.id]=a;if(this.itemPull[g]["complex"]&&(!this.dLoad)){this._addSubMenuPolygon(this.itemPull[g]["id"],this.itemPull[g]["id"]);}a.onmouseover=function(){if(b.menuMode=="web"){window.clearTimeout(b.menuTimeoutHandler);}var h=b._getSubItemToDeselectByPolygon("parent");b._removeSubItemFromSelected(-1,-1);for(var l=0;l<h.length;l++){if(h[l]!=this.id){b._hidePolygon(h[l]);}if((b.idPull[h[l]]!=null)&&(h[l]!=this.id)){if(b.itemPull[h[l]]["cssNormal"]!=null){b.idPull[h[l]].className=b.itemPull[h[l]]["cssNormal"];}else{if(b.idPull[h[l]].className=="sub_item_selected"){b.idPull[h[l]].className="sub_item";}b.idPull[h[l]].className=b.idPull[h[l]].className.replace(/Selected/g,"Normal");}}}if(b.itemPull[this.id]["state"]=="enabled"){this.className="dhtmlxMenu_"+b.skin+"_TopLevel_Item_Selected";b._addSubItemToSelected(this.id,"parent");b.menuSelected=(b.menuMode=="win"?(b.menuSelected!=-1?this.id:b.menuSelected):this.id);if(b.dLoad&&(b.itemPull[this.id]["loaded"]=="no")){if(b.menuModeTopLevelTimeout&&b.menuMode=="web"&&!b.context){this._mouseOver=true;this._dynLoadTM=new Date().getTime();}var j=new dtmlXMLLoaderObject(b._xmlParser,window);b.itemPull[this.id]["loaded"]="get";b.callEvent("onXLS",[]);j.loadXML(b.dLoadUrl+b.dLoadSign+"action=loadMenu&parentId="+this.id.replace(b.idPrefix,"")+"&etc="+new Date().getTime());}if((!b.dLoad)||(b.dLoad&&(!b.itemPull[this.id]["loaded"]||b.itemPull[this.id]["loaded"]=="yes"))){if((b.itemPull[this.id]["complex"])&&(b.menuSelected!=-1)){if(b.menuModeTopLevelTimeout&&b.menuMode=="web"&&!b.context){this._mouseOver=true;var k=this.id;this._menuOpenTM=window.setTimeout(function(){b._showPolygon(k,b.dirTopLevel);},b.menuModeTopLevelTimeoutTime);}else{b._showPolygon(this.id,b.dirTopLevel);}}}}b._doOnTouchMenu(this.id.replace(b.idPrefix,""));};a.onmouseout=function(){if(!((b.itemPull[this.id]["complex"])&&(b.menuSelected!=-1))&&(b.itemPull[this.id]["state"]=="enabled")){if(b.itemPull[this.id]["cssNormal"]!=null){a.className=b.itemPull[this.id]["cssNormal"];}else{a.className="dhtmlxMenu_"+b.skin+"_TopLevel_Item_Normal";}}if(b.menuMode=="web"){window.clearTimeout(b.menuTimeoutHandler);b.menuTimeoutHandler=window.setTimeout(function(){b._clearAndHide();},b.menuTimeoutMsec,"JavaScript");}if(b.menuModeTopLevelTimeout&&b.menuMode=="web"&&!b.context){this._mouseOver=false;window.clearTimeout(this._menuOpenTM);}};a.onclick=function(l){if(b.menuMode=="web"){window.clearTimeout(b.menuTimeoutHandler);}if(b.menuMode!="web"&&b.itemPull[this.id]["state"]=="disabled"){return;}l=l||event;l.cancelBubble=true;l.returnValue=false;if(b.menuMode=="win"){if(b.itemPull[this.id]["complex"]){if(b.menuSelected==this.id){b.menuSelected=-1;var k=false;}else{b.menuSelected=this.id;var k=true;}if(k){b._showPolygon(this.id,b.dirTopLevel);}else{b._hidePolygon(this.id);}}}var h=(b.itemPull[this.id]["complex"]?"c":"-");var m=(b.itemPull[this.id]["state"]!="enabled"?"d":"-");var j={ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey};b._doOnClick(this.id.replace(b.idPrefix,""),h+m+"t",j);return false;};if(this.skin=="dhx_terrace"){this._improveTerraceSkin();}};dhtmlXMenuObject.prototype.setImagePath=function(){};dhtmlXMenuObject.prototype.setIconsPath=function(a){this.imagePath=a;};dhtmlXMenuObject.prototype.setIconPath=dhtmlXMenuObject.prototype.setIconsPath;dhtmlXMenuObject.prototype._updateItemImage=function(j,a){j=this.idPrefix+j;var h=(this.itemPull[j]["parent"]==this.idPrefix+this.topId&&!this.context);var b=null;if(h){for(var f=0;f<this.idPull[j].childNodes.length;f++){try{if(this.idPull[j].childNodes[f].className=="dhtmlxMenu_TopLevel_Item_Icon"){b=this.idPull[j].childNodes[f];}}catch(g){}}}else{try{var b=this.idPull[j].childNodes[this._rtl?2:0].childNodes[0];}catch(g){}}if(this.itemPull[j]["type"]=="radio"){var c=this.itemPull[j][(this.itemPull[j]["state"]=="enabled"?"imgen":"imgdis")];}else{var c=this.itemPull[j][(this.itemPull[j]["state"]=="enabled"?"imgen":"imgdis")];}if(c.length>0){if(b!=null){b.src=this.imagePath+c;}else{if(h){var b=document.createElement("IMG");b.className="dhtmlxMenu_TopLevel_Item_Icon";b.src=this.imagePath+c;b.border="0";b.id="image_"+j;if(!this._rtl&&this.idPull[j].childNodes.length>0){this.idPull[j].insertBefore(b,this.idPull[j].childNodes[0]);}else{this.idPull[j].appendChild(b);}}else{var b=document.createElement("IMG");b.className="sub_icon";b.src=this.imagePath+c;b.border="0";b.id="image_"+j;var d=this.idPull[j].childNodes[this._rtl?2:0];while(d.childNodes.length>0){d.removeChild(d.childNodes[0]);}d.appendChild(b);}}}else{if(b!=null){b.parentNode.removeChild(b);}}};dhtmlXMenuObject.prototype.removeItem=function(d,f,e){if(!f){d=this.idPrefix+d;}var g=null;if(d!=this.idPrefix+this.topId){if(this.itemPull[d]==null){return;}if(this.idPull["polygon_"+d]&&this.idPull["polygon_"+d]._tmShow){window.clearTimeout(this.idPull["polygon_"+d]._tmShow);}var m=this.itemPull[d]["type"];if(m=="separator"){var l=this.idPull["separator_"+d];if(this.itemPull[d]["parent"]==this.idPrefix+this.topId){l.onclick=null;l.onselectstart=null;l.id=null;l.parentNode.removeChild(l);}else{l.childNodes[0].childNodes[0].onclick=null;l.childNodes[0].childNodes[0].onselectstart=null;l.childNodes[0].childNodes[0].id=null;l.childNodes[0].removeChild(l.childNodes[0].childNodes[0]);l.removeChild(l.childNodes[0]);l.parentNode.removeChild(l);}this.idPull["separator_"+d]=null;this.itemPull[d]=null;delete this.idPull["separator_"+d];delete this.itemPull[d];l=null;}else{g=this.itemPull[d]["parent"];var l=this.idPull[d];l.onclick=null;l.oncontextmenu=null;l.onmouseover=null;l.onmouseout=null;l.onselectstart=null;l.id=null;while(l.childNodes.length>0){l.removeChild(l.childNodes[0]);}l.parentNode.removeChild(l);this.idPull[d]=null;this.itemPull[d]=null;delete this.idPull[d];delete this.itemPull[d];l=null;}m=null;}for(var j in this.itemPull){if(this.itemPull[j]["parent"]==d){this.removeItem(j,true,true);}}var k=new Array(d);if(g!=null&&!e){if(this.idPull["polygon_"+g]!=null){if(this.idPull["polygon_"+g].tbd.childNodes.length==0){k.push(g);this._updateItemComplexState(g,false,false);}}}for(var b=0;b<k.length;b++){if(this.idPull["polygon_"+k[b]]){var c=this.idPull["polygon_"+k[b]];c.onclick=null;c.oncontextmenu=null;c.tbl.removeChild(c.tbd);c.tbd=null;c.removeChild(c.tbl);c.tbl=null;c.id=null;c.parentNode.removeChild(c);c=null;if(this._isIE6){var h="polygon_"+k[b]+"_ie6cover";if(this.idPull[h]!=null){document.body.removeChild(this.idPull[h]);delete this.idPull[h];}}if(this.idPull["arrowup_"+d]!=null&&this._removeArrow){this._removeArrow("arrowup_"+d);}if(this.idPull["arrowdown_"+d]!=null&&this._removeArrow){this._removeArrow("arrowdown_"+d);}this.idPull["polygon_"+k[b]]=null;delete this.idPull["polygon_"+k[b]];}}k=null;if(this.skin=="dhx_terrace"&&arguments.length==1){this._improveTerraceSkin();}};dhtmlXMenuObject.prototype._getAllParents=function(f){var c=new Array();for(var b in this.itemPull){if(this.itemPull[b]["parent"]==f){c[c.length]=this.itemPull[b]["id"];if(this.itemPull[b]["complex"]){var d=this._getAllParents(this.itemPull[b]["id"]);for(var e=0;e<d.length;e++){c[c.length]=d[e];}}}}return c;};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.context=true;if(this.base._autoSkinUpdate==true){this.base.className=this.base.className.replace("dhtmlxMenu_"+this.skin+"_Middle","");this.base._autoSkinUpdate=false;}if(this.addBaseIdAsContextZone!=null){this.addContextZone(this.addBaseIdAsContextZone);}};dhtmlXMenuObject.prototype.addContextZone=function(c){if(c==document.body){c="document.body."+this.idPrefix;var e=document.body;}else{var e=document.getElementById(c);}var f=false;for(var d in this.contextZones){f=f||(d==c)||(this.contextZones[d]==e);}if(f==true){return false;}this.contextZones[c]=e;var b=this;if(_isOpera){this.operaContext=function(a){b._doOnContextMenuOpera(a,b);};e.addEventListener("mouseup",this.operaContext,false);}else{if(e.oncontextmenu!=null&&!e._oldContextMenuHandler){e._oldContextMenuHandler=e.oncontextmenu;}e.oncontextmenu=function(g){for(var a in dhtmlxMenuObjectLiveInstances){if(a!=b._UID){if(dhtmlxMenuObjectLiveInstances[a].context){dhtmlxMenuObjectLiveInstances[a]._hideContextMenu();}}}g=g||event;g.cancelBubble=true;g.returnValue=false;b._doOnContextBeforeCall(g,this);return false;};}};dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(c,a){for(var b in dhtmlxMenuObjectLiveInstances){if(b!=a._UID){if(dhtmlxMenuObjectLiveInstances[b].context){dhtmlxMenuObjectLiveInstances[b]._hideContextMenu();}}}c.cancelBubble=true;c.returnValue=false;if(c.button==0&&c.ctrlKey==true){a._doOnContextBeforeCall(c,this);}return false;};dhtmlXMenuObject.prototype.removeContextZone=function(a){if(!this.isContextZone(a)){return false;}if(a==document.body){a="document.body."+this.idPrefix;}var b=this.contextZones[a];if(_isOpera){b.removeEventListener("mouseup",this.operaContext,false);}else{b.oncontextmenu=(b._oldContextMenuHandler!=null?b._oldContextMenuHandler:null);b._oldContextMenuHandler=null;}try{this.contextZones[a]=null;delete this.contextZones[a];}catch(c){}return true;};dhtmlXMenuObject.prototype.isContextZone=function(a){if(a==document.body&&this.contextZones["document.body."+this.idPrefix]!=null){return true;}var b=false;if(this.contextZones[a]!=null){if(this.contextZones[a]==document.getElementById(a)){b=true;}}return b;};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false;}return(this.idPull["polygon_"+this.idPrefix+this.topId].style.display=="");};dhtmlXMenuObject.prototype._showContextMenu=function(b,c,a){this._clearAndHide();if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false;}window.clearTimeout(this.menuTimeoutHandler);this.idPull[this.idPrefix+this.topId]=new Array(b,c);this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[a]);};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return false;}this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId);this.zInd=this.zIndInit;};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(f,h){this.contextMenuZoneId=h.id;this._clearAndHide();this._hideContextMenu();var d=(f.srcElement||f.target);var b=(_isIE||_isOpera||_KHTMLrv?f.offsetX:f.layerX);var a=(_isIE||_isOpera||_KHTMLrv?f.offsetY:f.layerY);var g=getAbsoluteLeft(d)+b;var c=getAbsoluteTop(d)+a;if(this.checkEvent("onBeforeContextMenu")){if(this.callEvent("onBeforeContextMenu",[h.id,f])){if(this.contextAutoShow){this._showContextMenu(g,c,h.id);this.callEvent("onAfterContextMenu",[h.id,f]);}}}else{if(this.contextAutoShow){this._showContextMenu(g,c,h.id);this.callEvent("onAfterContextMenu",[h.id]);}}};dhtmlXMenuObject.prototype.showContextMenu=function(a,b){this._showContextMenu(a,b,false);};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu();};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(this._isVisibleArea){return;}this.menuX1=document.body.scrollLeft;this.menuX2=this.menuX1+(window.innerWidth||document.body.clientWidth);this.menuY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);this.menuY2=this.menuY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight);};dhtmlXMenuObject.prototype.getItemPosition=function(e){e=this.idPrefix+e;var d=-1;if(this.itemPull[e]==null){return d;}var a=this.itemPull[e]["parent"];var c=(this.idPull["polygon_"+a]!=null?this.idPull["polygon_"+a].tbd:this.cont);for(var b=0;b<c.childNodes.length;b++){if(c.childNodes[b]==this.idPull["separator_"+e]||c.childNodes[b]==this.idPull[e]){d=b;}}return d;};dhtmlXMenuObject.prototype.setItemPosition=function(g,f){g=this.idPrefix+g;if(this.idPull[g]==null){return;}var b=(this.itemPull[g]["parent"]==this.idPrefix+this.topId);var a=this.idPull[g];var d=this.getItemPosition(g.replace(this.idPrefix,""));var c=this.itemPull[g]["parent"];var e=(this.idPull["polygon_"+c]!=null?this.idPull["polygon_"+c].tbd:this.cont);e.removeChild(e.childNodes[d]);if(f<0){f=0;}if(b&&f<1){f=1;}if(f<e.childNodes.length){e.insertBefore(a,e.childNodes[f]);}else{e.appendChild(a);}};dhtmlXMenuObject.prototype.getParentId=function(a){a=this.idPrefix+a;if(this.itemPull[a]==null){return null;}return((this.itemPull[a]["parent"]!=null?this.itemPull[a]["parent"]:this.topId).replace(this.idPrefix,""));};dhtmlXMenuObject.prototype.addNewSibling=function(d,e,a,b,c,h){var g=this.idPrefix+(e!=null?e:this._genStr(24));var f=this.idPrefix+(d!=null?this.getParentId(d):this.topId);this._addItemIntoGlobalStrorage(g,f,a,"item",b,c,h);if((f==this.idPrefix+this.topId)&&(!this.context)){this._renderToplevelItem(g,this.getItemPosition(d));}else{this._renderSublevelItem(g,this.getItemPosition(d));}};dhtmlXMenuObject.prototype.addNewChild=function(g,f,d,a,b,c,e){if(g==null){if(this.context){g=this.topId;}else{this.addNewSibling(g,d,a,b,c,e);if(f!=null){this.setItemPosition(d,f);}return;}}d=this.idPrefix+(d!=null?d:this._genStr(24));if(this.setHotKey){this.setHotKey(g,"");}g=this.idPrefix+g;this._addItemIntoGlobalStrorage(d,g,a,"item",b,c,e);if(this.idPull["polygon_"+g]==null){this._renderSublevelPolygon(g,g);}this._renderSublevelItem(d,f-1);this._redefineComplexState(g);};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(h,a,c,g,d,b,f){var e={id:h,title:c,imgen:(b!=null?b:""),imgdis:(f!=null?f:""),type:g,state:(d==true?"disabled":"enabled"),parent:a,complex:false,hotkey:"",tip:""};this.itemPull[e.id]=e;};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(f,e){var b=this._renderSublevelPolygon(f,e);var a=this._getMenuNodes(e);for(c=0;c<a.length;c++){if(this.itemPull[a[c]]["type"]=="separator"){this._renderSeparator(a[c],null);}else{this._renderSublevelItem(a[c],null);}}if(f==e){var d="topLevel";}else{var d="subLevel";}for(var c=0;c<a.length;c++){if(this.itemPull[a[c]]["complex"]){this._addSubMenuPolygon(f,this.itemPull[a[c]]["id"]);}}};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(e,d){var b=document.createElement("DIV");b.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Polygon "+(this._rtl?"dir_right":"");b.dir="ltr";b.oncontextmenu=function(f){f=f||event;f.returnValue=false;f.cancelBubble=true;return false;};b.id="polygon_"+d;b.onclick=function(f){f=f||event;f.cancelBubble=true;};b.style.display="none";document.body.insertBefore(b,document.body.firstChild);var c=document.createElement("TABLE");c.className="dhtmlxMebu_SubLevelArea_Tbl";c.cellSpacing=0;c.cellPadding=0;c.border=0;var a=document.createElement("TBODY");c.appendChild(a);b.appendChild(c);b.tbl=c;b.tbd=a;this.idPull[b.id]=b;if(this.sxDacProc!=null){this.idPull["sxDac_"+d]=new this.sxDacProc(b,b.className);if(_isIE){this.idPull["sxDac_"+d]._setSpeed(this.dacSpeedIE);this.idPull["sxDac_"+d]._setCustomCycle(this.dacCyclesIE);}else{this.idPull["sxDac_"+d]._setSpeed(this.dacSpeed);this.idPull["sxDac_"+d]._setCustomCycle(this.dacCycles);}}return b;};dhtmlXMenuObject.prototype._renderSublevelItem=function(b,k){var a=this;var j=document.createElement("TR");j.className=(this.itemPull[b]["state"]=="enabled"?"sub_item":"sub_item_dis");var h=document.createElement("TD");h.className="sub_item_icon";var l=this.itemPull[b][(this.itemPull[b]["state"]=="enabled"?"imgen":"imgdis")];if(l!=""){var o=this.itemPull[b]["type"];if(o=="checkbox"||o=="radio"){var f=document.createElement("DIV");f.id="image_"+this.itemPull[b]["id"];f.className="sub_icon "+l;h.appendChild(f);}if(!(o=="checkbox"||o=="radio")){var f=document.createElement("IMG");f.id="image_"+this.itemPull[b]["id"];f.className="sub_icon";f.src=this.imagePath+l;h.appendChild(f);}}var g=document.createElement("TD");g.className="sub_item_text";if(this.itemPull[b]["title"]!=""){var n=document.createElement("DIV");n.className="sub_item_text";n.innerHTML=this.itemPull[b]["title"];g.appendChild(n);}else{g.innerHTML="&nbsp;";}var e=document.createElement("TD");e.className="sub_item_hk";if(this.itemPull[b]["complex"]){var c=document.createElement("DIV");c.className="complex_arrow";c.id="arrow_"+this.itemPull[b]["id"];e.appendChild(c);}else{if(this.itemPull[b]["hotkey"].length>0&&!this.itemPull[b]["complex"]){var d=document.createElement("DIV");d.className="sub_item_hk";d.innerHTML=this.itemPull[b]["hotkey"];e.appendChild(d);}else{e.innerHTML="&nbsp;";}}j.appendChild(this._rtl?e:h);j.appendChild(g);j.appendChild(this._rtl?h:e);j.id=this.itemPull[b]["id"];j.parent=this.itemPull[b]["parent"];if(this.itemPull[b]["tip"].length>0){j.title=this.itemPull[b]["tip"];}if(!this._hideTMData){this._hideTMData={};}j.onselectstart=function(p){p=p||event;p.returnValue=false;return false;};j.onmouseover=function(p){if(a._hideTMData[this.id]){window.clearTimeout(a._hideTMData[this.id]);}if(a.menuMode=="web"){window.clearTimeout(a.menuTimeoutHandler);}if(!this._visible){a._redistribSubLevelSelection(this.id,this.parent);}this._visible=true;};j.onmouseout=function(){if(a.menuMode=="web"){if(a.menuTimeoutHandler){window.clearTimeout(a.menuTimeoutHandler);}a.menuTimeoutHandler=window.setTimeout(function(){if(a&&a._clearAndHide){a._clearAndHide();}},a.menuTimeoutMsec,"JavaScript");}var p=this;if(a._hideTMData[this.id]){window.clearTimeout(a._hideTMData[this.id]);}a._hideTMData[this.id]=window.setTimeout(function(){p._visible=false;},50);};j.onclick=function(q){if(!a.checkEvent("onClick")&&a.itemPull[this.id]["complex"]){return;}q=q||event;q.cancelBubble=true;q.returnValue=false;tc=(a.itemPull[this.id]["complex"]?"c":"-");td=(a.itemPull[this.id]["state"]=="enabled"?"-":"d");var p={ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey};switch(a.itemPull[this.id]["type"]){case"checkbox":a._checkboxOnClickHandler(this.id.replace(a.idPrefix,""),tc+td+"n",p);break;case"radio":a._radioOnClickHandler(this.id.replace(a.idPrefix,""),tc+td+"n",p);break;case"item":a._doOnClick(this.id.replace(a.idPrefix,""),tc+td+"n",p);break;}return false;};var m=this.idPull["polygon_"+this.itemPull[b]["parent"]];if(k!=null){k++;if(k<0){k=0;}if(k>m.tbd.childNodes.length-1){k=null;}}if(k!=null&&m.tbd.childNodes[k]!=null){m.tbd.insertBefore(j,m.tbd.childNodes[k]);}else{m.tbd.appendChild(j);}this.idPull[j.id]=j;};dhtmlXMenuObject.prototype._renderSeparator=function(c,g){var b=(this.context?"SubLevelArea":(this.itemPull[c]["parent"]==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"));if(b=="TopLevel"&&this.context){return;}var a=this;if(b!="TopLevel"){var f=document.createElement("TR");f.className="sub_sep";var d=document.createElement("TD");d.colSpan="3";f.appendChild(d);}var e=document.createElement("DIV");e.id="separator_"+c;e.className=(b=="TopLevel"?"top_sep":"sub_sep");e.onselectstart=function(k){k=k||event;k.returnValue=false;};e.onclick=function(l){l=l||event;l.cancelBubble=true;var k={ctrl:l.ctrlKey,alt:l.altKey,shift:l.shiftKey};a._doOnClick(this.id.replace("separator_"+a.idPrefix,""),"--s",k);};if(b=="TopLevel"){if(g!=null){g++;if(g<0){g=0;}if(this.cont.childNodes[g]!=null){this.cont.insertBefore(e,this.cont.childNodes[g]);}else{this.cont.appendChild(e);}}else{var j=this.cont.childNodes[this.cont.childNodes.length-1];if(String(j).search("TopLevel_Text")==-1){this.cont.appendChild(e);}else{this.cont.insertBefore(e,j);}}this.idPull[e.id]=e;}else{var h=this.idPull["polygon_"+this.itemPull[c]["parent"]];if(g!=null){g++;if(g<0){g=0;}if(g>h.tbd.childNodes.length-1){g=null;}}if(g!=null&&h.tbd.childNodes[g]!=null){h.tbd.insertBefore(f,h.tbd.childNodes[g]);}else{h.tbd.appendChild(f);}d.appendChild(e);this.idPull[e.id]=f;}};dhtmlXMenuObject.prototype.addNewSeparator=function(a,b){b=this.idPrefix+(b!=null?b:this._genStr(24));var c=this.idPrefix+this.getParentId(a);this._addItemIntoGlobalStrorage(b,c,"","separator",false,"","");this._renderSeparator(b,this.getItemPosition(a));};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide();};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,true);this._isInited=false;this.idPrefix=this._genStr(12);this.itemPull={};};dhtmlXMenuObject.prototype.unload=function(){if(_isIE){document.body.detachEvent("onclick",this._bodyClick);document.body.detachEvent("oncontextmenu",this._bodyContext);}else{window.removeEventListener("click",this._bodyClick,false);window.removeEventListener("contextmenu",this._bodyContext,false);}this._bodyClick=null;this._bodyContext=null;this.removeItem(this.idPrefix+this.topId,true);this.itemPull=null;this.idPull=null;if(this.context){for(var b in this.contextZones){this.removeContextZone(b);}}if(this.cont!=null){this.cont.className="";this.cont.parentNode.removeChild(this.cont);this.cont=null;}if(this.base!=null){this.base.className="";if(!this.context){this.base.oncontextmenu=(this.base._oldContextMenuHandler||null);}this.base.onselectstart=null;this.base=null;}this.setSkin=null;this.detachAllEvents();if(this._xmlLoader){this._xmlLoader.destructor();this._xmlLoader=null;}this._align=null;this._arrowFFFix=null;this._isIE6=null;this._isInited=null;this._rtl=null;this._scrollDownTMStep=null;this._scrollDownTMTime=null;this._scrollUpTMStep=null;this._scrollUpTMTime=null;this._topLevelBottomMargin=null;this._topLevelOffsetLeft=null;this._topLevelBottomMargin=null;this._topLevelRightMargin=null;this.addBaseIdAsContextZone=null;this.context=null;this.contextAutoHide=null;this.contextAutoShow=null;this.contextHideAllMode=null;this.contextMenuZoneId=null;this.dLoad=null;this.dLoadSign=null;this.dLoadUrl=null;this.loaderIcon=null;this.fixedPosition=null;this.dirSubLevel=null;this.dirTopLevel=null;this.limit=null;this.menuSelected=null;this.menuLastClicked=null;this.idPrefix=null;this.imagePath=null;this.menuMode=null;this.menuModeTopLevelTimeout=null;this.menuModeTopLevelTimeoutTime=null;this.menuTimeoutHandler=null;this.menuTimeoutMsec=null;this.menuTouched=null;this.isDhtmlxMenuObject=null;this.itemHotKeyTagName=null;this.itemHrefTagName=null;this.itemTagName=null;this.itemTextTagName=null;this.itemTipTagName=null;this.userDataTagName=null;this.skin=null;this.topId=null;this.dacCycles=null;this.dacCyclesIE=null;this.dacSpeed=null;this.dacSpeedIE=null;this.zInd=null;this.zIndInit=null;this.zIndStep=null;this._enableDacSupport=null;this._selectedSubItems=null;this._openedPolygons=null;this._addSubItemToSelected=null;this._removeSubItemFromSelected=null;this._getSubItemToDeselectByPolygon=null;this._hidePolygon=null;this._showPolygon=null;this._redistribSubLevelSelection=null;this._doOnClick=null;this._doOnTouchMenu=null;this._searchMenuNode=null;this._getMenuNodes=null;this._genStr=null;this._clearAndHide=null;this._doOnLoad=null;this.getItemType=null;this.forEachItem=null;this.init=null;this.loadXML=null;this.loadXMLString=null;this._buildMenu=null;this._xmlParser=null;this._showSubLevelItem=null;this._hideSubLevelItem=null;this._countVisiblePolygonItems=null;this._redefineComplexState=null;this._updateItemComplexState=null;this._getItemLevelType=null;this._redistribTopLevelSelection=null;this._initTopLevelMenu=null;this._renderToplevelItem=null;this.setImagePath=null;this.setIconsPath=null;this.setIconPath=null;this._updateItemImage=null;this.removeItem=null;this._getAllParents=null;this.renderAsContextMenu=null;this.addContextZone=null;this.removeContextZone=null;this.isContextZone=null;this._isContextMenuVisible=null;this._showContextMenu=null;this._doOnContextBeforeCall=null;this._autoDetectVisibleArea=null;this._addItemIntoGlobalStrorage=null;this._addSubMenuPolygon=null;this._renderSublevelPolygon=null;this._renderSublevelItem=null;this._renderSeparator=null;this._hideContextMenu=null;this.clearAll=null;this.getItemPosition=null;this.setItemPosition=null;this.getParentId=null;this.addNewSibling=null;this.addNewChild=null;this.addNewSeparator=null;this.attachEvent=null;this.callEvent=null;this.checkEvent=null;this.eventCatcher=null;this.detachEvent=null;this.dhx_Event=null;this.unload=null;this.items=null;this.radio=null;this.detachAllEvents=null;this.hide=null;this.showContextMenu=null;this.hideContextMenu=null;this._changeItemState=null;this._changeItemVisible=null;this._updateLoaderIcon=null;this._clearAllSelectedSubItemsInPolygon=null;this._checkArrowsState=null;this._addUpArrow=null;this._addDownArrow=null;this._removeUpArrow=null;this._removeDownArrow=null;this._isArrowExists=null;this._doScrollUp=null;this._doScrollDown=null;this._countPolygonItems=null;this._getRadioImgObj=null;this._setRadioState=null;this._radioOnClickHandler=null;this._getCheckboxState=null;this._setCheckboxState=null;this._readLevel=null;this._updateCheckboxImage=null;this._checkboxOnClickHandler=null;this._removeArrow=null;this.setItemEnabled=null;this.setItemDisabled=null;this.isItemEnabled=null;this.getItemText=null;this.setItemText=null;this.loadFromHTML=null;this.hideItem=null;this.showItem=null;this.isItemHidden=null;this.setUserData=null;this.getUserData=null;this.setOpenMode=null;this.setWebModeTimeout=null;this.enableDynamicLoading=null;this.getItemImage=null;this.setItemImage=null;this.clearItemImage=null;this.setAutoShowMode=null;this.setAutoHideMode=null;this.setContextMenuHideAllMode=null;this.getContextMenuHideAllMode=null;this.setVisibleArea=null;this.setTooltip=null;this.getTooltip=null;this.setHotKey=null;this.getHotKey=null;this.setItemSelected=null;this.setTopText=null;this.setRTL=null;this.setAlign=null;this.setHref=null;this.clearHref=null;this.getCircuit=null;this.contextZones=null;this.setOverflowHeight=null;this.userData=null;this.getRadioChecked=null;this.setRadioChecked=null;this.addRadioButton=null;this.setCheckboxState=null;this.getCheckboxState=null;this.addCheckbox=null;this.serialize=null;this.extendedModule=null;dhtmlxMenuObjectLiveInstances[this._UID]=null;try{delete dhtmlxMenuObjectLiveInstances[this._UID];}catch(c){}this._UID=null;};var dhtmlxMenuObjectLiveInstances={};dhtmlXMenuObject.prototype.i18n={dhxmenuextalert:"dhtmlxmenu_ext.js required"};(function(){dhtmlx.extend_api("dhtmlXMenuObject",{_init:function(a){return[a.parent,a.skin];},align:"setAlign",top_text:"setTopText",context:"renderAsContextMenu",icon_path:"setIconsPath",open_mode:"setOpenMode",rtl:"setRTL",skin:"setSkin",dynamic:"enableDynamicLoading",xml:"loadXML",items:"items",overflow:"setOverflowHeight"},{items:function(a,d){var f=100000;var c=null;for(var b=0;b<a.length;b++){var e=a[b];if(e.type=="separator"){this.addNewSeparator(c,f,e.id);c=e.id;}else{this.addNewChild(d,f,e.id,e.text,e.disabled,e.img,e.img_disabled);c=e.id;if(e.items){this.items(e.items,e.id);}}}}});})();dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var d in this.itemPull){if(this.itemPull[d].parent==this.idPrefix+this.topId&&this.idPull[d]!=null){var f=false;var e=false;if(this.idPull[d].parentNode.firstChild==this.idPull[d]){f=true;}if(this.idPull[d].parentNode.lastChild==this.idPull[d]){e=true;}for(var c in this.itemPull){if(this.itemPull[c].type=="separator"&&this.itemPull[c].parent==this.idPrefix+this.topId){if(this.idPull[d].nextSibling==this.idPull["separator_"+c]){e=true;}if(this.idPull[d].previousSibling==this.idPull["separator_"+c]){f=true;}}}this.idPull[d].style.borderLeft=(f?"1px solid #cecece":"0px solid white");this.idPull[d].style.borderTopLeftRadius=this.idPull[d].style.borderBottomLeftRadius=(f?"5px":"0px");this.idPull[d].style.borderTopRightRadius=this.idPull[d].style.borderBottomRightRadius=(e?"5px":"0px");this.idPull[d]._bl=f;this.idPull[d]._br=e;}}};dhtmlXMenuObject.prototype._improveTerraceButton=function(b,a){if(a){this.idPull[b].style.borderBottomLeftRadius=(this.idPull[b]._bl?"5px":"0px");this.idPull[b].style.borderBottomRightRadius=(this.idPull[b]._br?"5px":"0px");}else{this.idPull[b].style.borderBottomLeftRadius="0px";this.idPull[b].style.borderBottomRightRadius="0px";}};dhtmlXMenuObject.prototype.extendedModule="DHXMENUEXT";dhtmlXMenuObject.prototype.setItemEnabled=function(a){this._changeItemState(a,"enabled",this._getItemLevelType(a));};dhtmlXMenuObject.prototype.setItemDisabled=function(a){this._changeItemState(a,"disabled",this._getItemLevelType(a));};dhtmlXMenuObject.prototype.isItemEnabled=function(a){return(this.itemPull[this.idPrefix+a]!=null?(this.itemPull[this.idPrefix+a]["state"]=="enabled"):false);};dhtmlXMenuObject.prototype._changeItemState=function(e,d,b){var c=false;var a=this.idPrefix+e;if((this.itemPull[a]!=null)&&(this.idPull[a]!=null)){if(this.itemPull[a]["state"]!=d){this.itemPull[a]["state"]=d;if(this.itemPull[a]["parent"]==this.idPrefix+this.topId&&!this.context){this.idPull[a].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[a]["state"]=="enabled"?"Normal":"Disabled");}else{this.idPull[a].className="sub_item"+(this.itemPull[a]["state"]=="enabled"?"":"_dis");}this._updateItemComplexState(this.idPrefix+e,this.itemPull[this.idPrefix+e]["complex"],false);this._updateItemImage(e,b);if((this.idPrefix+this.menuLastClicked==a)&&(b!="TopLevel")){this._redistribSubLevelSelection(a,this.itemPull[a]["parent"]);}if(b=="TopLevel"&&!this.context){}}}return c;};dhtmlXMenuObject.prototype.getItemText=function(a){return(this.itemPull[this.idPrefix+a]!=null?this.itemPull[this.idPrefix+a]["title"]:"");};dhtmlXMenuObject.prototype.setItemText=function(f,d){f=this.idPrefix+f;if((this.itemPull[f]!=null)&&(this.idPull[f]!=null)){this._clearAndHide();this.itemPull[f]["title"]=d;if(this.itemPull[f]["parent"]==this.idPrefix+this.topId&&!this.context){var c=null;for(var a=0;a<this.idPull[f].childNodes.length;a++){try{if(this.idPull[f].childNodes[a].className=="top_level_text"){c=this.idPull[f].childNodes[a];}}catch(b){}}if(String(this.itemPull[f]["title"]).length==""||this.itemPull[f]["title"]==null){if(c!=null){c.parentNode.removeChild(c);}}else{if(!c){c=document.createElement("DIV");c.className="top_level_text";if(this._rtl&&this.idPull[f].childNodes.length>0){this.idPull[f].insertBefore(c,this.idPull[f].childNodes[0]);}else{this.idPull[f].appendChild(c);}}c.innerHTML=this.itemPull[f]["title"];}}else{var c=null;for(var a=0;a<this.idPull[f].childNodes[1].childNodes.length;a++){if(String(this.idPull[f].childNodes[1].childNodes[a].className||"")=="sub_item_text"){c=this.idPull[f].childNodes[1].childNodes[a];}}if(String(this.itemPull[f]["title"]).length==""||this.itemPull[f]["title"]==null){if(c){c.parentNode.removeChild(c);c=null;this.idPull[f].childNodes[1].innerHTML="&nbsp;";}}else{if(!c){c=document.createElement("DIV");c.className="sub_item_text";this.idPull[f].childNodes[1].innerHTML="";this.idPull[f].childNodes[1].appendChild(c);}c.innerHTML=this.itemPull[f]["title"];}}}};dhtmlXMenuObject.prototype.loadFromHTML=function(a,c,b){this.itemTagName="DIV";if(typeof(a)=="string"){a=document.getElementById(a);}this._buildMenu(a,null);this.init();if(c){a.parentNode.removeChild(a);}if(b!=null){b();}};dhtmlXMenuObject.prototype.hideItem=function(a){this._changeItemVisible(a,false);};dhtmlXMenuObject.prototype.showItem=function(a){this._changeItemVisible(a,true);};dhtmlXMenuObject.prototype.isItemHidden=function(b){var a=null;if(this.idPull[this.idPrefix+b]!=null){a=(this.idPull[this.idPrefix+b].style.display=="none");}return a;};dhtmlXMenuObject.prototype._changeItemVisible=function(c,b){var a=this.idPrefix+c;if(this.itemPull[a]==null){return;}if(this.itemPull[a]["type"]=="separator"){a="separator_"+a;}if(this.idPull[a]==null){return;}this.idPull[a].style.display=(b?"":"none");this._redefineComplexState(this.itemPull[this.idPrefix+c]["parent"]);};dhtmlXMenuObject.prototype.setUserData=function(c,a,b){this.userData[this.idPrefix+c+"_"+a]=b;};dhtmlXMenuObject.prototype.getUserData=function(b,a){return(this.userData[this.idPrefix+b+"_"+a]!=null?this.userData[this.idPrefix+b+"_"+a]:null);};dhtmlXMenuObject.prototype.setOpenMode=function(a){if(a=="win"||a=="web"){this.menuMode=a;}else{this.menuMode=="web";}};dhtmlXMenuObject.prototype.setWebModeTimeout=function(a){this.menuTimeoutMsec=(!isNaN(a)?a:400);};dhtmlXMenuObject.prototype.enableDynamicLoading=function(a,b){this.dLoad=true;this.dLoadUrl=a;this.dLoadSign=(String(this.dLoadUrl).search(/\?/)==-1?"?":"&");this.loaderIcon=b;this.init();};dhtmlXMenuObject.prototype._updateLoaderIcon=function(d,c){if(this.idPull[d]==null){return;}if(String(this.idPull[d].className).search("TopLevel_Item")>=0){return;}var b=(this._rtl?0:2);if(!this.idPull[d].childNodes[b]){return;}if(!this.idPull[d].childNodes[b].childNodes[0]){return;}var a=this.idPull[d].childNodes[b].childNodes[0];if(String(a.className).search("complex_arrow")===0){a.className="complex_arrow"+(c?"_loading":"");}};dhtmlXMenuObject.prototype.getItemImage=function(b){var a=new Array(null,null);b=this.idPrefix+b;if(this.itemPull[b]["type"]=="item"){a[0]=this.itemPull[b]["imgen"];a[1]=this.itemPull[b]["imgdis"];}return a;};dhtmlXMenuObject.prototype.setItemImage=function(c,a,b){if(this.itemPull[this.idPrefix+c]["type"]!="item"){return;}this.itemPull[this.idPrefix+c]["imgen"]=a;this.itemPull[this.idPrefix+c]["imgdis"]=b;this._updateItemImage(c,this._getItemLevelType(c));};dhtmlXMenuObject.prototype.clearItemImage=function(a){this.setItemImage(a,"","");};dhtmlXMenuObject.prototype.setAutoShowMode=function(a){this.contextAutoShow=(a==true?true:false);};dhtmlXMenuObject.prototype.setAutoHideMode=function(a){this.contextAutoHide=(a==true?true:false);};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(a){this.contextHideAllMode=(a==true?true:false);};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.contextHideAllMode;};dhtmlXMenuObject.prototype.setVisibleArea=function(b,a,d,c){this._isVisibleArea=true;this.menuX1=b;this.menuX2=a;this.menuY1=d;this.menuY2=c;};dhtmlXMenuObject.prototype.setTooltip=function(b,a){b=this.idPrefix+b;if(!(this.itemPull[b]!=null&&this.idPull[b]!=null)){return;}this.idPull[b].title=(a.length>0?a:null);this.itemPull[b]["tip"]=a;};dhtmlXMenuObject.prototype.getTooltip=function(a){if(this.itemPull[this.idPrefix+a]==null){return null;}return this.itemPull[this.idPrefix+a]["tip"];};dhtmlXMenuObject.prototype.setHotKey=function(g,a){g=this.idPrefix+g;if(!(this.itemPull[g]!=null&&this.idPull[g]!=null)){return;}if(this.itemPull[g]["parent"]==this.idPrefix+this.topId&&!this.context){return;}if(this.itemPull[g]["complex"]){return;}var b=this.itemPull[g]["type"];if(!(b=="item"||b=="checkbox"||b=="radio")){return;}var f=null;try{if(this.idPull[g].childNodes[this._rtl?0:2].childNodes[0].className=="sub_item_hk"){f=this.idPull[g].childNodes[this._rtl?0:2].childNodes[0];}}catch(d){}if(a.length==0){this.itemPull[g]["hotkey_backup"]=this.itemPull[g]["hotkey"];this.itemPull[g]["hotkey"]="";if(f!=null){f.parentNode.removeChild(f);}}else{this.itemPull[g]["hotkey"]=a;this.itemPull[g]["hotkey_backup"]=null;if(f==null){f=document.createElement("DIV");f.className="sub_item_hk";var c=this.idPull[g].childNodes[this._rtl?0:2];while(c.childNodes.length>0){c.removeChild(c.childNodes[0]);}c.appendChild(f);}f.innerHTML=a;}};dhtmlXMenuObject.prototype.getHotKey=function(a){if(this.itemPull[this.idPrefix+a]==null){return null;}return this.itemPull[this.idPrefix+a]["hotkey"];};dhtmlXMenuObject.prototype.setItemSelected=function(a){if(this.itemPull[this.idPrefix+a]==null){return null;}};dhtmlXMenuObject.prototype.setTopText=function(a){if(this.context){return;}if(this._topText==null){this._topText=document.createElement("DIV");this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":(this._align=="left"?"right":"left"));this.base.appendChild(this._topText);}this._topText.innerHTML=a;};dhtmlXMenuObject.prototype.setAlign=function(a){if(this._align==a){return;}if(a=="left"||a=="right"){this._align=a;if(this.cont){this.cont.className=(this._align=="right"?"align_right":"align_left");}if(this._topText!=null){this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._align=="left"?"right":"left");}}};dhtmlXMenuObject.prototype.setHref=function(c,a,b){if(this.itemPull[this.idPrefix+c]==null){return;}this.itemPull[this.idPrefix+c]["href_link"]=a;if(b!=null){this.itemPull[this.idPrefix+c]["href_target"]=b;}};dhtmlXMenuObject.prototype.clearHref=function(a){if(this.itemPull[this.idPrefix+a]==null){return;}delete this.itemPull[this.idPrefix+a]["href_link"];delete this.itemPull[this.idPrefix+a]["href_target"];};dhtmlXMenuObject.prototype.getCircuit=function(b){var a=new Array(b);while(this.getParentId(b)!=this.topId){b=this.getParentId(b);a[a.length]=b;}return a.reverse();};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(a){var c=this._getSubItemToDeselectByPolygon(a);for(var b=0;b<this._openedPolygons.length;b++){if(this._openedPolygons[b]!=a){this._hidePolygon(this._openedPolygons[b]);}}for(var b=0;b<c.length;b++){if(this.idPull[c[b]]!=null){if(this.itemPull[c[b]]["state"]=="enabled"){this.idPull[c[b]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal";}}}};dhtmlXMenuObject.prototype._checkArrowsState=function(d){var b=this.idPull["polygon_"+d];var c=this.idPull["arrowup_"+d];var a=this.idPull["arrowdown_"+d];if(b.scrollTop==0){c.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp_Disabled";}else{c.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp"+(c.over?"_Over":"");}if(b.scrollTop+b.offsetHeight<b.scrollHeight){a.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown"+(a.over?"_Over":"");}else{a.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown_Disabled";}};dhtmlXMenuObject.prototype._addUpArrow=function(c){var a=this;var b=document.createElement("DIV");b.pId=this.idPrefix+c;b.id="arrowup_"+this.idPrefix+c;b.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp";b.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";b.style.display="none";b.over=false;b.onselectstart=function(d){d=d||event;d.returnValue=false;return false;};b.oncontextmenu=function(d){d=d||event;d.returnValue=false;return false;};b.onmouseover=function(){if(a.menuMode=="web"){window.clearTimeout(a.menuTimeoutHandler);}a._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className=="dhtmlxMenu_"+a.skin+"_SubLevelArea_ArrowUp_Disabled"){return;}this.className="dhtmlxMenu_"+a.skin+"_SubLevelArea_ArrowUp_Over";this.over=true;a._canScrollUp=true;a._doScrollUp(this.pId,true);};b.onmouseout=function(){if(a.menuMode=="web"){window.clearTimeout(a.menuTimeoutHandler);a.menuTimeoutHandler=window.setTimeout(function(){a._clearAndHide();},a.menuTimeoutMsec,"JavaScript");}this.over=false;a._canScrollUp=false;if(this.className=="dhtmlxMenu_"+a.skin+"_SubLevelArea_ArrowUp_Disabled"){return;}this.className="dhtmlxMenu_"+a.skin+"_SubLevelArea_ArrowUp";window.clearTimeout(a._scrollUpTM);};b.onclick=function(d){d=d||event;d.returnValue=false;d.cancelBubble=true;return false;};document.body.insertBefore(b,document.body.firstChild);this.idPull[b.id]=b;};dhtmlXMenuObject.prototype._addDownArrow=function(c){var a=this;var b=document.createElement("DIV");b.pId=this.idPrefix+c;b.id="arrowdown_"+this.idPrefix+c;b.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown";b.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";b.style.display="none";b.over=false;b.onselectstart=function(d){d=d||event;d.returnValue=false;return false;};b.oncontextmenu=function(d){d=d||event;d.returnValue=false;return false;};b.onmouseover=function(){if(a.menuMode=="web"){window.clearTimeout(a.menuTimeoutHandler);}a._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className=="dhtmlxMenu_"+a.skin+"_SubLevelArea_ArrowDown_Disabled"){return;}this.className="dhtmlxMenu_"+a.skin+"_SubLevelArea_ArrowDown_Over";this.over=true;a._canScrollDown=true;a._doScrollDown(this.pId,true);};b.onmouseout=function(){if(a.menuMode=="web"){window.clearTimeout(a.menuTimeoutHandler);a.menuTimeoutHandler=window.setTimeout(function(){a._clearAndHide();},a.menuTimeoutMsec,"JavaScript");}this.over=false;a._canScrollDown=false;if(this.className=="dhtmlxMenu_"+a.skin+"_SubLevelArea_ArrowDown_Disabled"){return;}this.className="dhtmlxMenu_"+a.skin+"_SubLevelArea_ArrowDown";window.clearTimeout(a._scrollDownTM);};b.onclick=function(d){d=d||event;d.returnValue=false;d.cancelBubble=true;return false;};document.body.insertBefore(b,document.body.firstChild);this.idPull[b.id]=b;};dhtmlXMenuObject.prototype._removeUpArrow=function(b){var a="arrowup_"+this.idPrefix+b;this._removeArrow(a);};dhtmlXMenuObject.prototype._removeDownArrow=function(b){var a="arrowdown_"+this.idPrefix+b;this._removeArrow(a);};dhtmlXMenuObject.prototype._removeArrow=function(a){var b=this.idPull[a];b.onselectstart=null;b.oncontextmenu=null;b.onmouseover=null;b.onmouseout=null;b.onclick=null;if(b.parentNode){b.parentNode.removeChild(b);}b=null;this.idPull[a]=null;try{delete this.idPull[a];}catch(c){}};dhtmlXMenuObject.prototype._isArrowExists=function(a){if(this.idPull["arrowup_"+a]!=null&&this.idPull["arrowdown_"+a]!=null){return true;}return false;};dhtmlXMenuObject.prototype._doScrollUp=function(f,d){var a=this.idPull["polygon_"+f];if(this._canScrollUp&&a.scrollTop>0){var c=false;var e=a.scrollTop-this._scrollUpTMStep;if(e<0){c=true;e=0;}a.scrollTop=e;if(!c){var b=this;this._scrollUpTM=window.setTimeout(function(){b._doScrollUp(f,false);},this._scrollUpTMTime);}}else{this._canScrollUp=false;this._checkArrowsState(f);}if(d){this._checkArrowsState(f);}};dhtmlXMenuObject.prototype._doScrollDown=function(f,d){var a=this.idPull["polygon_"+f];if(this._canScrollDown&&a.scrollTop+a.offsetHeight<=a.scrollHeight){var c=false;var e=a.scrollTop+this._scrollDownTMStep;if(e+a.offsetHeight>a.scollHeight){c=true;e=a.scollHeight-a.offsetHeight;}a.scrollTop=e;if(!c){var b=this;this._scrollDownTM=window.setTimeout(function(){b._doScrollDown(f,false);},this._scrollDownTMTime);}}else{this._canScrollDown;this._checkArrowsState(f);}if(d){this._checkArrowsState(f);}};dhtmlXMenuObject.prototype._countPolygonItems=function(f){var d=0;for(var b in this.itemPull){var c=this.itemPull[b]["parent"];var e=this.itemPull[b]["type"];if(c==this.idPrefix+f&&(e=="item"||e=="radio"||e=="checkbox")){d++;}}return d;};dhtmlXMenuObject.prototype.setOverflowHeight=function(e){if(e==="auto"){this.limit=0;this.autoOverflow=true;return;}if(this.limit==0&&e<=0){return;}this._clearAndHide();if(this.limit>=0&&e>0){this.limit=e;return;}if(this.limit>0&&e<=0){for(var d in this.itemPull){if(this._isArrowExists(d)){var c=String(d).replace(this.idPrefix,"");this._removeUpArrow(c);this._removeDownArrow(c);this.idPull["polygon_"+d].style.height="";}}this.limit=0;return;}};dhtmlXMenuObject.prototype._getRadioImgObj=function(c){try{var a=this.idPull[this.idPrefix+c].childNodes[(this._rtl?2:0)].childNodes[0];}catch(b){var a=null;}return a;};dhtmlXMenuObject.prototype._setRadioState=function(d,c){var b=this._getRadioImgObj(d);if(b!=null){var a=this.itemPull[this.idPrefix+d];a.checked=c;a.imgen="rdbt_"+(a.checked?"1":"0");a.imgdis=a.imgen;b.className="sub_icon "+a.imgen;}};dhtmlXMenuObject.prototype._radioOnClickHandler=function(d,a,b){if(a.charAt(1)=="d"||this.itemPull[this.idPrefix+d]["group"]==null){return;}var c=this.itemPull[this.idPrefix+d]["group"];if(this.checkEvent("onRadioClick")){if(this.callEvent("onRadioClick",[c,this.getRadioChecked(c),d,this.contextMenuZoneId,b])){this.setRadioChecked(c,d);}}else{this.setRadioChecked(c,d);}if(this.checkEvent("onClick")){this.callEvent("onClick",[d]);}};dhtmlXMenuObject.prototype.getRadioChecked=function(d){var f=null;for(var c=0;c<this.radio[d].length;c++){var e=this.radio[d][c].replace(this.idPrefix,"");var a=this._getRadioImgObj(e);if(a!=null){var b=(a.className).match(/rdbt_1$/gi);if(b!=null){f=e;}}}return f;};dhtmlXMenuObject.prototype.setRadioChecked=function(b,d){if(this.radio[b]==null){return;}for(var a=0;a<this.radio[b].length;a++){var c=this.radio[b][a].replace(this.idPrefix,"");this._setRadioState(c,(c==d));}};dhtmlXMenuObject.prototype.addRadioButton=function(j,e,k,l,m,n,a,f){if(this.context&&e==this.topId){}else{if(this.itemPull[this.idPrefix+e]==null){return;}if(j=="child"&&this.itemPull[this.idPrefix+e]["type"]!="item"){return;}}var c=this.idPrefix+(l!=null?l:this._genStr(24));var g="rdbt_"+(a?"1":"0");var b=g;if(j=="sibling"){var h=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(c,h,m,"radio",f,g,b);this._renderSublevelItem(c,this.getItemPosition(e));}else{var h=this.idPrefix+e;this._addItemIntoGlobalStrorage(c,h,m,"radio",f,g,b);if(this.idPull["polygon_"+h]==null){this._renderSublevelPolygon(h,h);}this._renderSublevelItem(c,k-1);this._redefineComplexState(h);}var d=(n!=null?n:this._genStr(24));this.itemPull[c]["group"]=d;if(this.radio[d]==null){this.radio[d]=new Array();}this.radio[d][this.radio[d].length]=c;if(a==true){this.setRadioChecked(d,String(c).replace(this.idPrefix,""));}};dhtmlXMenuObject.prototype._getCheckboxState=function(a){if(this.itemPull[this.idPrefix+a]==null){return null;}return this.itemPull[this.idPrefix+a]["checked"];};dhtmlXMenuObject.prototype._setCheckboxState=function(b,a){if(this.itemPull[this.idPrefix+b]==null){return;}this.itemPull[this.idPrefix+b]["checked"]=a;};dhtmlXMenuObject.prototype._updateCheckboxImage=function(b){if(this.idPull[this.idPrefix+b]==null){return;}this.itemPull[this.idPrefix+b]["imgen"]="chbx_"+(this._getCheckboxState(b)?"1":"0");this.itemPull[this.idPrefix+b]["imgdis"]=this.itemPull[this.idPrefix+b]["imgen"];try{this.idPull[this.idPrefix+b].childNodes[(this._rtl?2:0)].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+b]["imgen"];}catch(a){}};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(d,a,b){if(a.charAt(1)=="d"){return;}if(this.itemPull[this.idPrefix+d]==null){return;}var c=this._getCheckboxState(d);if(this.checkEvent("onCheckboxClick")){if(this.callEvent("onCheckboxClick",[d,c,this.contextMenuZoneId,b])){this.setCheckboxState(d,!c);}}else{this.setCheckboxState(d,!c);}if(this.checkEvent("onClick")){this.callEvent("onClick",[d]);}};dhtmlXMenuObject.prototype.setCheckboxState=function(b,a){this._setCheckboxState(b,a);this._updateCheckboxImage(b);};dhtmlXMenuObject.prototype.getCheckboxState=function(a){return this._getCheckboxState(a);};dhtmlXMenuObject.prototype.addCheckbox=function(h,d,j,k,l,a,e){if(this.context&&d==this.topId){}else{if(this.itemPull[this.idPrefix+d]==null){return;}if(h=="child"&&this.itemPull[this.idPrefix+d]["type"]!="item"){return;}}var f="chbx_"+(a?"1":"0");var c=f;if(h=="sibling"){var b=this.idPrefix+(k!=null?k:this._genStr(24));var g=this.idPrefix+this.getParentId(d);this._addItemIntoGlobalStrorage(b,g,l,"checkbox",e,f,c);this.itemPull[b]["checked"]=a;this._renderSublevelItem(b,this.getItemPosition(d));}else{var b=this.idPrefix+(k!=null?k:this._genStr(24));var g=this.idPrefix+d;this._addItemIntoGlobalStrorage(b,g,l,"checkbox",e,f,c);this.itemPull[b]["checked"]=a;if(this.idPull["polygon_"+g]==null){this._renderSublevelPolygon(g,g);}this._renderSublevelItem(b,j-1);this._redefineComplexState(g);}};dhtmlXMenuObject.prototype._readLevel=function(d){var e="";for(var j in this.itemPull){if(this.itemPull[j]["parent"]==d){var b="";var c="";var l="";var h=String(this.itemPull[j]["id"]).replace(this.idPrefix,"");var g="";var k=(this.itemPull[j]["title"]!=""?' text="'+this.itemPull[j]["title"]+'"':"");var f="";if(this.itemPull[j]["type"]=="item"){if(this.itemPull[j]["imgen"]!=""){b=' img="'+this.itemPull[j]["imgen"]+'"';}if(this.itemPull[j]["imgdis"]!=""){c=' imgdis="'+this.itemPull[j]["imgdis"]+'"';}if(this.itemPull[j]["hotkey"]!=""){l="<hotkey>"+this.itemPull[j]["hotkey"]+"</hotkey>";}}if(this.itemPull[j]["type"]=="separator"){g=' type="separator"';}else{if(this.itemPull[j]["state"]=="disabled"){f=' enabled="false"';}}if(this.itemPull[j]["type"]=="checkbox"){g=' type="checkbox"'+(this.itemPull[j]["checked"]?' checked="true"':"");}if(this.itemPull[j]["type"]=="radio"){g=' type="radio" group="'+this.itemPull[j]["group"]+'" '+(this.itemPull[j]["checked"]?' checked="true"':"");}e+="<item id='"+h+"'"+k+g+b+c+f+">";e+=l;if(this.itemPull[j]["complex"]){e+=this._readLevel(j);}e+="</item>";}}return e;};dhtmlXMenuObject.prototype.serialize=function(){var a="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return a;};function dhtmlXWindowsSngl(){}function dhtmlXWindowsBtn(){}function dhtmlXWindows(){if(!window.dhtmlXContainer){alert(this.i18n.dhx);return;}this.engine="dhx";var d="_"+this.engine+"_Engine";if(!this[d]){alert(this.i18n.noenginealert);return;}else{this[d]();}this._isIPad=(navigator.userAgent.search(/iPad/gi)>=0);var c=this;this.pathPrefix="dhxwins_";this.imagePath=dhtmlx.image_path;this.setImagePath=function(a){this.imagePath=a;};this.skin=(typeof(dhtmlx)!="undefined"&&typeof(dhtmlx.skin)=="string"?dhtmlx.skin:"dhx_skyblue");this.skinParams={dhx_black:{header_height:21,border_left_width:2,border_right_width:2,border_bottom_height:2},dhx_blue:{header_height:21,border_left_width:2,border_right_width:2,border_bottom_height:2},dhx_skyblue:{header_height:21,border_left_width:2,border_right_width:2,border_bottom_height:2}};this.setSkin=function(a){this.skin=a;this._engineRedrawSkin();};this.isWindow=function(e){var a=(this.wins[e]!=null);return a;};this.findByText=function(g){var f=new Array();for(var e in this.wins){if(this.wins[e].getText().search(g,"gi")>=0){f[f.length]=this.wins[e];}}return f;};this.window=function(e){var a=null;if(this.wins[e]!=null){a=this.wins[e];}return a;};this.forEachWindow=function(f){for(var e in this.wins){f(this.wins[e]);}};this.getBottommostWindow=function(){var e=this.getTopmostWindow();for(var f in this.wins){if(this.wins[f].zi<e.zi){e=this.wins[f];}}return(e.zi!=0?e:null);};this.getTopmostWindow=function(g){var f={zi:0};for(var e in this.wins){if(this.wins[e].zi>f.zi){if(g==true&&!this._isWindowHidden(this.wins[e])){f=this.wins[e];}if(g!=true){f=this.wins[e];}}}return(f.zi!=0?f:null);};this.wins={};for(var b in this.wins){delete this.wins[b];}this.autoViewport=true;this._createViewport=function(){this.vp=document.body;this._clearVPCss();this.vp._css=(String(this.vp.className).length>0?this.vp.className:"");this.vp.className+=" dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.modalCoverI=document.createElement("IFRAME");this.modalCoverI.frameBorder="0";this.modalCoverI.className="dhx_modal_cover_ifr";this.modalCoverI.setAttribute("src","javascript:false;");this.modalCoverI.style.display="none";this.modalCoverI.style.zIndex=0;this.vp.appendChild(this.modalCoverI);this.modalCoverD=document.createElement("DIV");this.modalCoverD.className="dhx_modal_cover_dv";this.modalCoverD.style.display="none";this.modalCoverD.style.zIndex=0;this.vp.appendChild(this.modalCoverD);this._vpcover=document.createElement("DIV");this._vpcover.className="dhx_content_vp_cover";this._vpcover.style.display="none";this.vp.appendChild(this._vpcover);this._carcass=document.createElement("DIV");this._carcass.className="dhx_carcass_resmove";this._carcass.style.display="none";if(_isIE){this._carcass.innerHTML="<iframe border=0 frameborder=0 style='filter: alpha(opacity=0); width: 100%; height:100%; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index:1;'></iframe><div style='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;z-index:2;background:white;filter:alpha(opacity=0);opacity:0;'></div>";if(navigator.userAgent.indexOf("MSIE 10")>=0){}else{this._carcass.childNodes[0].setAttribute("src","javascript:false;");}}this._carcass.onselectstart=function(a){a=a||event;a.returnValue=false;};this.vp.appendChild(this._carcass);};this._clearVPCss=function(a){this.vp.className=String(this.vp.className).replace(/[a-z_]{1,}/gi,function(e){return({dhtmlx_skin_dhx_skyblue:1,dhtmlx_skin_dhx_blue:1,dhtmlx_skin_dhx_black:1,dhtmlx_skin_dhx_web:1,dhtmlx_skin_dhx_terrace:1}[e]==1?"":e);});};this._autoResizeViewport=function(){for(var e in this.wins){if(this.wins[e]._isFullScreened){this.wins[e].adjustContent(document.body,0,0,false,0);this.wins[e].updateNestedObjects();}if(this.wins[e]._isMaximized&&this.wins[e].style.display!="none"){this._restoreWindow(e);this._maximizeWindow(e);}}if(this.vp==document.body){return;}if(this.autoViewport==false){return;}this.vp.style.width=(_isIE?document.body.offsetWidth-4:window.innerWidth)+"px";this.vp.style.height=(_isIE?document.body.offsetHeight-4:window.innerHeight)+"px";for(var e in this.wins){var j=this.wins[e];var h=false;var f=false;if(j.x>this.vp.offsetWidth-10){j.x=this.vp.offsetWidth-10;h=true;}var g=(j._skinParams!=null?j._skinParams:this.skinParams[this.skin]);if(j.y+g.header_height>this.vp.offsetHeight){j.y=this.vp.offsetHeight-g.header_height;f=true;}if(h||f){this._engineRedrawWindowPos(j);}}};this.enableAutoViewport=function(a){if(this.vp!=document.body){return;}this.autoViewport=a;if(a==false){if(this.vp==document.body){document.body.className=this.vp._css;}this.vp.removeChild(this.modalCoverI);this.vp.removeChild(this.modalCoverD);this.vp.removeChild(this._vpcover);this.vp.removeChild(this._carcass);this.vp=null;this.vp=document.createElement("DIV");this.vp.autocreated=true;this.vp.className="dhtmlx_winviewport dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.vp.style.left="0px";this.vp.style.top="0px";document.body.appendChild(this.vp);this.vp.ax=0;this.vp.ay=0;this._autoResizeViewport();this.vp.appendChild(this.modalCoverI);this.vp.appendChild(this.modalCoverD);this.vp.appendChild(this._vpcover);this.vp.appendChild(this._carcass);}};this.attachViewportTo=function(a){if(this.autoViewport==false){this.vp.removeChild(this.modalCoverI);this.vp.removeChild(this.modalCoverD);this.vp.removeChild(this._vpcover);this.vp.removeChild(this._carcass);if(this.vp!=document.body){this.vp.parentNode.removeChild(this.vp);}this.vp=null;this.vp=(typeof(a)=="string"?document.getElementById(a):a);this.vp.autocreated=false;this._clearVPCss();this.vp.className+=" dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.vp.style.position="relative";this.vp.style.overflow="hidden";this.vp.ax=0;this.vp.ay=0;this.vp.appendChild(this.modalCoverI);this.vp.appendChild(this.modalCoverD);this.vp.appendChild(this._vpcover);this.vp.appendChild(this._carcass);}};this.setViewport=function(e,h,f,a,g){if(this.autoViewport==false){this.vp.style.left=e+"px";this.vp.style.top=h+"px";this.vp.style.width=f+"px";this.vp.style.height=a+"px";if(g!=null){g.appendChild(this.vp);}this.vp.ax=getAbsoluteLeft(this.vp);this.vp.ay=getAbsoluteTop(this.vp);}};this._effects={move:false,resize:false};this.setEffect=function(e,a){if((this._effects[e]!=null)&&(typeof(a)=="boolean")){this._effects[e]=a;}};this.getEffect=function(a){return this._effects[a];};this.createWindow=function(m,f,l,h,e){var k=document.createElement("DIV");k.className="dhtmlx_window_inactive";k.dir="ltr";for(var g in this.wins){this.wins[g].zi+=this.zIndexStep;this.wins[g].style.zIndex=this.wins[g].zi;if(this.iframeMode&&this.wins[g].ifr){this.wins[g].ifr.style.zIndex=this.wins[g].style.zIndex-1;}}k.zi=this.zIndexStep;k.style.zIndex=k.zi;k.active=false;k._isWindow=true;k.isWindow=true;k.w=Number(h);k.h=Number(e);k.x=f;k.y=l;this._engineFixWindowPosInViewport(k);k._isModal=false;k._allowResize=true;k.maxW="auto";k.maxH="auto";k.minW=200;k.minH=140;k.iconsPresent=true;k.icons=new Array(this.imagePath+"icon_normal.gif",this.imagePath+"icon_normal.gif");k._allowMove=true;k._allowMoveGlobal=true;k._allowResizeGlobal=true;k._keepInViewport=false;var j=this.skinParams[this.skin];k.idd=m;this.vp.appendChild(k);this._engineSetWindowBody(k);this._engineRedrawWindowPos(k);this._engineRedrawWindowSize(k);this._engineUpdateWindowIcon(k,k.icons[0]);this._engineDiableOnSelectInWindow(k,true);this.wins[m]=k;dhtmlxEventable(k);this._engineGetWindowHeader(k)[this._isIPad?"ontouchstart":"onmousedown"]=function(n){n=n||event;var a=c.wins[this.idd];if(!a.isOnTop()){a.bringToTop();}if(c._engineGetWindowHeaderState(a)){return;}if(!c._engineCheckHeaderMouseDown(a,n)){return;}if(!a._allowMove||!a._allowMoveGlobal){return;}c._wasMoved=false;a.moveOffsetX=a.x-(c._isIPad?n.touches[0].clientX:n.clientX);a.moveOffsetY=a.y-(c._isIPad?n.touches[0].clientY:n.clientY);c.movingWin=a;if(c._effects.move==false){c._carcass.x=c.movingWin.x;c._carcass.y=c.movingWin.y;c._carcass.w=parseInt(c.movingWin.style.width)+(_isIE?0:-2);c._carcass.h=parseInt(c.movingWin.style.height)+(_isIE?0:-2);c._carcass.style.left=c._carcass.x+"px";c._carcass.style.top=c._carcass.y+"px";c._carcass.style.width=c._carcass.w+"px";c._carcass.style.height=c._carcass.h+"px";c._carcass.style.zIndex=c._getTopZIndex(true)+1;c._carcass._keepInViewport=k._keepInViewport;}c._blockSwitcher(true);c._vpcover.style.zIndex=c.movingWin.style.zIndex-1;c._vpcover.style.display="";n.returnValue=false;n.cancelBubble=true;return false;};this._engineGetWindowHeader(k).ondblclick=function(n){var a=c.wins[this.idd];if(!c._engineCheckHeaderMouseDown(a,n||event)){return;}if(a._allowResizeGlobal&&!a._isParked){if(a._isMaximized==true){c._restoreWindow(a.idd);}else{c._maximizeWindow(a.idd);}}a=null;};k.setText=function(a){c._engineGetWindowLabel(this).innerHTML=a;};k.getText=function(){return c._engineGetWindowLabel(this).innerHTML;};k.getId=function(){return this.idd;};k.show=function(){c._showWindow(this);};k.hide=function(){c._hideWindow(this);};k.minimize=function(){c._restoreWindow(this.idd);};k.maximize=function(){c._maximizeWindow(this.idd);};k.close=function(){c._closeWindow(this.idd);};k.park=function(){if(this._isParkedAllowed){c._parkWindow(this.idd);}};k.stick=function(){c._stickWindow(this.idd);};k.unstick=function(){c._unstickWindow(this.idd);};k.isSticked=function(){return this._isSticked;};k.setIcon=function(n,a){c._setWindowIcon(k,n,a);};k.getIcon=function(){return c._getWindowIcon(this);};k.clearIcon=function(){c._clearWindowIcons(this);};k.restoreIcon=function(){c._restoreWindowIcons(this);};k.keepInViewport=function(a){this._keepInViewport=a;};k.setModal=function(a){if(a==true){if(c.modalWin!=null||c.modalWin==this){return;}c._setWindowModal(this,true);}else{if(c.modalWin!=this){return;}c._setWindowModal(this,false);}};k.isModal=function(){return this._isModal;};k.isHidden=function(){return c._isWindowHidden(this);};k.isMaximized=function(){return this._isMaximized;};k.isParked=function(){return this._isParked;};k.allowPark=function(){c._allowParking(this);};k.denyPark=function(){c._denyParking(this);};k.isParkable=function(){return this._isParkedAllowed;};k.allowResize=function(){c._allowReszieGlob(this);};k.denyResize=function(){c._denyResize(this);};k.isResizable=function(){return this._allowResizeGlobal;};k.allowMove=function(){if(!this._isMaximized){this._allowMove=true;}this._allowMoveGlobal=true;};k.denyMove=function(){this._allowMoveGlobal=false;};k.isMovable=function(){return this._allowMoveGlobal;};k.bringToTop=function(){c._bringOnTop(this);c._makeActive(this);};k.bringToBottom=function(){c._bringOnBottom(this);};k.isOnTop=function(){return c._isWindowOnTop(this);};k.isOnBottom=function(){return c._isWindowOnBottom(this);};k.setPosition=function(a,n){this.x=a;this.y=n;c._engineFixWindowPosInViewport(this);c._engineRedrawWindowPos(this);};k.getPosition=function(){return new Array(this.x,this.y);};k.setDimension=function(n,a){if(n!=null){if(this.maxW!="auto"){if(n>this.maxW){n=this.maxW;}}if(n<this.minW){n=this.minW;}this.w=n;}if(a!=null){if(this.maxH!="auto"){if(a>this.maxH){a=this.maxH;}}if(a<this.minH){a=this.minH;}this.h=a;}c._fixWindowDimensionInViewport(this);c._engineFixWindowPosInViewport(this);c._engineRedrawWindowSize(this);this.updateNestedObjects();};k.getDimension=function(){return new Array(this.w,this.h);};k.setMaxDimension=function(n,a){this.maxW=(isNaN(n)?"auto":n);this.maxH=(isNaN(a)?"auto":a);c._engineRedrawWindowSize(this);};k.getMaxDimension=function(){return new Array(this.maxW,this.maxH);};k.setMinDimension=function(a,n){if(a!=null){this.minW=a;}if(n!=null){this.minH=n;}c._fixWindowDimensionInViewport(this);c._engineRedrawWindowPos(this);};k.getMinDimension=function(){return new Array(this.minW,this.minH);};k._adjustToContent=function(a,n){c._engineAdjustWindowToContent(this,a,n);};k._doOnAttachMenu=function(){c._engineRedrawWindowSize(this);this.updateNestedObjects();};k._doOnAttachToolbar=function(){c._engineRedrawWindowSize(this);this.updateNestedObjects();};k._doOnAttachStatusBar=function(){c._engineRedrawWindowSize(this);this.updateNestedObjects();};k._doOnFrameMouseDown=function(){this.bringToTop();};k._doOnFrameContentLoaded=function(){c.callEvent("onContentLoaded",[this]);};k.addUserButton=function(q,p,o,a){var n=c._addUserButton(this,q,p,o,a);return n;};k.removeUserButton=function(a){a=String(a).toLowerCase();if(!((a=="minmax1")||(a=="minmax2")||(a=="park")||(a=="close")||(a=="stick")||(a=="unstick")||(a=="help"))){if(btn!=null){c._removeUserButton(this,a);}}};k.progressOn=function(){c._engineSwitchWindowProgress(this,true);};k.progressOff=function(){c._engineSwitchWindowProgress(this,false);};k.setToFullScreen=function(a){c._setWindowToFullScreen(this,a);};k.showHeader=function(){c._engineSwitchWindowHeader(this,true);};k.hideHeader=function(){c._engineSwitchWindowHeader(this,false);};k.progressOff();k.canStartResize=false;k.onmousemove=function(r){if(_isIE&&this._isMaximized){return true;}r=r||event;var o=r.target||r.srcElement;if(String(o.className).search("dhtmlx_wins_resizer")<0){o=null;}if(!this._allowResize||this._allowResizeGlobal==false||!o){if(o){if(o.style.cursor!="default"){o.style.cursor="default";}}if(this.style.cursor!="default"){this.style.cursor="default";}this.canStartResize=false;return true;}if(c.resizingWin!=null){return;}if(c.movingWin!=null){return;}if(this._isParked){return;}if(c._isIPad){var n=r.touches[0].clientX;var a=r.touches[0].clientY;}else{var n=(_isIE||_isOpera?r.offsetX:r.layerX);var a=(_isIE||_isOpera?r.offsetY:r.layerY);}var p=c._engineAllowWindowResize(k,o,n,a);if(p==null){this.canStartResize=false;if(o.style.cursor!="default"){o.style.cursor="default";}if(this.style.cursor!="default"){this.style.cursor="default";}return;}c.resizingDirs=p;var q={x:r.clientX,y:r.clientY};switch(c.resizingDirs){case"border_left":o.style.cursor="w-resize";this.resizeOffsetX=this.x-q.x;break;case"border_right":o.style.cursor="e-resize";this.resizeOffsetXW=this.x+this.w-q.x;break;case"border_top":o.style.cursor="n-resize";this.resizeOffsetY=this.y-q.y;break;case"border_bottom":o.style.cursor="n-resize";this.resizeOffsetYH=this.y+this.h-q.y;break;case"corner_left":o.style.cursor="sw-resize";this.resizeOffsetX=this.x-r.clientX;this.resizeOffsetYH=this.y+this.h-q.y;break;case"corner_up_left":o.style.cursor="nw-resize";this.resizeOffsetY=this.y-q.y;this.resizeOffsetX=this.x-q.x;break;case"corner_right":o.style.cursor="nw-resize";this.resizeOffsetXW=this.x+this.w-q.x;this.resizeOffsetYH=this.y+this.h-q.y;break;case"corner_up_right":o.style.cursor="sw-resize";this.resizeOffsetY=this.y-q.y;this.resizeOffsetXW=this.x+this.w-q.x;break;}this.canStartResize=true;this.style.cursor=o.style.cursor;r.cancelBubble=true;r.returnValue=false;return false;};k.onmousedown=function(a){if(c._getActive()!=this){c._makeActive(this);}c._bringOnTop(this);if(this.canStartResize){c._blockSwitcher(true);c.resizingWin=this;if(!c._effects.resize){c._carcass.x=c.resizingWin.x;c._carcass.y=c.resizingWin.y;c._carcass.w=Number(c.resizingWin.w)+(_isIE?0:-2);c._carcass.h=Number(c.resizingWin.h)+(_isIE?0:-2);c._carcass.style.left=c._carcass.x+"px";c._carcass.style.top=c._carcass.y+"px";c._carcass.style.width=c._carcass.w+"px";c._carcass.style.height=c._carcass.h+"px";c._carcass.style.zIndex=c._getTopZIndex(true)+1;c._carcass.style.cursor=this.style.cursor;c._carcass._keepInViewport=this._keepInViewport;c._carcass.style.display="";}c._vpcover.style.zIndex=c.resizingWin.style.zIndex-1;c._vpcover.style.display="";if(this.vs[this.av].layout){this.callEvent("_onBeforeTryResize",[this]);}a=a||event;}};this._addDefaultButtons(k.idd);k.button=function(n){n=String(n).toLowerCase();var a=null;if(this.btns[n]!=null){a=this.btns[n];}return a;};k.center=function(){c._centerWindow(this,false);};k.centerOnScreen=function(){c._centerWindow(this,true);};k._attachContent("empty",null);k._redraw=function(){c._engineRedrawWindowSize(this);};k.bringToTop();this._engineRedrawWindowSize(k);return this.wins[m];};this.zIndexStep=50;this._getTopZIndex=function(f){var g=0;for(var e in this.wins){if(f==true){if(this.wins[e].zi>g){g=this.wins[e].zi;}}else{if(this.wins[e].zi>g&&!this.wins[e]._isSticked){g=this.wins[e].zi;}}}return g;};this.movingWin=null;this._moveWindow=function(h){if(this.movingWin!=null){if(!this.movingWin._allowMove||!this.movingWin._allowMoveGlobal){return;}if(this._effects.move==true){if(this._engineGetWindowHeader(this.movingWin).style.cursor!="move"){this._engineGetWindowHeader(this.movingWin).style.cursor="move";}this._wasMoved=true;this.movingWin.x=(this._isIPad?h.touches[0].clientX:h.clientX)+this.movingWin.moveOffsetX;this.movingWin.y=(this._isIPad?h.touches[0].clientY:h.clientY)+this.movingWin.moveOffsetY;this._engineFixWindowPosInViewport(this.movingWin);this._engineRedrawWindowPos(this.movingWin);}else{if(this._carcass.style.display!=""){this._carcass.style.display="";}if(this._carcass.style.cursor!="move"){this._carcass.style.cursor="move";}if(this._engineGetWindowHeader(this.movingWin).style.cursor!="move"){this._engineGetWindowHeader(this.movingWin).style.cursor="move";}this._carcass.x=(this._isIPad?h.touches[0].clientX:h.clientX)+this.movingWin.moveOffsetX;this._carcass.y=(this._isIPad?h.touches[0].clientY:h.clientY)+this.movingWin.moveOffsetY;this._wasMoved=true;this._engineFixWindowPosInViewport(this._carcass);this._carcass.style.left=this._carcass.x+"px";this._carcass.style.top=this._carcass.y+"px";}}if(this.resizingWin!=null){if(!this.resizingWin._allowResize){return;}var g={x:h.clientX,y:h.clientY};if(this.resizingDirs=="border_left"||this.resizingDirs=="corner_left"||this.resizingDirs=="corner_up_left"){if(this._effects.resize){var f=g.x+this.resizingWin.resizeOffsetX;var a=(f>this.resizingWin.x?-1:1);newW=this.resizingWin.w+Math.abs(f-this.resizingWin.x)*a;if((newW<this.resizingWin.minW)&&(a<0)){this.resizingWin.x=this.resizingWin.x+this.resizingWin.w-this.resizingWin.minW;this.resizingWin.w=this.resizingWin.minW;}else{this.resizingWin.w=newW;this.resizingWin.x=f;}this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin);}else{var f=g.x+this.resizingWin.resizeOffsetX;var a=(f>this._carcass.x?-1:1);newW=this._carcass.w+Math.abs(f-this._carcass.x)*a;if(newW>this.resizingWin.maxW){newW=this.resizingWin.maxW;f=this._carcass.x+this._carcass.w-this.resizingWin.maxW;}if((newW<this.resizingWin.minW)&&(a<0)){this._carcass.x=this._carcass.x+this._carcass.w-this.resizingWin.minW;this._carcass.w=this.resizingWin.minW;}else{this._carcass.w=newW;this._carcass.x=f;}this._carcass.style.left=this._carcass.x+"px";this._carcass.style.width=this._carcass.w+"px";}}if(this.resizingDirs=="border_right"||this.resizingDirs=="corner_right"||this.resizingDirs=="corner_up_right"){if(this._effects.resize){var f=g.x-(this.resizingWin.x+this.resizingWin.w)+this.resizingWin.resizeOffsetXW;newW=this.resizingWin.w+f;if(newW<this.resizingWin.minW){newW=this.resizingWin.minW;}this.resizingWin.w=newW;this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin);}else{var f=g.x-(this._carcass.x+this._carcass.w)+this.resizingWin.resizeOffsetXW;newW=this._carcass.w+f;if(newW<this.resizingWin.minW){newW=this.resizingWin.minW;}if(this.resizingWin.maxW!="auto"){if(newW>this.resizingWin.maxW){newW=this.resizingWin.maxW;}}this._carcass.w=newW;this._carcass.style.width=this._carcass.w+"px";}}if(this.resizingDirs=="border_bottom"||this.resizingDirs=="corner_left"||this.resizingDirs=="corner_right"){if(this._effects.resize){var f=g.y-(this.resizingWin.y+this.resizingWin.h)+this.resizingWin.resizeOffsetYH;newH=this.resizingWin.h+f;if(newH<this.resizingWin.minH){newH=this.resizingWin.minH;}this.resizingWin.h=newH;this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin);}else{var f=g.y-(this._carcass.y+this._carcass.h)+this.resizingWin.resizeOffsetYH;newH=this._carcass.h+f;if(newH<this.resizingWin.minH){newH=this.resizingWin.minH;}if(newH>this.resizingWin.maxH){newH=this.resizingWin.maxH;}this._carcass.h=newH;this._carcass.style.height=this._carcass.h+"px";}}if(this.resizingDirs=="border_top"||this.resizingDirs=="corner_up_right"||this.resizingDirs=="corner_up_left"){if(this._effects.resize){}else{var f=g.y+this.resizingWin.resizeOffsetY;var a=(f>this.resizingWin.y?-1:1);newH=this.resizingWin.h+Math.abs(f-this.resizingWin.y)*a;if(newH>this.resizingWin.maxH){newH=this.resizingWin.maxH;f=this.resizingWin.y+this.resizingWin.h-this.resizingWin.maxH;}if((newH<this.resizingWin.minH)&&(a<0)){this._carcass.y=this._carcass.y+this._carcass.h-this.resizingWin.minH;this._carcass.h=this.resizingWin.minH;}else{this._carcass.h=newH+(_isIE?0:-2);this._carcass.y=f;}this._carcass.style.top=this._carcass.y+"px";this._carcass.style.height=this._carcass.h+"px";}}}};this._stopMove=function(){if(this.movingWin!=null){if(this._effects.move){var a=this.movingWin;this.movingWin=null;this._blockSwitcher(false);this._engineGetWindowHeader(a).style.cursor="";if(_isFF){a.h++;c._engineRedrawWindowPos(a);a.h--;c._engineRedrawWindowPos(a);}}else{this._carcass.style.cursor="";this._carcass.style.display="none";var a=this.movingWin;this._engineGetWindowHeader(a).style.cursor="";this.movingWin=null;this._blockSwitcher(false);a.setPosition(parseInt(this._carcass.style.left),parseInt(this._carcass.style.top));}this._vpcover.style.display="none";if(this._wasMoved){if(a.checkEvent("onMoveFinish")){a.callEvent("onMoveFinish",[a]);}else{this.callEvent("onMoveFinish",[a]);}}this._wasMoved=false;}if(this.resizingWin!=null){var a=this.resizingWin;this.resizingWin=null;this._blockSwitcher(false);if(!this._effects.resize){this._carcass.style.display="none";a.setDimension(this._carcass.w+(_isIE?0:2),this._carcass.h+(_isIE?0:2));a.setPosition(this._carcass.x,this._carcass.y);}else{a.updateNestedObjects();}if(a.vs[a.av].layout){a.vs[a.av].layout.callEvent("onResize",[]);}this._vpcover.style.display="none";if(a.checkEvent("onResizeFinish")){a.callEvent("onResizeFinish",[a]);}else{this.callEvent("onResizeFinish",[a]);}}};this._fixWindowDimensionInViewport=function(a){if(a.w<a.minW){a.w=a.minW;}if(a._isParked){return;}if(a.h<a.minH){a.h=a.minH;}};this._bringOnTop=function(h){var f=h.zi;var g=this._getTopZIndex(h._isSticked);for(var e in this.wins){if(this.wins[e]!=h){if(h._isSticked||(!h._isSticked&&!this.wins[e]._isSticked)){if(this.wins[e].zi>f){this.wins[e].zi=this.wins[e].zi-this.zIndexStep;this.wins[e].style.zIndex=this.wins[e].zi;if(this.iframeMode&&this.wins[e].ifr){this.wins[e].ifr.style.zIndex=this.wins[e].style.zIndex-1;}}}}}h.zi=g;h.style.zIndex=h.zi;if(this.iframeMode&&h.ifr){h.ifr.style.zIndex=g-1;}};this._makeActive=function(g,f){for(var e in this.wins){if(this.wins[e]==g){var h=false;if(this.wins[e].className!="dhtmlx_window_active"&&!f){h=true;}this.wins[e].className="dhtmlx_window_active";this._engineUpdateWindowIcon(this.wins[e],this.wins[e].icons[0]);if(h==true){if(g.checkEvent("onFocus")){g.callEvent("onFocus",[g]);}else{this.callEvent("onFocus",[g]);}}}else{this.wins[e].className="dhtmlx_window_inactive";this._engineUpdateWindowIcon(this.wins[e],this.wins[e].icons[1]);}}};this._getActive=function(){var f=null;for(var e in this.wins){if(this.wins[e].className=="dhtmlx_window_active"){f=this.wins[e];}}return f;};this._centerWindow=function(g,a){if(g._isMaximized==true){return;}if(a==true){var e=(_isIE?document.body.offsetWidth:window.innerWidth);var j=(_isIE?document.body.offsetHeight:window.innerHeight);}else{var e=(this.vp==document.body?document.body.offsetWidth:(Number(parseInt(this.vp.style.width))&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.width):this.vp.offsetWidth));var j=(this.vp==document.body?document.body.offsetHeight:(Number(parseInt(this.vp.style.height))&&String(this.vp.style.height).search("%")==-1?parseInt(this.vp.style.height):this.vp.offsetHeight));}var h=Math.round((e/2)-(g.w/2));var f=Math.round((j/2)-(g.h/2));g.x=h;g.y=f;this._engineFixWindowPosInViewport(g);this._engineRedrawWindowPos(g);};this._addDefaultButtons=function(l){var m=this.wins[l];var k=this._engineGetWindowButton(m,"stick");k.title=this.i18n.stick;k.isVisible=false;k.style.display="none";k._isEnabled=true;k.isPressed=false;k.label="stick";k._doOnClick=function(){this.isPressed=true;c._stickWindow(this.winId);};var g=this._engineGetWindowButton(m,"sticked");g.title=this.i18n.unstick;g.isVisible=false;g.style.display="none";g._isEnabled=true;g.isPressed=false;g.label="sticked";g._doOnClick=function(){this.isPressed=false;c._unstickWindow(this.winId);};var e=this._engineGetWindowButton(m,"help");e.title=this.i18n.help;e.isVisible=false;e.style.display="none";e._isEnabled=true;e.isPressed=false;e.label="help";e._doOnClick=function(){c._needHelp(this.winId);};var j=this._engineGetWindowButton(m,"park");j.titleIfParked=this.i18n.parkdown;j.titleIfNotParked=this.i18n.parkup;j.title=j.titleIfNotParked;j.isVisible=true;j._isEnabled=true;j.isPressed=false;j.label="park";j._doOnClick=function(){c._parkWindow(this.winId);};var h=this._engineGetWindowButton(m,"minmax1");h.title=this.i18n.maximize;h.isVisible=true;h._isEnabled=true;h.isPressed=false;h.label="minmax1";h._doOnClick=function(){c._maximizeWindow(this.winId);};var f=this._engineGetWindowButton(m,"minmax2");f.title=this.i18n.restore;f.isVisible=false;f.style.display="none";f._isEnabled=true;f.isPressed=false;f.label="minmax2";f._doOnClick=function(){c._restoreWindow(this.winId);};var o=this._engineGetWindowButton(m,"close");o.title=this.i18n.close;o.isVisible=true;o._isEnabled=true;o.isPressed=false;o.label="close";o._doOnClick=function(){c._closeWindow(this.winId);};var n=this._engineGetWindowButton(m,"dock");n.title=this.i18n.dock;n.style.display="none";n.isVisible=false;n._isEnabled=true;n.isPressed=false;n.label="dock";n._doOnClick=function(){};m._isSticked=false;m._isParked=false;m._isParkedAllowed=true;m._isMaximized=false;m._isDocked=false;m.btns={};m.btns.stick=k;m.btns.sticked=g;m.btns.help=e;m.btns.park=j;m.btns.minmax1=h;m.btns.minmax2=f;m.btns.close=o;m.btns.dock=n;for(var p in m.btns){m.btns[p].winId=m.idd;this._attachEventsOnButton(m.idd,p);}m=k=g=e=j=h=f=o=n=null;};this._attachEventsOnButton=function(e,f){var a=this.wins[e].btns[f];if(!this._isIPad){a.onmouseover=function(){if(this._isEnabled){this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_"+(this.isPressed?"pressed":"default");}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled";}};a.onmouseout=function(){if(this._isEnabled){this.isPressed=false;this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_default";}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled";}};a.onmousedown=function(){if(this._isEnabled){this.isPressed=true;this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_pressed";}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled";}};a.onmouseup=function(){if(this._isEnabled){var g=this.isPressed;this.isPressed=false;this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_default";if(g){if(this.checkEvent("onClick")){this.callEvent("onClick",[c.wins[this.winId],this]);}else{this._doOnClick();}}}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled";}};}else{a.ontouchstart=function(g){g.cancelBubble=true;g.returnValue=false;return false;};a.ontouchend=function(g){g.cancelBubble=true;g.returnValue=false;if(!this._isEnabled){return false;}if(this.checkEvent("onClick")){this.callEvent("onClick",[c.wins[this.winId],this]);}else{this._doOnClick();}return false;};}a.show=function(){c._showButton(c.wins[this.winId],this.label,true);};a.hide=function(){c._hideButton(c.wins[this.winId],this.label,true);};a.enable=function(){c._enableButton(c.wins[this.winId],this.label);};a.disable=function(){c._disableButton(c.wins[this.winId],this.label);};a.isEnabled=function(){return this._isEnabled;};a.isHidden=function(){return(!this.isVisible);};dhtmlxEventable(a);a=null;};this._parkWindow=function(e,g){var f=this.wins[e];if(!f._isParkedAllowed&&!g){return;}if(this.enableParkEffect&&f.parkBusy){return;}if(f._isParked){if(this.enableParkEffect&&!g){f.parkBusy=true;this._doParkDown(f);}else{f.h=f.lastParkH;this._engineRedrawWindowSize(f);this._engineDoOnWindowParkDown(f);f.updateNestedObjects();f.btns.park.title=f.btns.park.titleIfNotParked;if(f._allowResizeGlobal==true){this._enableButton(f,"minmax1");this._enableButton(f,"minmax2");}f._isParked=false;if(!g){if(f.checkEvent("onParkDown")){f.callEvent("onParkDown",[f]);}else{this.callEvent("onParkDown",[f]);}}}}else{if(this.enableParkEffect&&!g){f.lastParkH=(String(f.h).search(/\%$/)==-1?f.h:f.offsetHeight);if(f._allowResizeGlobal==true){this._disableButton(f,"minmax1");this._disableButton(f,"minmax2");}if(this.enableParkEffect){f.parkBusy=true;this._doParkUp(f);}else{var a=(f._skinParams!=null?f._skinParams:this.skinParams[this.skin]);f.h=a.header_height+a.border_bottom_height;f.btns.park.title=f.btns.park.titleIfParked;}}else{f.lastParkH=(String(f.h).search(/\%$/)==-1?f.h:f.offsetHeight);f.h=this._engineGetWindowParkedHeight(f);this._engineRedrawWindowSize(f);this._engineDoOnWindowParkUp(f);f.btns.park.title=f.btns.park.titleIfParked;f._isParked=true;if(!g){if(f.checkEvent("onParkUp")){f.callEvent("onParkUp",[f]);}else{this.callEvent("onParkUp",[f]);}}}}f=null;};this._allowParking=function(a){a._isParkedAllowed=true;this._enableButton(a,"park");};this._denyParking=function(a){a._isParkedAllowed=false;this._disableButton(a,"park");};this.enableParkEffect=false;this.parkStartSpeed=80;this.parkSpeed=this.parkStartSpeed;this.parkTM=null;this.parkTMTime=5;this._doParkUp=function(e){if(String(e.h).search(/\%$/)!=-1){e.h=e.offsetHeight;}e.h-=this.parkSpeed;var a=this._engineGetWindowParkedHeight(e);if(e.h<=a){e.h=a;this._engineGetWindowButton(e,"park").title=this._engineGetWindowButton(e,"park").titleIfParked;e._isParked=true;e.parkBusy=false;this._engineRedrawWindowSize(e);this._engineDoOnWindowParkUp(e);if(e.checkEvent("onParkUp")){e.callEvent("onParkUp",[e]);}else{this.callEvent("onParkUp",[e]);}}else{this._engineRedrawWindowSize(e);this.parkTM=window.setTimeout(function(){c._doParkUp(e);},this.parkTMTime);}};this._doParkDown=function(a){a.h+=this.parkSpeed;if(a.h>=a.lastParkH){a.h=a.lastParkH;this._engineGetWindowButton(a,"park").title=this._engineGetWindowButton(a,"park").titleIfNotParked;if(a._allowResizeGlobal==true){this._enableButton(a,"minmax1");this._enableButton(a,"minmax2");}a._isParked=false;a.parkBusy=false;this._engineRedrawWindowSize(a);a.updateNestedObjects();this._engineDoOnWindowParkDown(a);if(a.checkEvent("onParkDown")){a.callEvent("onParkDown",[a]);}else{this.callEvent("onParkDown",[a]);}}else{this._engineRedrawWindowSize(a);this.parkTM=window.setTimeout(function(){c._doParkDown(a);},this.parkTMTime);}};this._enableButton=function(f,e){var a=this._engineGetWindowButton(f,e);if(!a){return;}a._isEnabled=true;a.className="dhtmlx_wins_btns_button dhtmlx_button_"+a.label+"_default";a=null;};this._disableButton=function(f,e){var a=this._engineGetWindowButton(f,e);if(!a){return;}a._isEnabled=false;a.className="dhtmlx_wins_btns_button dhtmlx_button_"+f.btns[e].label+"_disabled";a=null;};this._allowReszieGlob=function(a){a._allowResizeGlobal=true;this._enableButton(a,"minmax1");this._enableButton(a,"minmax2");};this._denyResize=function(a){a._allowResizeGlobal=false;this._disableButton(a,"minmax1");this._disableButton(a,"minmax2");};this._maximizeWindow=function(a){var f=this.wins[a];if(f._allowResizeGlobal==false){return;}var e=f._isParked;if(e){this._parkWindow(f.idd,true);}f.lastMaximizeX=f.x;f.lastMaximizeY=f.y;f.lastMaximizeW=f.w;f.lastMaximizeH=f.h;if(f.maxW!="auto"&&f.maxW!="auto"){f.x=Math.round(f.x+(f.w-f.maxW)/2);f.y=Math.round(f.y+(f.h-f.maxH)/2);f._allowMove=true;}else{f.x=0;f.y=0;f._allowMove=false;}f._isMaximized=true;f._allowResize=false;f.w=(f.maxW=="auto"?(this.vp==document.body?"100%":(this.vp.style.width!=""&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.width):this.vp.offsetWidth)):f.maxW);f.h=(f.maxH=="auto"?(this.vp==document.body?"100%":(this.vp.style.height!=""&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.height):this.vp.offsetHeight)):f.maxH);this._hideButton(f,"minmax1");this._showButton(f,"minmax2");this._engineRedrawWindowPos(f);if(e){this._parkWindow(f.idd,true);}else{this._engineRedrawWindowSize(f);f.updateNestedObjects();}if(f.checkEvent("onMaximize")){f.callEvent("onMaximize",[f]);}else{this.callEvent("onMaximize",[f]);}f=null;};this._restoreWindow=function(a){var f=this.wins[a];if(f._allowResizeGlobal==false){return;}if(f.layout){f.layout._defineWindowMinDimension(f);}var e=f._isParked;if(e){this._parkWindow(f.idd,true);}if(f.maxW!="auto"&&f.maxW!="auto"){f.x=Math.round(f.x+(f.w-f.lastMaximizeW)/2);f.y=Math.round(f.y+(f.h-f.lastMaximizeH)/2);}else{f.x=f.lastMaximizeX;f.y=f.lastMaximizeY;}f.w=f.lastMaximizeW;f.h=f.lastMaximizeH;f._isMaximized=false;f._allowMove=f._allowMoveGlobal;f._allowResize=true;this._fixWindowDimensionInViewport(f);this._hideButton(f,"minmax2");this._showButton(f,"minmax1");this._engineRedrawWindowPos(f);if(e){this._parkWindow(f.idd,true);}else{this._engineRedrawWindowSize(f);f.updateNestedObjects();}if(f.checkEvent("onMinimize")){f.callEvent("onMinimize",[f]);}else{this.callEvent("onMinimize",[f]);}f=null;};this._showButton=function(g,e,f){var a=this._engineGetWindowButton(g,e);if(!a){return;}if((!f&&a._userHide)||a.isVisible===true){return;}a.isVisible=true;a.style.display="";a.style.visibility="visible";a._userHide=!(f==true);this._engineRedrawWindowTitle(g);a=null;};this._hideButton=function(g,e,f){var a=this._engineGetWindowButton(g,e);if(!a||(!f&&a.isVisible===false)){return;}a.isVisible=false;a.style.display="none";a.style.visibility="hidden";a._userHide=(f==true);this._engineRedrawWindowTitle(g);a=null;};this._showWindow=function(e){e.style.display="";if(e.checkEvent("onShow")){e.callEvent("onShow",[e]);}else{this.callEvent("onShow",[e]);}var a=this._getActive();if(a==null){this._bringOnTop(e);this._makeActive(e);}else{if(this._isWindowHidden(a)){this._bringOnTop(e);this._makeActive(e);}}if(this.iframeMode&&e.ifr){e.ifr.style.display="";}};this._hideWindow=function(e){e.style.display="none";if(e.checkEvent("onHide")){e.callEvent("onHide",[e]);}else{this.callEvent("onHide",[e]);}var a=this.getTopmostWindow(true);if(a!=null){this._bringOnTop(a);this._makeActive(a);}if(this.iframeMode&&e.ifr){e.ifr.style.display="none";}};this._isWindowHidden=function(e){var a=(e.style.display=="none");return a;};this._closeWindow=function(g){var h=this.wins[g];if(this._focusFixIE){this._focusFixIE.style.top=(this.vp==document.body?0:getAbsoluteTop(this.vp))+Number(h.y)+"px";this._focusFixIE.focus();}if(h.checkEvent("onClose")){if(!h.callEvent("onClose",[h])){return;}}else{if(!this.callEvent("onClose",[h])){return;}}h=null;this._removeWindowGlobal(g);var f={zi:0};for(var e in this.wins){if(this.wins[e].zi>f.zi){f=this.wins[e];}}if(f!=null){this._makeActive(f);}};this._needHelp=function(a){var e=this.wins[a];if(e.checkEvent("onHelp")){e.callEvent("onHelp",[e]);}else{this.callEvent("onHelp",[e]);}e=null;};this._setWindowIcon=function(f,e,a){f.iconsPresent=true;f.icons[0]=this.imagePath+e;f.icons[1]=this.imagePath+a;this._engineUpdateWindowIcon(f,f.icons[f.isOnTop()?0:1]);};this._getWindowIcon=function(a){if(a.iconsPresent){return new Array(a.icons[0],a.icons[1]);}else{return new Array(null,null);}};this._clearWindowIcons=function(a){a.iconsPresent=false;a.icons[0]=this.imagePath+"icon_blank.gif";a.icons[1]=this.imagePath+"icon_blank.gif";this._engineUpdateWindowIcon(a,a.icons[a.isOnTop()?0:1]);};this._restoreWindowIcons=function(a){a.iconsPresent=true;a.icons[0]=this.imagePath+"icon_normal.gif";a.icons[1]=this.imagePath+"icon_normal.gif";this._engineUpdateWindowIcon(a,a.icons[a.className=="dhtmlx_window_active"?0:1]);};this._attachWindowContentTo=function(j,g,a,e){var f=this._engineGetWindowContent(j).parentNode;f.parentNode.removeChild(f);j.hide();f.style.left="0px";f.style.top="0px";f.style.width=(a!=null?a:g.offsetWidth)+"px";f.style.height=(e!=null?e:g.offsetHeight)+"px";f.style.position="relative";g.appendChild(f);this._engineGetWindowContent(j).style.width=f.style.width;this._engineGetWindowContent(j).style.height=f.style.height;};this._setWindowToFullScreen=function(e,a){if(a==true&&!e._isFullScreened){e._p1=e.vs[e.av].dhxcont.nextSibling;e._p1.parentNode.removeChild(e.vs[e.av].dhxcont);e.hide();e._isFullScreened=true;e._FSoffsetHeight=e._offsetHeight;e._FSoffsetHeightSaved=e._offsetHeightSaved;e._FSoffsetLeft=e._offsetLeft;e._FSoffsetWidth=e._offsetWidth;e._offsetHeight=0;e._offsetHeightSaved=0;e._offsetLeft=0;e._offsetWidth=0;e.vs[e.av].dhxcont.style.position="absolute";document.body.appendChild(e.vs[e.av].dhxcont);e.adjustContent(document.body,0,0,false,0);e.updateNestedObjects();}if(a==false&&e._isFullScreened){e._p1.parentNode.insertBefore(e.vs[e.av].dhxcont,e._p1);e._p1=null;e._isFullScreened=false;e._offsetHeight=e._FSoffsetHeight;e._offsetHeightSaved=e._FSoffsetHeightSaved;e._offsetLeft=e._FSoffsetLeft;e._offsetWidth=e._FSoffsetWidth;e._FSoffsetHeight=e._FSoffsetHeightSaved=e._FSoffsetLeft=e._FSoffsetWidth=null;e.show();e.setDimension(e.w,e.h);e.bringToTop();}};this._isWindowOnTop=function(e){var a=(this.getTopmostWindow()==e);return a;};this._bringOnBottom=function(f){for(var e in this.wins){if(this.wins[e].zi<f.zi){this.wins[e].zi+=this.zIndexStep;this.wins[e].style.zIndex=this.wins[e].zi;}}f.zi=50;f.style.zIndex=f.zi;this._makeActive(this.getTopmostWindow());};this._isWindowOnBottom=function(g){var f=true;for(var e in this.wins){if(this.wins[e]!=g){f=f&&(this.wins[e].zi>g.zi);}}return f;};this._stickWindow=function(a){var e=this.wins[a];e._isSticked=true;this._hideButton(e,"stick");this._showButton(e,"sticked");this._bringOnTop(e);e=null;};this._unstickWindow=function(a){var e=this.wins[a];e._isSticked=false;this._hideButton(e,"sticked");this._showButton(e,"stick");this._bringOnTopAnyStickedWindows();e=null;};this._addUserButton=function(e,h,g,f){h=String(h).toLowerCase();var a=this._engineAddUserButton(e,h,g);a.title=f;a.isVisible=true;a._isEnabled=true;a.isPressed=false;a.label=h;e.btns[h]=a;e.btns[h].winId=e.idd;e.btns[h]._doOnClick=function(){};this._attachEventsOnButton(e.idd,h);a=null;};this._removeUserButton=function(e,a){this._removeButtonGlobal(e,a);};this._blockSwitcher=function(f){for(var e in this.wins){if(f==true){this.wins[e].showCoverBlocker();}else{this.wins[e].hideCoverBlocker();}}};this.resizingWin=null;this.modalWin=null;this.resizingDirs="none";if(_isIE){this._focusFixIE=document.createElement("INPUT");this._focusFixIE.className="dhx_windows_ieonclosefocusfix";this._focusFixIE.style.position="absolute";this._focusFixIE.style.width="1px";this._focusFixIE.style.height="1px";this._focusFixIE.style.border="none";this._focusFixIE.style.background="none";this._focusFixIE.style.left="-10px";this._focusFixIE.style.fontSize="1px";document.body.appendChild(this._focusFixIE);}this._createViewport();this._doOnMouseUp=function(){if(c!=null){c._stopMove();}};this._doOnMoseMove=function(a){a=a||event;if(c!=null){c._moveWindow(a);}};this._resizeTM=null;this._resizeTMTime=200;this._lw=null;this._doOnResize=function(){if(c._lw!=document.documentElement.clientHeight){window.clearTimeout(c._resizeTM);c._resizeTM=window.setTimeout(function(){c._autoResizeViewport();},c._resizeTMTime);}c._lw=document.documentElement.clientHeight;};this._doOnUnload=function(){c.unload();};this._doOnSelectStart=function(a){a=a||event;if(c.movingWin!=null||c.resizingWin!=null){a.returnValue=false;}};if(_isIE){document.body.attachEvent("onselectstart",this._doOnSelectStart);}dhtmlxEvent(window,"resize",this._doOnResize);dhtmlxEvent(document.body,"unload",this._doOnUnload);if(this._isIPad){document.addEventListener("touchmove",this._doOnMoseMove,false);document.addEventListener("touchend",this._doOnMouseUp,false);}else{dhtmlxEvent(document.body,"mouseup",this._doOnMouseUp);dhtmlxEvent(this.vp,"mousemove",this._doOnMoseMove);dhtmlxEvent(this.vp,"mouseup",this._doOnMouseUp);}this._setWindowModal=function(e,a){if(a==true){this._makeActive(e);this._bringOnTop(e);this.modalWin=e;e._isModal=true;this.modalCoverI.style.zIndex=e.zi-2;this.modalCoverI.style.display="";this.modalCoverD.style.zIndex=e.zi-2;this.modalCoverD.style.display="";}else{this.modalWin=null;e._isModal=false;this.modalCoverI.style.zIndex=0;this.modalCoverI.style.display="none";this.modalCoverD.style.zIndex=0;this.modalCoverD.style.display="none";}};this._bringOnTopAnyStickedWindows=function(){var g=new Array();for(var e in this.wins){if(this.wins[e]._isSticked){g[g.length]=this.wins[e];}}for(var f=0;f<g.length;f++){this._bringOnTop(g[f]);}if(g.length==0){for(var e in this.wins){if(this.wins[e].className=="dhtmlx_window_active"){this._bringOnTop(this.wins[e]);}}}};this.unload=function(){this._clearAll();};this._removeButtonGlobal=function(e,f){if(!this.wins[e]){return;}if(!this.wins[e].btns[f]){return;}var a=this.wins[e].btns[f];a.title=null;a.isVisible=null;a._isEnabled=null;a.isPressed=null;a.label=null;a._doOnClick=null;a.detachAllEvents();a.attachEvent=null;a.callEvent=null;a.checkEvent=null;a.detachEvent=null;a.detachAllEvents=null;a.disable=null;a.enable=null;a.eventCatcher=null;a.hide=null;a.isEnabled=null;a.isHidden=null;a.show=null;a.onmousedown=null;a.onmouseout=null;a.onmouseover=null;a.onmouseup=null;a.ontouchstart=null;a.ontouchend=null;if(a.parentNode){a.parentNode.removeChild(a);}a=null;this.wins[e].btns[f]=null;delete this.wins[e].btns[f];};this._removeWindowGlobal=function(g){var h=this.wins[g];if(this.modalWin==h){this._setWindowModal(h,false);}if(this.iframeMode&&h.ifr){h.ifr.parentNode.removeChild(h.ifr);h.ifr=null;}var f=h.coverBlocker();f.onselectstart=null;f=null;this._engineDiableOnSelectInWindow(h,false);h._dhxContDestruct();this._engineGetWindowHeader(h).onmousedown=null;this._engineGetWindowHeader(h).ondblclick=null;this.movingWin=null;this.resizingWin=null;for(var e in h.btns){this._removeButtonGlobal(h,e);}h.btns=null;h.detachAllEvents();h._adjustToContent=null;h._doOnAttachMenu=null;h._doOnAttachStatusBar=null;h._doOnAttachToolbar=null;h._doOnFrameMouseDown=null;h._doOnFrameContentLoaded=null;h._redraw=null;h.addUserButton=null;h.allowMove=null;h.allowPark=null;h.allowResize=null;h.attachEvent=null;h.bringToBottom=null;h.bringToTop=null;h.callEvent=null;h.center=null;h.centerOnScreen=null;h.checkEvent=null;h.clearIcon=null;h.close=null;h.denyMove=null;h.denyPark=null;h.denyResize=null;h.detachEvent=null;h.detachAllEvents=null;h.eventCatcher=null;h.getDimension=null;h.getIcon=null;h.getId=null;h.getMaxDimension=null;h.getMinDimension=null;h.getPosition=null;h.getText=null;h.hide=null;h.hideHeader=null;h.isHidden=null;h.isMaximized=null;h.isModal=null;h.isMovable=null;h.isOnBottom=null;h.isOnTop=null;h.isParkable=null;h.isParked=null;h.isResizable=null;h.isSticked=null;h.keepInViewport=null;h.maximize=null;h.minimize=null;h.park=null;h.progressOff=null;h.progressOn=null;h.removeUserButton=null;h.restoreIcon=null;h.setDimension=null;h.setIcon=null;h.setMaxDimension=null;h.setMinDimension=null;h.setModal=null;h.setPosition=null;h.setText=null;h.setToFullScreen=null;h.show=null;h.showHeader=null;h.stick=null;h.unstick=null;h.onmousemove=null;h.onmousedown=null;h.icons=null;h.button=null;h._dhxContDestruct=null;h.dhxContGlobal.obj=null;h.dhxContGlobal.setContent=null;h.dhxContGlobal.dhxcont=null;h.dhxContGlobal=null;if(h._frame){while(h._frame.childNodes.length>0){h._frame.removeChild(h._frame.childNodes[0]);}h._frame=null;}this._parseNestedForEvents(h);h._content=null;h.innerHTML="";h.parentNode.removeChild(h);h=null;this.wins[g]=null;delete this.wins[g];};this._removeEvents=function(a){a.onmouseover=null;a.onmouseout=null;a.onmousemove=null;a.onclick=null;a.ondblclick=null;a.onmouseenter=null;a.onmouseleave=null;a.onmouseup=null;a.onmousewheel=null;a.onmousedown=null;a.onselectstart=null;a.onfocus=null;a.style.display="";a=null;};this._parseNestedForEvents=function(e){this._removeEvents(e);for(var a=0;a<e.childNodes.length;a++){if(e.childNodes[a].tagName!=null){this._parseNestedForEvents(e.childNodes[a]);}}e=null;};this._clearAll=function(){this._clearDocumentEvents();for(var e in this.wins){this._removeWindowGlobal(e);}this.wins=null;this._parseNestedForEvents(this._carcass);while(this._carcass.childNodes.length>0){this._carcass.removeChild(this._carcass.childNodes[0]);}this._carcass.onselectstart=null;this._carcass.parentNode.removeChild(this._carcass);this._carcass=null;this._parseNestedForEvents(this._vpcover);this._vpcover.parentNode.removeChild(this._vpcover);this._vpcover=null;this._parseNestedForEvents(this.modalCoverD);this.modalCoverD.parentNode.removeChild(this.modalCoverD);this.modalCoverD=null;this._parseNestedForEvents(this.modalCoverI);this.modalCoverI.parentNode.removeChild(this.modalCoverI);this.modalCoverI=null;if(this.vp.autocreated==true){this.vp.parentNode.removeChild(this.vp);}this.vp=null;for(var e in this.skinParams){delete this.skinParams[e];}this.skinParams=null;this._effects=null;this._engineSkinParams=null;this._addDefaultButtons=null;this._addUserButton=null;this._allowParking=null;this._allowReszieGlob=null;this._attachEventsOnButton=null;this._attachWindowContentTo=null;this._autoResizeViewport=null;this._blockSwitcher=null;this._bringOnBottom=null;this._bringOnTop=null;this._bringOnTopAnyStickedWindows=null;this._centerWindow=null;this._clearAll=null;this._clearDocumentEvents=null;this._clearWindowIcons=null;this._closeWindow=null;this._createViewport=null;this._denyParking=null;this._denyResize=null;this._dhx_Engine=null;this._disableButton=null;this._doOnMoseMove=null;this._doOnMouseUp=null;this._doOnResize=null;this._doOnSelectStart=null;this._doOnUnload=null;this._doParkDown=null;this._doParkUp=null;this._enableButton=null;this._engineAddUserButton=null;this._engineAdjustWindowToContent=null;this._engineAllowWindowResize=null;this._engineCheckHeaderMouseDown=null;this._engineDiableOnSelectInWindow=null;this._engineDoOnWindowParkDown=null;this._engineDoOnWindowParkUp=null;this._engineFixWindowPosInViewport=null;this._engineGetWindowButton=null;this._engineGetWindowContent=null;this._engineGetWindowHeader=null;this._engineGetWindowHeaderState=null;this._engineGetWindowLabel=null;this._engineGetWindowParkedHeight=null;this._engineRedrawSkin=null;this._engineRedrawWindowPos=null;this._engineRedrawWindowSize=null;this._engineRedrawWindowTitle=null;this._engineSetWindowBody=null;this._engineSwitchWindowHeader=null;this._engineSwitchWindowProgress=null;this._engineUpdateWindowIcon=null;this._fixWindowDimensionInViewport=null;this._genStr=null;this._getActive=null;this._getTopZIndex=null;this._getWindowIcon=null;this._hideButton=null;this._hideWindow=null;this._isWindowHidden=null;this._isWindowOnBottom=null;this._isWindowOnTop=null;this._makeActive=null;this._maximizeWindow=null;this._moveWindow=null;this._needHelp=null;this._parkWindow=null;this._parseNestedForEvents=null;this._removeButtonGlobal=null;this._removeEvents=null;this._removeUserButton=null;this._removeWindowGlobal=null;this._restoreWindow=null;this._restoreWindowIcons=null;this._setWindowIcon=null;this._setWindowModal=null;this._setWindowToFullScreen=null;this._showButton=null;this._showWindow=null;this._stickWindow=null;this._stopMove=null;this._unstickWindow=null;this.attachEvent=null;this.attachViewportTo=null;this.callEvent=null;this.checkEvent=null;this.createWindow=null;this.detachEvent=null;this.enableAutoViewport=null;this.eventCatcher=null;this.findByText=null;this.forEachWindow=null;this.getBottommostWindow=null;this.getEffect=null;this.getTopmostWindow=null;this.isWindow=null;this.setEffect=null;this.setImagePath=null;this.setSkin=null;this.setViewport=null;this.unload=null;this.window=null;c=null;};this._clearDocumentEvents=function(){if(_isIE){window.detachEvent("onresize",this._doOnResize);document.body.detachEvent("onselectstart",this._doOnSelectStart);document.body.detachEvent("onmouseup",this._doOnMouseUp);document.body.detachEvent("onunload",this._doOnUnload);this.vp.detachEvent("onmousemove",this._doOnMoseMove);this.vp.detachEvent("onmouseup",this._doOnMouseUp);}else{window.removeEventListener("resize",this._doOnResize,false);document.body.removeEventListener("mouseup",this._doOnMouseUp,false);document.body.removeEventListener("unload",this._doOnUnload,false);this.vp.removeEventListener("mousemove",this._doOnMoseMove,false);this.vp.removeEventListener("mouseup",this._doOnMouseUp,false);}};this._genStr=function(a){var e="";var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var f=0;f<a;f++){e+=g.charAt(Math.round(Math.random()*(g.length-1)));}return e;};dhtmlxEventable(this);return this;}dhtmlXWindows.prototype._dhx_Engine=function(){this._engineEnabled=true;this._engineName="dhx";this._engineSkinParams={dhx_blue:{hh:21,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:null,noh_h:null},dhx_black:{hh:21,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:null,noh_h:null},dhx_skyblue:{hh:29,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:5,noh_h:-10},dhx_web:{hh:27,lbw:5,rbw:5,lch:5,lcw:14,rch:14,rcw:14,bbh:5,mnh:23,tbh:25,sbh:20,noh_t:5,noh_h:-10},dhx_terrace:{hh:37,lbw:5,rbw:5,lch:5,lcw:14,rch:14,rcw:14,bbh:5,mnh:23,tbh:25,sbh:20,noh_t:5,noh_h:-10}};this._isIE6=false;if(_isIE){this._isIE6=(window.XMLHttpRequest==null?true:false);}this._engineSetWindowBody=function(b){b.innerHTML="<div iswin='1' class='dhtmlx_wins_body_outer' style='position: relative;'>"+(this._isIE6?"<iframe src='javascript:false;' frameborder='0' class='dhtmlx_wins_ie6_cover_fix' onload='this.contentWindow.document.body.style.overflow=\"hidden\";'></iframe>":"")+"<div class='dhtmlx_wins_icon'></div><div class='dhtmlx_wins_progress'></div><div class='dhtmlx_wins_title'>dhtmlxWindow</div><div class='dhtmlx_wins_btns'><div class='dhtmlx_wins_btns_button dhtmlx_button_sticked_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_stick_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_help_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_park_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_minmax2_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_minmax1_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_close_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_dock_default'></div></div><div class='dhtmlx_wins_body_inner'></div><div winResT='yes' class='dhtmlx_wins_resizer_t' style='display:none;'></div><div winResL='yes' class='dhtmlx_wins_resizer_l'></div><div winResR='yes' class='dhtmlx_wins_resizer_r'></div><div winResB='yes' class='dhtmlx_wins_resizer_b'></div><div class='white_line'></div><div class='white_line2'></div></div>";b.dhxContGlobal=new dhtmlXContainer(b);if(this.skin=="dhx_skyblue"){b.dhxContGlobal.obj._offsetWidth=-10;b.dhxContGlobal.obj._offsetHeight=-5;b.dhxContGlobal.obj._offsetLeft=5;b.dhxContGlobal.obj._offsetHeightSaved=b.dhxContGlobal.obj._offsetHeight;}if(this.skin=="dhx_web"){b.dhxContGlobal.obj._offsetWidth=-10;b.dhxContGlobal.obj._offsetHeight=-5;b.dhxContGlobal.obj._offsetLeft=5;b.dhxContGlobal.obj._offsetHeightSaved=b.dhxContGlobal.obj._offsetHeight;}b.skin=this.skin;b.dhxContGlobal.setContent(b.childNodes[0].childNodes[(this._isIE6?5:4)]);var a=b.coverBlocker();a.onselectstart=function(c){c=c||event;c.returnValue=false;c.cancelBubble=true;};a=null;if(this.iframeMode){b.ifr=document.createElement("IFRAME");b.ifr.style.position="absolute";b.ifr.style.left=b.style.left;b.ifr.style.top=b.style.top;b.ifr.style.width=b.style.width;b.ifr.style.height=b.style.height;b.ifr.style.zIndex=b.style.zIndex-1;b.ifr.style.backgroundColor="white";b.ifr.frameBorder=0;b.ifr.setAttribute("src","javascript:false;");b.parentNode.appendChild(b.ifr);}};this._engineDiableOnSelectInWindow=function(d,c){var b=new Array();b[0]=d.childNodes[0].childNodes[(this._isIE6?1:0)];b[1]=d.childNodes[0].childNodes[(this._isIE6?2:1)];b[2]=d.childNodes[0].childNodes[(this._isIE6?3:2)];b[3]=d.childNodes[0].childNodes[(this._isIE6?4:3)];b[4]=d.childNodes[0].childNodes[(this._isIE6?6:5)];b[5]=d.childNodes[0].childNodes[(this._isIE6?7:6)];b[6]=d.childNodes[0].childNodes[(this._isIE6?8:7)];b[7]=d.childNodes[0].childNodes[(this._isIE6?9:8)];for(var a=0;a<b.length;a++){b[a].onselectstart=(c?function(f){f=f||event;f.returnValue=false;return false;}:null);b[a]=null;}b=null;};this._engineGetWindowHeader=function(a){a.childNodes[0].idd=a.idd;return a.childNodes[0];};this._engineRedrawWindowSize=function(d){d.style.width=(String(d.w).search("%")==-1?d.w+"px":d.w);d.style.height=(String(d.h).search("%")==-1?d.h+"px":d.h);var a=d.childNodes[0];a.style.width=d.clientWidth+"px";a.style.height=d.clientHeight+"px";if(a.offsetWidth>d.clientWidth){a.style.width=d.clientWidth*2-a.offsetWidth+"px";}if(a.offsetHeight>d.clientHeight){var c=d.clientHeight*2-a.offsetHeight;if(c<0){c=0;}a.style.height=c+"px";}var b=(d._noHeader==true?d._hdrSize:this._engineSkinParams[this.skin]["hh"]);if(this.iframeMode&&d.ifr){d.ifr.style.width=d.style.width;d.ifr.style.height=d.style.height;}this._engineRedrawWindowTitle(d);d.adjustContent(a,b);};this._engineRedrawWindowPos=function(a){if(a._isFullScreened){return;}a.style.left=a.x+"px";a.style.top=a.y+"px";if(this.iframeMode&&a.ifr){a.ifr.style.top=a.style.top;a.ifr.style.left=a.style.left;}};this._engineFixWindowPosInViewport=function(b){var a=(b._noHeader==true?b._hdrSize:this._engineSkinParams[this.skin]["hh"]);if(b._keepInViewport){if(b.x<0){b.x=0;}if(b.x+b.w>this.vp.offsetWidth){b.x=this.vp.offsetWidth-b.w;}if(b.y+b.h>this.vp.offsetHeight){b.y=this.vp.offsetHeight-b.h;}if(b.y<0){b.y=0;}}else{if(b.y+a>this.vp.offsetHeight){b.y=this.vp.offsetHeight-a;}if(b.y<0){b.y=0;}if(b.x+b.w-10<0){b.x=10-b.w;}if(b.x>this.vp.offsetWidth-10){b.x=this.vp.offsetWidth-10;}}};this._engineCheckHeaderMouseDown=function(e,c){if(this._isIPad){var a=c.touches[0].clientX;var f=c.touches[0].clientY;var d=c.target||c.srcElement;if(d==e.childNodes[0]||d==e.childNodes[0].childNodes[0]||d==e.childNodes[0].childNodes[2]||d==e.childNodes[0].childNodes[3]){return true;}return false;}else{var a=(_isIE||_isOpera?c.offsetX:c.layerX);var f=(_isIE||_isOpera?c.offsetY:c.layerY);var d=c.target||c.srcElement;}var b=(e._noHeader==true?e._hdrSize:this._engineSkinParams[this.skin]["hh"]);if(f<=b&&(d==e.childNodes[0]||d==e.childNodes[0].childNodes[(this._isIE6?1:0)]||d==e.childNodes[0].childNodes[(this._isIE6?3:2)]||d==e.childNodes[0].childNodes[(this._isIE6?4:3)])){return true;}return false;};this._engineGetWindowContent=function(a){alert("_engineGetWindowContent");};this._engineGetWindowButton=function(d,a){a=String(a).toLowerCase();var b=null;var f="dhtmlx_button_"+a+"_";for(var c=0;c<d.childNodes[0].childNodes[(this._isIE6?4:3)].childNodes.length;c++){var e=d.childNodes[0].childNodes[(this._isIE6?4:3)].childNodes[c];if(String(e.className).search(f)!=-1){b=e;}e=null;}return b;};this._engineAddUserButton=function(e,a,d){if(isNaN(d)){d=0;}var c=document.createElement("DIV");c.className="dhtmlx_wins_btns_button dhtmlx_button_"+a+"_default";var b=e.childNodes[0].childNodes[(this._isIE6?4:3)];d=b.childNodes.length-d;if(d<0){d=0;}if(d>=b.childNodes.length){b.appendChild(c);}else{b.insertBefore(c,b.childNodes[d]);}this._engineRedrawWindowTitle(e);return c;};this._engineGetWindowParkedHeight=function(a){return this._engineSkinParams[this.skin]["hh"]+1;};this._engineDoOnWindowParkDown=function(a){a.childNodes[0].childNodes[(this._isIE6?6:5)].style.display=(a._noHeader==true?"":"none");a.childNodes[0].childNodes[(this._isIE6?7:6)].style.display="";a.childNodes[0].childNodes[(this._isIE6?8:7)].style.display="";a.childNodes[0].childNodes[(this._isIE6?9:8)].style.display="";};this._engineDoOnWindowParkUp=function(a){a.childNodes[0].childNodes[(this._isIE6?6:5)].style.display="none";a.childNodes[0].childNodes[(this._isIE6?7:6)].style.display="none";a.childNodes[0].childNodes[(this._isIE6?8:7)].style.display="none";a.childNodes[0].childNodes[(this._isIE6?9:8)].style.display="none";};this._engineUpdateWindowIcon=function(b,a){b.childNodes[0].childNodes[(this._isIE6?1:0)].style.backgroundImage="url('"+a+"')";};this._engineAllowWindowResize=function(f,e,d,b){if(!e.getAttribute){return;}var a=this._engineSkinParams[this.skin];var c=(f._noHeader==true?f._hdrSize:this._engineSkinParams[this.skin]["hh"]);if(e.getAttribute("winResL")!=null){if(e.getAttribute("winResL")=="yes"){if(b>=c){if(b>=f.h-a.lch){return"corner_left";}if(b<=a.lch&&f._noHeader==true){return"corner_up_left";}return"border_left";}}}if(e.getAttribute("winResR")!=null){if(e.getAttribute("winResR")=="yes"){if(b>=c){if(b>=f.h-a.rch){return"corner_right";}if(b<=a.rch&&f._noHeader==true){return"corner_up_right";}return"border_right";}}}if(e.getAttribute("winResT")!=null){if(e.getAttribute("winResT")=="yes"&&f._noHeader==true){if(d<=a.lcw){return"corner_up_left";}if(d>=f.w-a.rcw){return"corner_up_right";}return"border_top";}}if(e.getAttribute("winResB")!=null){if(e.getAttribute("winResB")=="yes"){if(d<=a.lcw){return"corner_left";}if(d>=f.w-a.rcw){return"corner_right";}return"border_bottom";}}return null;};this._engineAdjustWindowToContent=function(d,a,c){var e=a+d.w-d.vs[d.av].dhxcont.clientWidth;var b=c+d.h-d.vs[d.av].dhxcont.clientHeight;d.setDimension(e,b);};this._engineRedrawSkin=function(){this.vp.className=(this.vp==document.body&&this.vp._css?this.vp._css+" ":"")+"dhtmlx_winviewport dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");var c=this._engineSkinParams[this.skin];for(var b in this.wins){if(this.skin=="dhx_skyblue"){this.wins[b].dhxContGlobal.obj._offsetTop=(this.wins[b]._noHeader?c.noh_t:null);this.wins[b].dhxContGlobal.obj._offsetWidth=-10;this.wins[b].dhxContGlobal.obj._offsetHeight=(this.wins[b]._noHeader?c.noh_h:-5);this.wins[b].dhxContGlobal.obj._offsetLeft=5;this.wins[b].dhxContGlobal.obj._offsetHeightSaved=-5;}else{this.wins[b].dhxContGlobal.obj._offsetWidth=null;this.wins[b].dhxContGlobal.obj._offsetHeight=null;this.wins[b].dhxContGlobal.obj._offsetLeft=null;this.wins[b].dhxContGlobal.obj._offsetTop=null;this.wins[b].dhxContGlobal.obj._offsetHeightSaved=null;}this.wins[b].skin=this.skin;this._restoreWindowIcons(this.wins[b]);this._engineRedrawWindowSize(this.wins[b]);}};this._engineSwitchWindowProgress=function(b,a){if(a==true){b.childNodes[0].childNodes[(this._isIE6?1:0)].style.display="none";b.childNodes[0].childNodes[(this._isIE6?2:1)].style.display="";}else{b.childNodes[0].childNodes[(this._isIE6?2:1)].style.display="none";b.childNodes[0].childNodes[(this._isIE6?1:0)].style.display="";}};this._engineSwitchWindowHeader=function(c,b){if(!c._noHeader){c._noHeader=false;}if(b!=c._noHeader){return;}c._noHeader=(b==true?false:true);c._hdrSize=0;c.childNodes[0].childNodes[(this._isIE6?5:4)].className="dhtmlx_wins_body_inner"+(c._noHeader?" dhtmlx_wins_no_header":"");c.childNodes[0].childNodes[(this._isIE6?6:5)].style.display=(c._noHeader?"":"none");c.childNodes[0].childNodes[(this._isIE6?1:0)].style.display=(c._noHeader?"none":"");c.childNodes[0].childNodes[(this._isIE6?3:2)].style.display=(c._noHeader?"none":"");c.childNodes[0].childNodes[(this._isIE6?4:3)].style.display=(c._noHeader?"none":"");var a=this._engineSkinParams[this.skin];if(c._noHeader){c.dhxContGlobal.obj._offsetHeightSaved=c.dhxContGlobal.obj._offsetHeight;c.dhxContGlobal.obj._offsetHeight=a.noh_h;c.dhxContGlobal.obj._offsetTop=a.noh_t;}else{c.dhxContGlobal.obj._offsetHeight=c.dhxContGlobal.obj._offsetHeightSaved;c.dhxContGlobal.obj._offsetTop=null;}this._engineRedrawWindowSize(c);};this._engineGetWindowHeaderState=function(a){return(a._noHeader?true:false);};this._engineGetWindowLabel=function(a){return a.childNodes[0].childNodes[(this._isIE6?3:2)];};this._engineRedrawWindowTitle=function(c){if(c._noHeader!==true){var b=c.childNodes[0].childNodes[(this._isIE6?1:0)].offsetWidth;var a=c.childNodes[0].childNodes[(this._isIE6?4:3)].offsetWidth;var d=c.offsetWidth-b-a-24;if(d<0){d="100%";}else{d+="px";}c.childNodes[0].childNodes[(this._isIE6?3:2)].style.width=d;}};};dhtmlXWindows.prototype.i18n={dhxcontaler:"dhtmlxcontainer.js is missed on the page",noenginealert:"No dhtmlxWindows engine was found.",stick:"Stick",unstick:"Unstick",help:"Help",parkdown:"Park Down",parkup:"Park Up",maximize:"Maximize",restore:"Restore",close:"Close",dock:"Dock"};(function(){dhtmlx.extend_api("dhtmlXWindows",{_init:function(b){return[];},_patch:function(b){b.old_createWindow=b.createWindow;b.createWindow=function(e){if(arguments.length>1){return this.old_createWindow.apply(this,arguments);}var d=this.old_createWindow(e.id,(e.x||e.left),(e.y||e.top),e.width,e.height);d.allowMoveA=function(f){if(f){this.allowMove();}else{this.denyMove();}};d.allowParkA=function(f){if(f){this.allowPark();}else{this.denyPark();}};d.allowResizeA=function(f){if(f){this.allowResize();}else{this.denyResize();}};for(var c in e){if(a[c]){d[a[c]](e[c]);}else{if(c.indexOf("on")==0){d.attachEvent(c,e[c]);}}}return d;};},animation:"setEffect",image_path:"setImagePath",skin:"setSkin",viewport:"_viewport",wins:"_wins"},{_viewport:function(b){if(b.object){this.enableAutoViewport(false);this.attachViewportTo(b.object);}else{this.enableAutoViewport(false);this.setViewport(b.left,b.top,b.width,b.height,b.parent);}},_wins:function(b){for(var c=0;c<b.length;c++){var d=b[c];this.createWindow(d.id,d.left,d.top,d.width,d.height);if(d.text){this.window(d.id).setText(d.text);}if(d.keep_in_viewport){this.window(d.id).keepInViewport(true);}if(d.deny_resize){this.window(d.id).denyResize();}if(d.deny_park){this.window(d.id).denyPark();}if(d.deny_move){this.window(d.id).denyMove();}}}});var a={move:"allowMoveA",park:"allowParkA",resize:"allowResizeA",center:"center",modal:"setModal",caption:"setText",header:"showHeader"};})();function dhtmlXToolbarObject(b,c){var a=this;this.cont=(typeof(b)!="object")?document.getElementById(b):b;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0]);}this.cont.dir="ltr";this.cont.innerHTML+="<div class='dhxtoolbar_hdrline_ll'></div><div class='dhxtoolbar_hdrline_rr'></div><div class='dhxtoolbar_hdrline_l'></div><div class='dhxtoolbar_hdrline_r'></div>";this.base=document.createElement("DIV");this.base.className="float_left";this.cont.appendChild(this.base);this.align="left";this.setAlign=function(d){this.align=(d=="right"?"right":"left");this.base.className=(d=="right"?"float_right":"float_left");if(this._spacer){this._spacer.className="dhxtoolbar_spacer "+(d=="right"?" float_left":" float_right");}};this._isIE6=false;if(_isIE){this._isIE6=(window.XMLHttpRequest==null?true:false);}this._isIPad=(navigator.userAgent.search(/iPad/gi)>=0);if(this._isIPad){this.cont.ontouchstart=function(d){d=d||event;if((String(d.target.tagName||"").toLowerCase()=="input")){return true;}d.returnValue=false;d.cancelBubble=true;return false;};}this.iconSize=18;this.setIconSize=function(d){this.iconSize=({18:true,24:true,32:true,48:true}[d]?d:18);this.setSkin(this.skin,true);this.callEvent("_onIconSizeChange",[this.iconSize]);};this.selectPolygonOffsetTop=0;this.selectPolygonOffsetLeft=0;this._improveTerraceSkin=function(){var f=[];var g={buttonInput:true,separator:true,text:true};var j=[this.base];if(this._spacer!=null){j.push(this._spacer);}for(var l=0;l<j.length;l++){f[l]=[];for(var d=0;d<j[l].childNodes.length;d++){if(j[l].childNodes[d].idd!=null&&j[l].childNodes[d].style.display!="none"){var k=this.idPrefix+j[l].childNodes[d].idd;if(this.objPull[k]!=null&&this.objPull[k].obj==j[l].childNodes[d]){f[l].push({a:k,type:this.objPull[k].type,node:this.objPull[k][this.objPull[k].type=="buttonSelect"?"arw":"obj"]});}}}j[l]=null;}for(var l=0;l<f.length;l++){for(var d=0;d<f[l].length;d++){var m=f[l][d];if(m.type=="buttonInput"){m.node.className=m.node.className.replace(/dhx_toolbar_btn/,"dhx_toolbar_inp");}var n=false;var h=false;if(!g[m.type]){if(d==f[l].length-1||(f[l][d+1]!=null&&g[f[l][d+1].type])){n=true;}if(d==0||(d-1>=0&&f[l][d-1]!=null&&g[f[l][d-1].type])){h=true;}}m.node.style.borderRight=(n?"1px solid #cecece":"0px solid white");m.node.style.borderTopRightRadius=m.node.style.borderBottomRightRadius=(n?"5px":"0px");if(m.type=="buttonSelect"){m.node.previousSibling.style.borderTopLeftRadius=m.node.previousSibling.style.borderBottomLeftRadius=(h?"5px":"0px");m.node.previousSibling._br=n;m.node.previousSibling._bl=h;}else{m.node.style.borderTopLeftRadius=m.node.style.borderBottomLeftRadius=(h?"5px":"0px");}m.node._br=n;m.node._bl=h;}}for(var l=0;l<f.length;l++){for(var d=0;d<f[l].length;d++){for(var k in f[l][d]){f[l][d][k]=null;}f[l][d]=null;}f[l]=null;}f=j=null;};this._improveTerraceButtonSelect=function(f,e){var d=this.objPull[f];if(e==true){d.obj.style.borderBottomLeftRadius=(d.obj._bl?"5px":"0px");d.arw.style.borderBottomRightRadius=(d.obj._br?"5px":"0px");}else{d.obj.style.borderBottomLeftRadius="0px";d.arw.style.borderBottomRightRadius="0px";}d=null;};this.setSkin=function(g,e){if(e===true){this.cont.className=this.cont.className.replace(/dhx_toolbar_base_\d{1,}_/,"dhx_toolbar_base_"+this.iconSize+"_");}else{this.skin=g;if(this.skin=="dhx_skyblue"){this.selectPolygonOffsetTop=1;}if(this.skin=="dhx_web"){this.selectPolygonOffsetTop=1;this.selectPolygonOffsetLeft=1;}if(this.skin=="dhx_terrace"){this.selectPolygonOffsetTop=-1;this.selectPolygonOffsetLeft=0;}this.cont.className="dhx_toolbar_base_"+this.iconSize+"_"+this.skin+(this.rtl?" rtl":"");}for(var d in this.objPull){var f=this.objPull[d];if(f.type=="slider"){f.pen._detectLimits();f.pen._definePos();f.label.className="dhx_toolbar_slider_label_"+this.skin+(this.rtl?" rtl":"");}if(f.type=="buttonSelect"){f.polygon.className="dhx_toolbar_poly_"+this.iconSize+"_"+this.skin+(this.rtl?" rtl":"");}}if(g=="dhx_terrace"){this._improveTerraceSkin();}};this.setSkin(c!=null?c:(typeof(dhtmlx)!="undefined"&&typeof(dhtmlx.skin)=="string"?dhtmlx.skin:"dhx_skyblue"));this.objPull={};this.anyUsed="none";this.imagePath="";this.setIconsPath=function(d){this.imagePath=d;};this.setIconPath=this.setIconsPath;this._doOnLoad=function(){};this.loadXML=function(d,e){if(e!=null){this._doOnLoad=function(){e();};}this.callEvent("onXLS",[]);this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._xmlLoader.loadXML(d);};this.loadXMLString=function(e,d){if(d!=null){this._doOnLoad=function(){d();};}this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._xmlLoader.loadXMLString(e);};this._xmlParser=function(){var s=this.getXMLTopNode("toolbar");var y=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"];var g=["id","type","enabled","disabled","action","selected","img","text"];for(var f=0;f<s.childNodes.length;f++){if(s.childNodes[f].tagName=="item"){var l={};for(var v=0;v<y.length;v++){l[y[v]]=s.childNodes[f].getAttribute(y[v]);}l.items=[];l.userdata=[];for(var o=0;o<s.childNodes[f].childNodes.length;o++){if(s.childNodes[f].childNodes[o].tagName=="item"&&l.type=="buttonSelect"){var x={};for(var v=0;v<g.length;v++){x[g[v]]=s.childNodes[f].childNodes[o].getAttribute(g[v]);}var n=s.childNodes[f].childNodes[o].getElementsByTagName("itemText");if(n!=null&&n[0]!=null){x.itemText=n[0].firstChild.nodeValue;}var m=s.childNodes[f].childNodes[o].getElementsByTagName("userdata");for(var v=0;v<m.length;v++){if(!x.userdata){x.userdata={};}var d={};try{d.name=m[v].getAttribute("name");}catch(j){d.name="";}try{d.value=m[v].firstChild.nodeValue;}catch(j){d.value="";}if(d.name!=""){x.userdata[d.name]=d.value;}}l.items[l.items.length]=x;}if(s.childNodes[f].childNodes[o].tagName=="userdata"){var x={};try{x.name=s.childNodes[f].childNodes[o].getAttribute("name");}catch(j){x.name="";}try{x.value=s.childNodes[f].childNodes[o].firstChild.nodeValue;}catch(j){x.value="";}l.userdata[l.userdata.length]=x;}}a._addItemToStorage(l);}}if(a.skin=="dhx_terrace"){a._improveTerraceSkin();}a.callEvent("onXLE",[]);a._doOnLoad();this.destructor();};this._addItemToStorage=function(d,h){var g=(d.id||this._genStr(24));var e=(d.type||"");if(e!=""){if(this["_"+e+"Object"]!=null){if((typeof(d.openAll)=="undefined"||d.openAll==null)&&this.skin=="dhx_terrace"){d.openAll=true;}this.objPull[this.idPrefix+g]=new this["_"+e+"Object"](this,g,d);this.objPull[this.idPrefix+g]["type"]=e;this.setPosition(g,h);}}if(d.userdata){for(var f=0;f<d.userdata.length;f++){this.setUserData(g,d.userdata[f].name,d.userdata[f].value);}}};this._genStr=function(d){var e="";var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var f=0;f<d;f++){e+=g.charAt(Math.round(Math.random()*(g.length-1)));}return e;};this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput");this.idPrefix=this._genStr(12);dhtmlxEventable(this);this._getObj=function(g,d){var e=null;for(var f=0;f<g.childNodes.length;f++){if(g.childNodes[f].tagName!=null){if(String(g.childNodes[f].tagName).toLowerCase()==String(d).toLowerCase()){e=g.childNodes[f];}}}return e;};this._addImgObj=function(e){var d=document.createElement("IMG");if(e.childNodes.length>0){e.insertBefore(d,e.childNodes[0]);}else{e.appendChild(d);}return d;};this._setItemImage=function(g,e,d){if(d==true){g.imgEn=e;}else{g.imgDis=e;}if((!g.state&&d==true)||(g.state&&d==false)){return;}var f=this._getObj(g.obj,"img");if(f==null){f=this._addImgObj(g.obj);}f.src=this.imagePath+e;};this._clearItemImage=function(f,d){if(d==true){f.imgEn="";}else{f.imgDis="";}if((!f.state&&d==true)||(f.state&&d==false)){return;}var e=this._getObj(f.obj,"img");if(e!=null){e.parentNode.removeChild(e);}};this._setItemText=function(d,f){var e=this._getObj(d.obj,"div");if(f==null||f.length==0){if(e!=null){e.parentNode.removeChild(e);}return;}if(e==null){e=document.createElement("DIV");d.obj.appendChild(e);}e.innerHTML=f;};this._getItemText=function(d){var e=this._getObj(d.obj,"div");if(e!=null){return e.innerHTML;}return"";};this._enableItem=function(e){if(e.state){return;}e.state=true;if(this.objPull[e.id]["type"]=="buttonTwoState"&&this.objPull[e.id]["obj"]["pressed"]==true){e.obj.className="dhx_toolbar_btn pres";e.obj.renderAs="dhx_toolbar_btn over";}else{e.obj.className="dhx_toolbar_btn def";e.obj.renderAs=e.obj.className;}if(e.arw){e.arw.className=String(e.obj.className).replace("btn","arw");}var d=this._getObj(e.obj,"img");if(e.imgEn!=""){if(d==null){d=this._addImgObj(e.obj);}d.src=this.imagePath+e.imgEn;}else{if(d!=null){d.parentNode.removeChild(d);}}};this._disableItem=function(e){if(!e.state){return;}e.state=false;e.obj.className="dhx_toolbar_btn "+(this.objPull[e.id]["type"]=="buttonTwoState"&&e.obj.pressed?"pres_":"")+"dis";e.obj.renderAs="dhx_toolbar_btn def";if(e.arw){e.arw.className=String(e.obj.className).replace("btn","arw");}var d=this._getObj(e.obj,"img");if(e.imgDis!=""){if(d==null){d=this._addImgObj(e.obj);}d.src=this.imagePath+e.imgDis;}else{if(d!=null){d.parentNode.removeChild(d);}}if(e.polygon!=null){if(e.polygon.style.display!="none"){e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none";}if(this.skin=="dhx_terrace"){this._improveTerraceButtonSelect(e.id,true);}}}this.anyUsed="none";};this.clearAll=function(){for(var d in this.objPull){this._removeItem(String(d).replace(this.idPrefix,""));}};this._isWebToolbar=true;this._doOnClick=function(d){if(a&&a.forEachItem){a.forEachItem(function(f){if(a.objPull[a.idPrefix+f]["type"]=="buttonSelect"){var e=a.objPull[a.idPrefix+f];if(e.arw._skip===true){e.arw._skip=false;}else{if(e.polygon.style.display!="none"){e.obj.renderAs="dhx_toolbar_btn def";e.obj.className=e.obj.renderAs;e.arw.className=String(e.obj.renderAs).replace("btn","arw");a.anyUsed="none";e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none";}if(a.skin=="dhx_terrace"){a._improveTerraceButtonSelect(e.id,true);}}}}});}};if(this._isIPad){document.addEventListener("touchstart",this._doOnClick,false);}else{if(_isIE){document.body.attachEvent("onmousedown",this._doOnClick);}else{window.addEventListener("mousedown",this._doOnClick,false);}}return this;}dhtmlXToolbarObject.prototype.addSpacer=function(c){var b=this.idPrefix+c;if(this._spacer!=null){if(this._spacer.idd==c){return;}if(this._spacer==this.objPull[b].obj.parentNode){var a=true;while(a){var g=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(g==c||this._spacer.childNodes.length==0){if(this.objPull[b].arw!=null){this.base.appendChild(this.objPull[b].arw);}a=false;}}this._spacer.idd=c;this._fixSpacer();return;}if(this.base==this.objPull[b].obj.parentNode){var a=true;var f=(this.objPull[b].arw!=null);while(a){var d=this.base.childNodes.length-1;if(f==true){if(this.base.childNodes[d]==this.objPull[b].arw){a=false;}}if(this.base.childNodes[d].idd==c){a=false;}if(a){if(this._spacer.childNodes.length>0){this._spacer.insertBefore(this.base.childNodes[d],this._spacer.childNodes[0]);}else{this._spacer.appendChild(this.base.childNodes[d]);}}}this._spacer.idd=c;this._fixSpacer();return;}}else{var e=null;for(var d=0;d<this.base.childNodes.length;d++){if(this.base.childNodes[d]==this.objPull[this.idPrefix+c].obj){e=d;if(this.objPull[this.idPrefix+c].arw!=null){e=d+1;}}}if(e!=null){this._spacer=document.createElement("DIV");this._spacer.className="dhxtoolbar_spacer "+(this.align=="right"?" float_left":" float_right");this._spacer.dir="ltr";this._spacer.idd=c;while(this.base.childNodes.length>e+1){this._spacer.appendChild(this.base.childNodes[e+1]);}this.cont.appendChild(this._spacer);this._fixSpacer();}}if(this.skin=="dhx_terrace"){this._improveTerraceSkin();}};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(!this._spacer){return;}while(this._spacer.childNodes.length>0){this.base.appendChild(this._spacer.childNodes[0]);}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;if(this.skin=="dhx_terrace"){this._improveTerraceSkin();}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(_isIE&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4";a=null;},1);}};dhtmlXToolbarObject.prototype.getType=function(c){var d=this.getParentId(c);if(d!=null){var b=null;var a=this.objPull[this.idPrefix+d]._listOptions[c];if(a!=null){if(a.sep!=null){b="buttonSelectSeparator";}else{b="buttonSelectButton";}}return b;}else{if(this.objPull[this.idPrefix+c]==null){return null;}return this.objPull[this.idPrefix+c]["type"];}};dhtmlXToolbarObject.prototype.getTypeExt=function(b){var a=this.getType(b);if(a=="buttonSelectButton"||a=="buttonSelectSeparator"){if(a=="buttonSelectButton"){a="button";}else{a="separator";}return a;}return null;};dhtmlXToolbarObject.prototype.inArray=function(c,b){for(var a=0;a<c.length;a++){if(c[a]==b){return true;}}return false;};dhtmlXToolbarObject.prototype.getParentId=function(e){var f=null;for(var d in this.objPull){if(this.objPull[d]._listOptions){for(var c in this.objPull[d]._listOptions){if(c==e){f=String(d).replace(this.idPrefix,"");}}}}return f;};dhtmlXToolbarObject.prototype._addItem=function(a,b){this._addItemToStorage(a,b);if(this.skin=="dhx_terrace"){this._improveTerraceSkin();}};dhtmlXToolbarObject.prototype.addButton=function(e,d,b,a,c){this._addItem({id:e,type:"button",text:b,img:a,imgdis:c},d);};dhtmlXToolbarObject.prototype.addText=function(c,b,a){this._addItem({id:c,type:"text",text:a},b);};dhtmlXToolbarObject.prototype.addButtonSelect=function(d,j,m,a,b,k,h,n,e,f){var g=[];for(var c=0;c<a.length;c++){var l={};if(a[c] instanceof Array){l.id=a[c][0];l.type=(a[c][1]=="obj"?"button":"separator");l.text=(a[c][2]||null);l.img=(a[c][3]||null);}else{if(a[c] instanceof Object&&a[c]!=null&&typeof(a[c].id)!="undefined"&&typeof(a[c].type)!="undefined"){l.id=a[c].id;l.type=(a[c].type=="obj"?"button":"separator");l.text=a[c].text;l.img=a[c].img;}}g[g.length]=l;}this._addItem({id:d,type:"buttonSelect",text:m,img:b,imgdis:k,renderSelect:h,openAll:n,items:g,maxOpen:e,mode:f},j);};dhtmlXToolbarObject.prototype.addButtonTwoState=function(e,d,b,a,c){this._addItem({id:e,type:"buttonTwoState",img:a,imgdis:c,text:b},d);};dhtmlXToolbarObject.prototype.addSeparator=function(b,a){this._addItem({id:b,type:"separator"},a);};dhtmlXToolbarObject.prototype.addSlider=function(b,g,e,d,j,c,f,a,h){this._addItem({id:b,type:"slider",length:e,valueMin:d,valueMax:j,valueNow:c,textMin:f,textMax:a,toolTip:h},g);};dhtmlXToolbarObject.prototype.addInput=function(d,c,b,a){this._addItem({id:d,type:"buttonInput",value:b,width:a},c);};dhtmlXToolbarObject.prototype.forEachItem=function(c){for(var b in this.objPull){if(this.inArray(this.rootTypes,this.objPull[b]["type"])){c(this.objPull[b]["id"].replace(this.idPrefix,""));}}};(function(){var f="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(",");var c=[false,"","",false,"","","","","","","","","",false,"","","",null,"",[null,null],"",[null,null],"",null];var b=function(g,h){return function(l,k,j){l=this.idPrefix+l;if(this.objPull[l][g]!=null){return this.objPull[l][g].call(this.objPull[l],k,j);}else{return h;}};};for(var e=0;e<f.length;e++){var a=f[e];var d=c[e];dhtmlXToolbarObject.prototype[a]=b(a,d);}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].showItem!=null){this.objPull[a].showItem();if(this.skin=="dhx_terrace"){this._improveTerraceSkin();}}};dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].hideItem!=null){this.objPull[a].hideItem();if(this.skin=="dhx_terrace"){this._improveTerraceSkin();}}};dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a);};dhtmlXToolbarObject.prototype._getPosition=function(e,c){if(this.objPull[this.idPrefix+e]==null){return null;}var d=null;var a=0;for(var b=0;b<this.base.childNodes.length;b++){if(this.base.childNodes[b].idd!=null){if(this.base.childNodes[b].idd==e){d=a;}a++;}}if(!d&&this._spacer!=null){for(var b=0;b<this._spacer.childNodes.length;b++){if(this._spacer.childNodes[b].idd!=null){if(this._spacer.childNodes[b].idd==e){d=a;}a++;}}}return d;};dhtmlXToolbarObject.prototype.setPosition=function(a,b){this._setPosition(a,b);};dhtmlXToolbarObject.prototype._setPosition=function(e,d){if(this.objPull[this.idPrefix+e]==null){return;}if(isNaN(d)){d=this.base.childNodes.length;}if(d<0){d=0;}var a=null;if(this._spacer){a=this._spacer.idd;this.removeSpacer();}var c=this.objPull[this.idPrefix+e];this.base.removeChild(c.obj);if(c.arw){this.base.removeChild(c.arw);}var b=this._getIdByPosition(d,true);if(b[0]==null){this.base.appendChild(c.obj);if(c.arw){this.base.appendChild(c.arw);}}else{this.base.insertBefore(c.obj,this.base.childNodes[b[1]]);if(c.arw){this.base.insertBefore(c.arw,this.base.childNodes[b[1]+1]);}}if(a!=null){this.addSpacer(a);}};dhtmlXToolbarObject.prototype._getIdByPosition=function(f,b){var e=null;var a=0;var c=0;for(var d=0;d<this.base.childNodes.length;d++){if(this.base.childNodes[d]["idd"]!=null&&e==null){if((a++)==f){e=this.base.childNodes[d]["idd"];}}if(e==null){c++;}}c=(e==null?null:c);return(b==true?new Array(e,c):e);};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);if(this.skin=="dhx_terrace"){this._improveTerraceSkin();}};dhtmlXToolbarObject.prototype._removeItem=function(e){var c=this.getType(e);e=this.idPrefix+e;var d=this.objPull[e];if(c=="button"){d.obj._doOnMouseOver=null;d.obj._doOnMouseOut=null;d.obj._doOnMouseUp=null;d.obj._doOnMouseUpOnceAnywhere=null;d.obj.onclick=null;d.obj.onmouseover=null;d.obj.onmouseout=null;d.obj.onmouseup=null;d.obj.onmousedown=null;d.obj.onselectstart=null;d.obj.renderAs=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.state=null;d.img=null;d.imgEn=null;d.imgDis=null;d.type=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemText=null;d.getItemText=null;d.setItemImage=null;d.clearItemImage=null;d.setItemImageDis=null;d.clearItemImageDis=null;d.setItemToolTip=null;d.getItemToolTip=null;}if(c=="buttonTwoState"){d.obj._doOnMouseOver=null;d.obj._doOnMouseOut=null;d.obj.onmouseover=null;d.obj.onmouseout=null;d.obj.onmousedown=null;d.obj.onselectstart=null;d.obj.renderAs=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.state=null;d.img=null;d.imgEn=null;d.imgDis=null;d.type=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemText=null;d.getItemText=null;d.setItemImage=null;d.clearItemImage=null;d.setItemImageDis=null;d.clearItemImageDis=null;d.setItemToolTip=null;d.getItemToolTip=null;d.setItemState=null;d.getItemState=null;}if(c=="buttonSelect"){for(var b in d._listOptions){this.removeListOption(e,b);}d._listOptions=null;if(d.polygon._ie6cover){document.body.removeChild(d.polygon._ie6cover);d.polygon._ie6cover=null;}d.p_tbl.removeChild(d.p_tbody);d.polygon.removeChild(d.p_tbl);d.polygon.onselectstart=null;document.body.removeChild(d.polygon);d.p_tbody=null;d.p_tbl=null;d.polygon=null;d.obj.onclick=null;d.obj.onmouseover=null;d.obj.onmouseout=null;d.obj.onmouseup=null;d.obj.onmousedown=null;d.obj.onselectstart=null;d.obj.idd=null;d.obj.iddPrefix=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.arw.onclick=null;d.arw.onmouseover=null;d.arw.onmouseout=null;d.arw.onmouseup=null;d.arw.onmousedown=null;d.arw.onselectstart=null;d.arw.parentNode.removeChild(d.arw);d.arw=null;d.renderSelect=null;d.state=null;d.type=null;d.id=null;d.img=null;d.imgEn=null;d.imgDis=null;d.openAll=null;d._isListButton=null;d._separatorButtonSelectObject=null;d._buttonButtonSelectObject=null;d.setWidth=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemText=null;d.getItemText=null;d.setItemImage=null;d.clearItemImage=null;d.setItemImageDis=null;d.clearItemImageDis=null;d.setItemToolTip=null;d.getItemToolTip=null;d.addListOption=null;d.removeListOption=null;d.showListOption=null;d.hideListOption=null;d.isListOptionVisible=null;d.enableListOption=null;d.disableListOption=null;d.isListOptionEnabled=null;d.setListOptionPosition=null;d.getListOptionPosition=null;d.setListOptionImage=null;d.getListOptionImage=null;d.clearListOptionImage=null;d.setListOptionText=null;d.getListOptionText=null;d.setListOptionToolTip=null;d.getListOptionToolTip=null;d.forEachListOption=null;d.getAllListOptions=null;d.setListOptionSelected=null;d.getListOptionSelected=null;}if(c=="buttonInput"){d.obj.childNodes[0].onkeydown=null;d.obj.removeChild(d.obj.childNodes[0]);d.obj.w=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemToolTip=null;d.getItemToolTip=null;d.setWidth=null;d.getWidth=null;d.setValue=null;d.getValue=null;d.setItemText=null;d.getItemText=null;}if(c=="slider"){if(this._isIPad){document.removeEventListener("touchmove",pen._doOnMouseMoveStart,false);document.removeEventListener("touchend",pen._doOnMouseMoveEnd,false);}else{if(_isIE){document.body.detachEvent("onmousemove",d.pen._doOnMouseMoveStart);document.body.detachEvent("onmouseup",d.pen._doOnMouseMoveEnd);}else{window.removeEventListener("mousemove",d.pen._doOnMouseMoveStart,false);window.removeEventListener("mouseup",d.pen._doOnMouseMoveEnd,false);}}d.pen.allowMove=null;d.pen.initXY=null;d.pen.maxX=null;d.pen.minX=null;d.pen.nowX=null;d.pen.newNowX=null;d.pen.valueMax=null;d.pen.valueMin=null;d.pen.valueNow=null;d.pen._definePos=null;d.pen._detectLimits=null;d.pen._doOnMouseMoveStart=null;d.pen._doOnMouseMoveEnd=null;d.pen.onmousedown=null;d.obj.removeChild(d.pen);d.pen=null;d.label.tip=null;document.body.removeChild(d.label);d.label=null;d.obj.onselectstart=null;d.obj.idd=null;while(d.obj.childNodes.length>0){d.obj.removeChild(d.obj.childNodes[0]);}d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.state=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.setItemToolTipTemplate=null;d.getItemToolTipTemplate=null;d.setMaxValue=null;d.setMinValue=null;d.getMaxValue=null;d.getMinValue=null;d.setValue=null;d.getValue=null;d.showItem=null;d.hideItem=null;d.isVisible=null;}if(c=="separator"){d.obj.onselectstart=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.showItem=null;d.hideItem=null;d.isVisible=null;}if(c=="text"){d.obj.onselectstart=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setWidth=null;d.setItemText=null;d.getItemText=null;}c=null;d=null;this.objPull[this.idPrefix+e]=null;delete this.objPull[this.idPrefix+e];};(function(){var d="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(",");var b=function(e){return function(l,g,f,k,j,h){l=this.idPrefix+l;if(this.objPull[l]==null){return;}if(this.objPull[l]["type"]!="buttonSelect"){return;}return this.objPull[l][e].call(this.objPull[l],g,f,k,j,h);};};for(var c=0;c<d.length;c++){var a=d[c];dhtmlXToolbarObject.prototype[a]=b(a);}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(b,a){return b+a;};dhtmlXToolbarObject.prototype._separatorObject=function(a,c,b){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=(b.hidden!=null?"none":"");this.obj.idd=String(c);this.obj.title=(b.title||"");this.obj.onselectstart=function(d){d=d||event;d.returnValue=false;};if(a._isIPad){this.obj.ontouchstart=function(d){d=d||event;d.returnValue=false;d.cancelBubble=true;return false;};}a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display="";};this.hideItem=function(){this.obj.style.display="none";};this.isVisible=function(){return(this.obj.style.display=="");};return this;};dhtmlXToolbarObject.prototype._textObject=function(a,c,b){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=(b.hidden!=null?"none":"");this.obj.idd=String(c);this.obj.title=(b.title||"");this.obj.onselectstart=function(d){d=d||event;d.returnValue=false;};if(a._isIPad){this.obj.ontouchstart=function(d){d=d||event;d.returnValue=false;d.cancelBubble=true;return false;};}this.obj.innerHTML=(b.text||"");a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display="";};this.hideItem=function(){this.obj.style.display="none";};this.isVisible=function(){return(this.obj.style.display=="");};this.setItemText=function(d){this.obj.innerHTML=d;};this.getItemText=function(){return this.obj.innerHTML;};this.setWidth=function(d){this.obj.style.width=d+"px";};this.setItemToolTip=function(d){this.obj.title=d;};this.getItemToolTip=function(){return this.obj.title;};return this;};dhtmlXToolbarObject.prototype._buttonObject=function(a,d,b){this.id=a.idPrefix+d;this.state=(b.enabled!=null?false:true);this.imgEn=(b.img||"");this.imgDis=(b.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.style.display=(b.hidden!=null?"none":"");this.obj.allowClick=false;this.obj.extAction=(b.action||null);this.obj.renderAs=this.obj.className;this.obj.idd=String(d);this.obj.title=(b.title||"");this.obj.pressed=false;this.obj.innerHTML=a._rtlParseBtn((this.img!=""?"<img src='"+a.imagePath+this.img+"'>":""),(b.text!=null?"<div>"+b.text+"</div>":""));var c=this;this.obj.onselectstart=function(f){f=f||event;f.returnValue=false;};this.obj.onmouseover=function(){this._doOnMouseOver();};this.obj.onmouseout=function(){this._doOnMouseOut();};this.obj._doOnMouseOver=function(){this.allowClick=true;if(c.state==false){return;}if(a.anyUsed!="none"){return;}this.className="dhx_toolbar_btn over";this.renderAs=this.className;};this.obj._doOnMouseOut=function(){this.allowClick=false;if(c.state==false){return;}if(a.anyUsed!="none"){return;}this.className="dhx_toolbar_btn def";this.renderAs=this.renderAs;};this.obj.onclick=function(f){if(c.state==false){return;}if(this.allowClick==false){return;}f=f||event;var g=this.idd.replace(a.idPrefix,"");if(this.extAction){try{window[this.extAction](g);}catch(f){}}if(a&&a.callEvent){a.callEvent("onClick",[g]);}};this.obj[a._isIPad?"ontouchstart":"onmousedown"]=function(f){if(c.state==false){f=f||event;f.returnValue=false;f.cancelBubble=true;return false;}if(a.anyUsed!="none"){return;}a.anyUsed=this.idd;this.className="dhx_toolbar_btn pres";this.pressed=true;this.onmouseover=function(){this._doOnMouseOver();};this.onmouseout=function(){a.anyUsed="none";this._doOnMouseOut();};return false;};this.obj[a._isIPad?"ontouchend":"onmouseup"]=function(g){if(c.state==false){return;}if(a.anyUsed!="none"){if(a.anyUsed!=this.idd){return;}}var f=a.anyUsed;this._doOnMouseUp();if(a._isIPad&&f!="none"){a.callEvent("onClick",[this.idd.replace(a.idPrefix,"")]);}};if(a._isIPad){this.obj.ontouchmove=function(f){this._doOnMouseUp();};}this.obj._doOnMouseUp=function(){a.anyUsed="none";this.className=this.renderAs;this.pressed=false;};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver();};this.onmouseout=function(){this._doOnMouseOut();};};a.base.appendChild(this.obj);this.enableItem=function(){a._enableItem(this);};this.disableItem=function(){a._disableItem(this);};this.isEnabled=function(){return this.state;};this.showItem=function(){this.obj.style.display="";};this.hideItem=function(){this.obj.style.display="none";};this.isVisible=function(){return(this.obj.style.display=="");};this.setItemText=function(e){a._setItemText(this,e);};this.getItemText=function(){return a._getItemText(this);};this.setItemImage=function(e){a._setItemImage(this,e,true);};this.clearItemImage=function(){a._clearItemImage(this,true);};this.setItemImageDis=function(e){a._setItemImage(this,e,false);};this.clearItemImageDis=function(){a._clearItemImage(this,false);};this.setItemToolTip=function(e){this.obj.title=e;};this.getItemToolTip=function(){return this.obj.title;};return this;};dhtmlXToolbarObject.prototype._buttonSelectObject=function(c,f,e){this.id=c.idPrefix+f;this.state=(e.enabled!=null?(e.enabled=="true"?true:false):true);this.imgEn=(e.img||"");this.imgDis=(e.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.mode=(e.mode||"button");if(this.mode=="select"){this.openAll=true;this.renderSelect=false;if(!e.text||e.text.length==0){e.text="&nbsp;";}}else{this.openAll=(e.openAll=="true"||e.openAll==true||e.openAll==1||e.openAll=="1"||e.openAll=="yes"||e.openAll=="on");this.renderSelect=(e.renderSelect!=null?(e.renderSelect=="false"||e.renderSelect=="disabled"?false:true):true);}this.maxOpen=(!isNaN(e.maxOpen?e.maxOpen:"")?e.maxOpen:null);this._maxOpenTest=function(){if(!isNaN(this.maxOpen)){if(!c._sbw){var h=document.createElement("DIV");h.className="dhxtoolbar_maxopen_test";document.body.appendChild(h);var g=document.createElement("DIV");g.className="dhxtoolbar_maxopen_test2";h.appendChild(g);c._sbw=h.offsetWidth-g.offsetWidth;h.removeChild(g);g=null;document.body.removeChild(h);h=null;}}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=false;this.obj.extAction=(e.action||null);this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.style.display=(e.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(g){g=g||event;g.returnValue=false;};this.obj.idd=String(f);this.obj.title=(e.title||"");this.obj.pressed=false;this.callEvent=false;this.obj.innerHTML=c._rtlParseBtn((this.img!=""?"<img src='"+c.imagePath+this.img+"'>":""),(e.text!=null?"<div>"+e.text+"</div>":""));c.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw "+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(g){g=g||event;g.returnValue=false;};c.base.appendChild(this.arw);var a=this;this.obj.onmouseover=function(g){g=g||event;if(c.anyUsed!="none"){return;}if(!a.state){return;}a.obj.renderAs="dhx_toolbar_btn over";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");};this.obj.onmouseout=function(){a.obj.allowClick=false;if(c.anyUsed!="none"){return;}if(!a.state){return;}a.obj.renderAs="dhx_toolbar_btn def";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");a.callEvent=false;};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;if(this.openAll==true){}else{this.obj.onclick=function(g){g=g||event;if(!a.obj.allowClick){return;}if(!a.state){return;}if(c.anyUsed!="none"){return;}var h=a.obj.idd.replace(c.idPrefix,"");if(a.obj.extAction){try{window[a.obj.extAction](h);}catch(g){}}c.callEvent("onClick",[h]);};this.obj[c._isIPad?"ontouchstart":"onmousedown"]=function(g){g=g||event;if(c.anyUsed!="none"){return;}if(!a.state){return;}a.obj.allowClick=true;a.obj.className="dhx_toolbar_btn pres";a.arw.className="dhx_toolbar_arw pres";a.callEvent=true;};this.obj[c._isIPad?"ontouchend":"onmouseup"]=function(g){g=g||event;g.cancelBubble=true;if(c.anyUsed!="none"){return;}if(!a.state){return;}a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");if(c._isIPad&&a.callEvent){var h=a.obj.idd.replace(c.idPrefix,"");c.callEvent("onClick",[h]);}};}if(c._isIPad){this.obj.ontouchmove=this.obj.onmouseout;}this.arw[c._isIPad?"ontouchstart":"onmousedown"]=function(j){j=j||event;var p=(this.className.indexOf("dhx_toolbar_arw")===0?this:this.nextSibling);if(p._skip){j=j||event;j.cancelBubble=true;}else{p._skip=true;}p=null;if(!a.state){return;}if(c.anyUsed==a.obj.idd){a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");c.anyUsed="none";a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none";}if(c.skin=="dhx_terrace"){c._improveTerraceButtonSelect(a.id,true);}}else{if(c.anyUsed!="none"){if(c.objPull[c.idPrefix+c.anyUsed]["type"]=="buttonSelect"){var o=c.objPull[c.idPrefix+c.anyUsed];if(o.polygon.style.display!="none"){o.obj.renderAs="dhx_toolbar_btn def";o.obj.className=o.obj.renderAs;o.arw.className=String(a.obj.renderAs).replace("btn","arw");o.polygon.style.display="none";if(o.polygon._ie6cover){o.polygon._ie6cover.style.display="none";}if(c.skin=="dhx_terrace"){c._improveTerraceButtonSelect(o.id,true);}}}}a.obj.className="dhx_toolbar_btn over";a.arw.className="dhx_toolbar_arw pres";c.anyUsed=a.obj.idd;a.polygon.style.top="0px";a.polygon.style.visibility="hidden";a.polygon.style.display="";if(c.skin=="dhx_terrace"){c._improveTerraceButtonSelect(a.id,false);}a._fixMaxOpenHeight(a.maxOpen||null);c._autoDetectVisibleArea();var k=getAbsoluteTop(a.obj)+a.obj.offsetHeight+c.selectPolygonOffsetTop;var m=a.polygon.offsetHeight;if(k+m>c.tY2){var l=(a.maxOpen!=null?Math.floor((c.tY2-k)/22):0);if(l>=1){a._fixMaxOpenHeight(l);}else{k=getAbsoluteTop(a.obj)-m-c.selectPolygonOffsetTop;if(k<0){k=0;}}}a.polygon.style.top=k+"px";if(c.rtl){a.polygon.style.left=getAbsoluteLeft(a.obj)+a.obj.offsetWidth-a.polygon.offsetWidth+c.selectPolygonOffsetLeft+"px";}else{var h=document.body.scrollLeft;var g=h+(window.innerWidth||document.body.clientWidth);var n=getAbsoluteLeft(a.obj)+c.selectPolygonOffsetLeft;if(n+a.polygon.offsetWidth>g){n=getAbsoluteLeft(a.arw)+a.arw.offsetWidth-a.polygon.offsetWidth;}a.polygon.style.left=n+"px";}a.polygon.style.visibility="visible";if(a.polygon._ie6cover){a.polygon._ie6cover.style.left=a.polygon.style.left;a.polygon._ie6cover.style.top=a.polygon.style.top;a.polygon._ie6cover.style.width=a.polygon.offsetWidth+"px";a.polygon._ie6cover.style.height=a.polygon.offsetHeight+"px";a.polygon._ie6cover.style.display="";}}return false;};this.arw.onclick=function(g){g=g||event;g.cancelBubble=true;};this.arw[c._isIPad?"ontouchend":"onmouseup"]=function(g){g=g||event;g.cancelBubble=true;};if(this.openAll===true){this.obj.onclick=this.arw.onclick;this.obj.onmousedown=this.arw.onmousedown;this.obj.onmouseup=this.arw.onmouseup;if(c._isIPad){this.obj.ontouchstart=this.arw.ontouchstart;this.obj.ontouchend=this.arw.ontouchend;}}this.obj.iddPrefix=c.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(m){var l="auto";var k=false;if(m!==null){var j=0;for(var g in this._listOptions){j++;}if(j>m){this._ph=22*m;l=this._ph+"px";}else{k=true;}}this.polygon.style.width="auto";this.polygon.style.height="auto";if(!k&&a.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+c._sbw+"px";this.polygon.style.height=l;}};this._separatorButtonSelectObject=function(j,g,h){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(k){k=k||event;k.returnValue=false;return false;};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(k){k=k||event;k.returnValue=false;return false;};if(isNaN(h)){h=a.p_tbody.childNodes.length+1;}else{if(h<1){h=1;}}if(h>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr);}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[h-1]);}this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(k){k=k||event;k.returnValue=false;return false;};this.obj.td.appendChild(this.obj.sep);a._listOptions[j]=this.obj;return this;};this._buttonButtonSelectObject=function(k,h,j){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=(h.enabled=="false"?false:(h.disabled=="true"?false:true));this.obj.tr.extAction=(h.action||null);this.obj.tr._selected=(h.selected!=null);this.obj.tr.className="tr_btn"+(this.obj.tr.en?(this.obj.tr._selected&&a.renderSelect?" tr_btn_selected":""):" tr_btn_disabled");this.obj.tr.onselectstart=function(l){l=l||event;l.returnValue=false;return false;};this.obj.tr.idd=String(k);if(h.userdata){this.obj.userData=h.userdata;}if(isNaN(j)){j=a.p_tbody.childNodes.length+1;}else{if(j<1){j=1;}}if(j>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr);}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[j-1]);}this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(l){l=l||event;l.returnValue=false;return false;};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(l){l=l||event;l.returnValue=false;return false;};if(c.rtl){this.obj.tr.appendChild(this.obj.td_b);this.obj.tr.appendChild(this.obj.td_a);}else{this.obj.tr.appendChild(this.obj.td_a);this.obj.tr.appendChild(this.obj.td_b);}if(h.img!=null){this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+c.imagePath+h.img+"' border='0'>";this.obj.tr._img=h.img;}var g=(h.text!=null?h.text:(h.itemText||""));this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+g+"</div>";this.obj.tr[c._isIPad?"ontouchstart":"onmouseover"]=function(){if(!this.en||(this._selected&&a.renderSelect)){return;}this.className="tr_btn tr_btn_over";};this.obj.tr.onmouseout=function(){if(!this.en){return;}if(this._selected&&a.renderSelect){if(String(this.className).search("tr_btn_selected")==-1){this.className="tr_btn tr_btn_selected";}}else{this.className="tr_btn";}};this.obj.tr[c._isIPad?"ontouchend":"onclick"]=function(l){l=l||event;l.cancelBubble=true;if(!this.en){return;}a.setListOptionSelected(this.idd.replace(c.idPrefix,""));a.obj.renderAs="dhx_toolbar_btn def";a.obj.className=a.obj.renderAs;a.arw.className=String(a.obj.renderAs).replace("btn","arw");a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none";}if(c.skin=="dhx_terrace"){c._improveTerraceButtonSelect(a.id,true);}c.anyUsed="none";var m=this.idd.replace(c.idPrefix,"");if(this.extAction){try{window[this.extAction](m);}catch(l){}}c.callEvent("onClick",[m]);};a._listOptions[k]=this.obj;return this;};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.style.zIndex=101;this.polygon.className="dhx_toolbar_poly_"+c.iconSize+"_"+c.skin+(c.rtl?" rtl":"");this.polygon.onselectstart=function(g){g=g||event;g.returnValue=false;};this.polygon.onmousedown=function(g){g=g||event;g.cancelBubble=true;};this.polygon.style.overflowY="auto";if(c._isIPad){this.polygon.ontouchstart=function(g){g=g||event;g.returnValue=false;g.cancelBubble=true;return false;};}this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(e.items){for(var d=0;d<e.items.length;d++){var b="_"+(e.items[d].type||"")+"ButtonSelectObject";if(typeof(this[b])=="function"){new this[b](e.items[d].id||c._genStr(24),e.items[d]);}}}document.body.appendChild(this.polygon);if(c._isIE6){this.polygon._ie6cover=document.createElement("IFRAME");this.polygon._ie6cover.frameBorder=0;this.polygon._ie6cover.style.position="absolute";this.polygon._ie6cover.style.border="none";this.polygon._ie6cover.style.backgroundColor="#000000";this.polygon._ie6cover.style.filter="alpha(opacity=100)";this.polygon._ie6cover.style.display="none";this.polygon._ie6cover.setAttribute("src","javascript:false;");document.body.appendChild(this.polygon._ie6cover);}this.setWidth=function(g){this.obj.style.width=g-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width;};this.enableItem=function(){c._enableItem(this);};this.disableItem=function(){c._disableItem(this);};this.isEnabled=function(){return this.state;};this.showItem=function(){this.obj.style.display="";this.arw.style.display="";};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none";};this.isVisible=function(){return(this.obj.style.display=="");};this.setItemText=function(g){c._setItemText(this,g);};this.getItemText=function(){return c._getItemText(this);};this.setItemImage=function(g){c._setItemImage(this,g,true);};this.clearItemImage=function(){c._clearItemImage(this,true);};this.setItemImageDis=function(g){c._setItemImage(this,g,false);};this.clearItemImageDis=function(){c._clearItemImage(this,false);};this.setItemToolTip=function(g){this.obj.title=g;this.arw.title=g;};this.getItemToolTip=function(){return this.obj.title;};this.addListOption=function(m,l,j,k,g){if(!(j=="button"||j=="separator")){return;}var h={id:m,type:j,text:k,img:g};new this["_"+j+"ButtonSelectObject"](m,h,l);};this.removeListOption=function(j){if(!this._isListButton(j,true)){return;}var g=this._listOptions[j];if(g.td_a!=null&&g.td_b!=null){g.td_a.onselectstart=null;g.td_b.onselectstart=null;while(g.td_a.childNodes.length>0){g.td_a.removeChild(g.td_a.childNodes[0]);}while(g.td_b.childNodes.length>0){g.td_b.removeChild(g.td_b.childNodes[0]);}g.tr.onselectstart=null;g.tr.onmouseover=null;g.tr.onmouseout=null;g.tr.onclick=null;while(g.tr.childNodes.length>0){g.tr.removeChild(g.tr.childNodes[0]);}g.tr.parentNode.removeChild(g.tr);g.td_a=null;g.td_b=null;g.tr=null;}else{g.sep.onselectstart=null;g.td.onselectstart=null;g.tr.onselectstart=null;while(g.td.childNodes.length>0){g.td.removeChild(g.td.childNodes[0]);}while(g.tr.childNodes.length>0){g.tr.removeChild(g.tr.childNodes[0]);}g.tr.parentNode.removeChild(g.tr);g.sep=null;g.td=null;g.tr=null;}g=null;this._listOptions[j]=null;try{delete this._listOptions[j];}catch(h){}};this.showListOption=function(g){if(!this._isListButton(g,true)){return;}this._listOptions[g].tr.style.display="";};this.hideListOption=function(g){if(!this._isListButton(g,true)){return;}this._listOptions[g].tr.style.display="none";};this.isListOptionVisible=function(g){if(!this._isListButton(g,true)){return;}return(this._listOptions[g].tr.style.display!="none");};this.enableListOption=function(g){if(!this._isListButton(g)){return;}this._listOptions[g].tr.en=true;this._listOptions[g].tr.className="tr_btn"+(this._listOptions[g].tr._selected&&c.renderSelect?" tr_btn_selected":"");};this.disableListOption=function(g){if(!this._isListButton(g)){return;}this._listOptions[g].tr.en=false;this._listOptions[g].tr.className="tr_btn tr_btn_disabled";};this.isListOptionEnabled=function(g){if(!this._isListButton(g)){return;}return this._listOptions[g].tr.en;};this.setListOptionPosition=function(j,h){if(!this._listOptions[j]||this.getListOptionPosition(j)==h||isNaN(h)){return;}if(h<1){h=1;}var g=this._listOptions[j].tr;this.p_tbody.removeChild(g);if(h>this.p_tbody.childNodes.length){this.p_tbody.appendChild(g);}else{this.p_tbody.insertBefore(g,this.p_tbody.childNodes[h-1]);}g=null;};this.getListOptionPosition=function(j){var h=-1;if(!this._listOptions[j]){return h;}for(var g=0;g<this.p_tbody.childNodes.length;g++){if(this.p_tbody.childNodes[g]==this._listOptions[j].tr){h=g+1;}}return h;};this.setListOptionImage=function(k,g){if(!this._isListButton(k)){return;}var j=this._listOptions[k].tr.childNodes[(c.rtl?1:0)];if(j.childNodes.length>0){j.childNodes[0].src=c.imagePath+g;}else{var h=document.createElement("IMG");h.className="btn_sel_img";h.src=c.imagePath+g;j.appendChild(h);}j=null;};this.getListOptionImage=function(j){if(!this._isListButton(j)){return;}var h=this._listOptions[j].tr.childNodes[(c.rtl?1:0)];var g=null;if(h.childNodes.length>0){g=h.childNodes[0].src;}h=null;return g;};this.clearListOptionImage=function(h){if(!this._isListButton(h)){return;}var g=this._listOptions[h].tr.childNodes[(c.rtl?1:0)];while(g.childNodes.length>0){g.removeChild(g.childNodes[0]);}g=null;};this.setListOptionText=function(h,g){if(!this._isListButton(h)){return;}this._listOptions[h].tr.childNodes[(c.rtl?0:1)].childNodes[0].innerHTML=g;};this.getListOptionText=function(g){if(!this._isListButton(g)){return;}return this._listOptions[g].tr.childNodes[(c.rtl?0:1)].childNodes[0].innerHTML;};this.setListOptionToolTip=function(h,g){if(!this._isListButton(h)){return;}this._listOptions[h].tr.title=g;};this.getListOptionToolTip=function(g){if(!this._isListButton(g)){return;}return this._listOptions[g].tr.title;};this.forEachListOption=function(h){for(var g in this._listOptions){h(g);}};this.getAllListOptions=function(){var h=new Array();for(var g in this._listOptions){h[h.length]=g;}return h;};this.setListOptionSelected=function(j){for(var g in this._listOptions){var h=this._listOptions[g];if(h.td_a!=null&&h.td_b!=null&&h.tr.en){if(g==j){h.tr._selected=true;h.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":"");if(this.mode=="select"){if(h.tr._img){this.setItemImage(h.tr._img);}else{this.clearItemImage();}this.setItemText(this.getListOptionText(j));}}else{h.tr._selected=false;h.tr.className="tr_btn";}}h=null;}};this.getListOptionSelected=function(){var h=null;for(var g in this._listOptions){if(this._listOptions[g].tr._selected==true){h=g;}}return h;};this._isListButton=function(h,g){if(this._listOptions[h]==null){return false;}if(!g&&this._listOptions[h].tr.className=="tr_sep"){return false;}return true;};this.setMaxOpen=function(g){this._ph=null;if(typeof(g)=="number"){this.maxOpen=g;this._maxOpenTest();return;}this.maxOpen=null;};if(e.width){this.setWidth(e.width);}if(this.mode=="select"&&typeof(e.selected)!="undefined"){this.setListOptionSelected(e.selected);}return this;};dhtmlXToolbarObject.prototype._buttonInputObject=function(c,e,d){this.id=c.idPrefix+e;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn def";this.obj.style.display=(d.hidden!=null?"none":"");this.obj.idd=String(e);this.obj.w=(d.width!=null?d.width:100);this.obj.title=(d.title!=null?d.title:"");this.obj.innerHTML="<input class='inp' type='text' style='-moz-user-select:text;width:"+this.obj.w+"px;'"+(d.value!=null?" value='"+d.value+"'":"")+">";var b=c;var a=this;this.obj.childNodes[0].onkeydown=function(f){f=f||event;if(f.keyCode==13){b.callEvent("onEnter",[a.obj.idd,this.value]);}};c.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=false;};this.disableItem=function(){this.obj.childNodes[0].disabled=true;};this.isEnabled=function(){return(!this.obj.childNodes[0].disabled);};this.showItem=function(){this.obj.style.display="";};this.hideItem=function(){this.obj.style.display="none";};this.isVisible=function(){return(this.obj.style.display!="none");};this.setValue=function(f){this.obj.childNodes[0].value=f;};this.getValue=function(){return this.obj.childNodes[0].value;};this.setWidth=function(f){this.obj.w=f;this.obj.childNodes[0].style.width=this.obj.w+"px";};this.getWidth=function(){return this.obj.w;};this.setItemToolTip=function(f){this.obj.title=f;};this.getItemToolTip=function(){return this.obj.title;};this.getInput=function(){return this.obj.firstChild;};return this;};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(a,d,b){this.id=a.idPrefix+d;this.state=(b.enabled!=null?false:true);this.imgEn=(b.img!=null?b.img:"");this.imgDis=(b.imgdis!=null?b.imgdis:"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.pressed=(b.selected!=null);this.obj.extAction=(b.action||null);this.obj.className="dhx_toolbar_btn "+(this.obj.pressed?"pres"+(this.state?"":"_dis"):(this.state?"def":"dis"));this.obj.style.display=(b.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.idd=String(d);this.obj.title=(b.title||"");if(this.obj.pressed){this.obj.renderAs="dhx_toolbar_btn over";}this.obj.innerHTML=a._rtlParseBtn((this.img!=""?"<img src='"+a.imagePath+this.img+"'>":""),(b.text!=null?"<div>"+b.text+"</div>":""));a.base.appendChild(this.obj);var c=this;this.obj.onselectstart=function(f){f=f||event;f.returnValue=false;};this.obj.onmouseover=function(){this._doOnMouseOver();};this.obj.onmouseout=function(){this._doOnMouseOut();};this.obj._doOnMouseOver=function(){if(c.state==false){return;}if(a.anyUsed!="none"){return;}if(this.pressed){this.renderAs="dhx_toolbar_btn over";return;}this.className="dhx_toolbar_btn over";this.renderAs=this.className;};this.obj._doOnMouseOut=function(){if(c.state==false){return;}if(a.anyUsed!="none"){return;}if(this.pressed){this.renderAs="dhx_toolbar_btn def";return;}this.className="dhx_toolbar_btn def";this.renderAs=this.className;};this.obj[a._isIPad?"ontouchstart":"onmousedown"]=function(f){if(a.checkEvent("onBeforeStateChange")){if(!a.callEvent("onBeforeStateChange",[this.idd.replace(a.idPrefix,""),this.pressed])){return;}}if(c.state==false){return;}if(a.anyUsed!="none"){return;}this.pressed=!this.pressed;this.className=(this.pressed?"dhx_toolbar_btn pres":this.renderAs);var g=this.idd.replace(a.idPrefix,"");if(this.extAction){try{window[this.extAction](g,this.pressed);}catch(f){}}a.callEvent("onStateChange",[g,this.pressed]);return false;};this.setItemState=function(f,h){if(this.obj.pressed!=f){if(f==true){this.obj.pressed=true;this.obj.className="dhx_toolbar_btn pres"+(this.state?"":"_dis");this.obj.renderAs="dhx_toolbar_btn over";}else{this.obj.pressed=false;this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.renderAs=this.obj.className;}if(h==true){var j=this.obj.idd.replace(a.idPrefix,"");if(this.obj.extAction){try{window[this.obj.extAction](j,this.obj.pressed);}catch(g){}}a.callEvent("onStateChange",[j,this.obj.pressed]);}}};this.getItemState=function(){return this.obj.pressed;};this.enableItem=function(){a._enableItem(this);};this.disableItem=function(){a._disableItem(this);};this.isEnabled=function(){return this.state;};this.showItem=function(){this.obj.style.display="";};this.hideItem=function(){this.obj.style.display="none";};this.isVisible=function(){return(this.obj.style.display=="");};this.setItemText=function(e){a._setItemText(this,e);};this.getItemText=function(){return a._getItemText(this);};this.setItemImage=function(e){a._setItemImage(this,e,true);};this.clearItemImage=function(){a._clearItemImage(this,true);};this.setItemImageDis=function(e){a._setItemImage(this,e,false);};this.clearItemImageDis=function(){a._clearItemImage(this,false);};this.setItemToolTip=function(e){this.obj.title=e;};this.getItemToolTip=function(){return this.obj.title;};return this;};dhtmlXToolbarObject.prototype._sliderObject=function(d,f,e){this.id=d.idPrefix+f;this.state=(e.enabled!=null?(e.enabled=="true"?true:false):true);this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.style.display=(e.hidden!=null?"none":"");this.obj.onselectstart=function(g){g=g||event;g.returnValue=false;};this.obj.idd=String(f);this.obj.len=(e.length!=null?Number(e.length):50);this.obj.innerHTML="<div>"+(e.textMin||"")+"</div><div class='sl_bg_l'></div><div class='sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='sl_bg_r'></div><div>"+(e.textMax||"")+"</div>";d.base.appendChild(this.obj);var a=this;this.pen=document.createElement("DIV");this.pen.className="sl_pen";this.obj.appendChild(this.pen);var c=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+d.skin+(d.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=(e.toolTip||"%v");document.body.appendChild(this.label);var b=this.label;this.pen.valueMin=(e.valueMin!=null?Number(e.valueMin):0);this.pen.valueMax=(e.valueMax!=null?Number(e.valueMax):100);if(this.pen.valueMin>this.pen.valueMax){this.pen.valueMin=this.pen.valueMax;}this.pen.valueNow=(e.valueNow!=null?Number(e.valueNow):this.pen.valueMax);if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax;}if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin;}this.pen._detectLimits=function(){this.minX=a.obj.childNodes[1].offsetLeft-4;this.maxX=a.obj.childNodes[3].offsetLeft-this.offsetWidth+1;};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX;};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=false;this.pen[d._isIPad?"ontouchstart":"onmousedown"]=function(g){if(a.state==false){return;}g=g||event;this.initXY=(d._isIPad?g.touches[0].clientX:g.clientX);this.newValueNow=this.valueNow;this.allowMove=true;this.className="sl_pen over";if(b.tip!=""){b.style.visibility="hidden";b.style.display="";b.innerHTML=b.tip.replace("%v",this.valueNow);b.style.left=Math.round(getAbsoluteLeft(this)+this.offsetWidth/2-b.offsetWidth/2)+"px";b.style.top=getAbsoluteTop(this)-b.offsetHeight-3+"px";b.style.visibility="";}};this.pen._doOnMouseMoveStart=function(h){h=h||event;if(!c.allowMove){return;}var g=(d._isIPad?h.touches[0].clientX:h.clientX);var j=g-c.initXY;if(g<getAbsoluteLeft(c)+Math.round(c.offsetWidth/2)&&c.nowX==c.minX){return;}if(g>getAbsoluteLeft(c)+Math.round(c.offsetWidth/2)&&c.nowX==c.maxX){return;}c.newNowX=c.nowX+j;if(c.newNowX<c.minX){c.newNowX=c.minX;}if(c.newNowX>c.maxX){c.newNowX=c.maxX;}c.nowX=c.newNowX;c.style.left=c.nowX+"px";c.initXY=g;c.newValueNow=Math.round((c.valueMax-c.valueMin)*(c.newNowX-c.minX)/(c.maxX-c.minX)+c.valueMin);if(b.tip!=""){b.innerHTML=b.tip.replace(/%v/gi,c.newValueNow);b.style.left=Math.round(getAbsoluteLeft(c)+c.offsetWidth/2-b.offsetWidth/2)+"px";b.style.top=getAbsoluteTop(c)-b.offsetHeight-3+"px";}h.cancelBubble=true;h.returnValue=false;return false;};this.pen._doOnMouseMoveEnd=function(){if(!c.allowMove){return;}c.className="sl_pen";c.allowMove=false;c.nowX=c.newNowX;c.valueNow=c.newValueNow;if(b.tip!=""){b.style.display="none";}d.callEvent("onValueChange",[a.obj.idd.replace(d.idPrefix,""),c.valueNow]);};if(d._isIPad){document.addEventListener("touchmove",c._doOnMouseMoveStart,false);document.addEventListener("touchend",c._doOnMouseMoveEnd,false);}else{if(_isIE){document.body.attachEvent("onmousemove",c._doOnMouseMoveStart);document.body.attachEvent("onmouseup",c._doOnMouseMoveEnd);}else{window.addEventListener("mousemove",c._doOnMouseMoveStart,false);window.addEventListener("mouseup",c._doOnMouseMoveEnd,false);}}this.enableItem=function(){if(this.state){return;}this.state=true;this.obj.className="dhx_toolbar_btn def";};this.disableItem=function(){if(!this.state){return;}this.state=false;this.obj.className="dhx_toolbar_btn dis";};this.isEnabled=function(){return this.state;};this.showItem=function(){this.obj.style.display="";};this.hideItem=function(){this.obj.style.display="none";};this.isVisible=function(){return(this.obj.style.display=="");};this.setValue=function(g,h){g=Number(g);if(g<this.pen.valueMin){g=this.pen.valueMin;}if(g>this.pen.valueMax){g=this.pen.valueMax;}this.pen.valueNow=g;this.pen._definePos();if(h==true){d.callEvent("onValueChange",[this.obj.idd.replace(d.idPrefix,""),this.pen.valueNow]);}};this.getValue=function(){return this.pen.valueNow;};this.setMinValue=function(h,g){h=Number(h);if(h>this.pen.valueMax){return;}this.obj.childNodes[0].innerHTML=g;this.obj.childNodes[0].style.display=(g.length>0?"":"none");this.pen.valueMin=h;if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin;}this.pen._detectLimits();this.pen._definePos();};this.setMaxValue=function(h,g){h=Number(h);if(h<this.pen.valueMin){return;}this.obj.childNodes[4].innerHTML=g;this.obj.childNodes[4].style.display=(g.length>0?"":"none");this.pen.valueMax=h;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax;}this.pen._detectLimits();this.pen._definePos();};this.getMinValue=function(){var g=this.obj.childNodes[0].innerHTML;var h=this.pen.valueMin;return new Array(h,g);};this.getMaxValue=function(){var g=this.obj.childNodes[4].innerHTML;var h=this.pen.valueMax;return new Array(h,g);};this.setItemToolTipTemplate=function(g){this.label.tip=g;};this.getItemToolTipTemplate=function(){return this.label.tip;};return this;};dhtmlXToolbarObject.prototype.unload=function(){if(this._isIPad){document.removeEventListener("touchstart",this._doOnClick,false);}else{if(_isIE){document.body.detachEvent("onmousedown",this._doOnClick);}else{window.removeEventListener("mousedown",this._doOnClick,false);}}this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.destructor();this._xmlLoader=null;}while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0]);}this.cont.removeChild(this.base);this.base=null;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0]);}this.cont.className="";this.cont=null;this.detachAllEvents();this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this._isIE6=null;this._isWebToolbar=null;this.align=null;this.anyUsed=null;this.idPrefix=null;this.imagePath=null;this.rootTypes=null;this.selectPolygonOffsetLeft=null;this.selectPolygonOffsetTop=null;this.skin=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._doOnLoad=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.attachEvent=null;this.callEvent=null;this.checkEvent=null;this.eventCatcher=null;this.detachEvent=null;this.detachAllEvents=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.isVisible=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.getPosition=null;this.setPosition=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){this.tX1=document.body.scrollLeft;this.tX2=this.tX1+(window.innerWidth||document.body.clientWidth);this.tY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);this.tY2=this.tY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight);};dhtmlXToolbarObject.prototype.setUserData=function(d,a,c){if(this.objPull[this.idPrefix+d]==null){return;}var b=this.objPull[this.idPrefix+d];if(b.userData==null){b.userData={};}b.userData[a]=c;};dhtmlXToolbarObject.prototype.getUserData=function(b,a){if(this.objPull[this.idPrefix+b]==null){return null;}if(this.objPull[this.idPrefix+b].userData==null){return null;}if(this.objPull[this.idPrefix+b].userData[a]==null){return null;}return this.objPull[this.idPrefix+b].userData[a];};dhtmlXToolbarObject.prototype._isListOptionExists=function(a,c){if(this.objPull[this.idPrefix+a]==null){return false;}var b=this.objPull[this.idPrefix+a];if(b.type!="buttonSelect"){return false;}if(b._listOptions[c]==null){return false;}return true;};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,e,b,d){if(!this._isListOptionExists(a,e)){return;}var c=this.objPull[this.idPrefix+a]._listOptions[e];if(c.userData==null){c.userData={};}c.userData[b]=d;};dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,d,b){if(!this._isListOptionExists(a,d)){return null;}var c=this.objPull[this.idPrefix+a]._listOptions[d];if(!c.userData){return null;}return(c.userData[b]?c.userData[b]:null);};(function(){dhtmlx.extend_api("dhtmlXToolbarObject",{_init:function(a){return[a.parent,a.skin];},icon_path:"setIconsPath",xml:"loadXML",items:"items",align:"setAlign",rtl:"setRTL",skin:"setSkin"},{items:function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.type=="button"){this.addButton(c.id,null,c.text,c.img,c.img_disabled);}if(c.type=="separator"){this.addSeparator(c.id,null);}if(c.type=="text"){this.addText(c.id,null,c.text);}if(c.type=="buttonSelect"){this.addButtonSelect(c.id,null,c.text,c.options,c.img,c.img_disabled,c.renderSelect,c.openAll,c.maxOpen);}if(c.type=="buttonTwoState"){this.addButtonTwoState(c.id,null,c.text,c.img,c.img_disabled);}if(c.type=="buttonInput"){this.addInput(c.id,null,c.text);}if(c.type=="slider"){this.addSlider(c.id,null,c.length,c.value_min,c.value_max,c.value_now,c.text_min,c.text_max,c.tip_template);}if(c.width){this.setWidth(c.id,c.width);}if(c.disabled){this.disableItem(c.id);}if(c.tooltip){this.setItemToolTip(c.id,c.tooltip);}if(c.pressed===true){this.setItemState(c.id,true);}}}});})();